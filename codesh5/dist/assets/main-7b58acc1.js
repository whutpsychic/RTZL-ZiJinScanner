import"./index-70f61aa8.js";import{E as H}from"./el-overlay-11796c41.js";import{ai as U,aj as E,_ as P,M,Q as T,a as Q,r as k,S as A,o as l,c as _,d as t,b as y,w as f,F as L,N as O,ak as z,al as G,a5 as F,J as h,e as s,x as m,a8 as K,a4 as W,k as D,p as X,f as Z,an as $,aa as tt}from"./index-a24b99c2.js";import{E as et,a as at}from"./el-card-8c23972c.js";/* empty css              */function ot(d){return U({url:`${E.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecord`,method:"post",data:d})}function nt(d){return U({url:`${E.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecordDecide`,method:"get",params:d})}const lt=""+new URL("../image/saoma.png",import.meta.url).href;const st={setup(){M.await("scanner",o=>{o!="null"?(e.qualityCheckingList=[],u.value=1,b.value=!0,v({batchnumber:"",barcode:o})):T({message:"数据获取失败",type:"fail",className:"particulars-detail-popup"})});const d=Q(),n=k(""),x=k(!1),e=A({qualityCheckingList:[],yjtJyInformationData:{},yjtJyInformationDecideDataList:[],filePathList:[]}),S=k(!1),j=k(!1),b=k(!1),C=k(10),u=k(0),V=()=>{d.push({path:"/home"})},q=()=>{u.value=1,e.qualityCheckingList=[],b.value=!1,v({batchnumber:n.value,barcode:""})},w=()=>{u.value=1,e.qualityCheckingList=[],b.value=!1,v({batchnumber:n.value,barcode:""})},I=()=>{u.value=u.value+1,v({batchnumber:n.value,barcode:""})},J=()=>{M.scan()},R=o=>{e.filePathList=[],e.filePathList=o,S.value=!0},N=o=>{if(e.yjtJyInformationData=o,o.state=="1"){let r={yjtJyInformationId:o.id,status:"2"};a(r)}x.value=!0};function a(o){nt(o).then(r=>{e.yjtJyInformationDecideDataList=r.data.data}).catch(r=>{console.log(r)})}function v(o){let r={},p={},c={};c.limit=C.value,c.offset=u.value,c.blockId="paramBlock",c.data=o,p.paramBlock=c,r.blocks=p,ot(r).then(g=>{e.qualityCheckingList=[...e.qualityCheckingList,...g.data.blocks.resultBlock.data],j.value=!1,e.qualityCheckingList.length==g.data.blocks.resultBlock.total&&(b.value=!0)}).catch(g=>{console.log(g)})}return{showImage:S,centerDialogVisible:x,searchValue:n,loading:j,finished:b,limit:C,offset:u,listData:e,onClickLeft:V,onLoad:I,statusChange:q,dateFormat:(o,r)=>{let p,c=new Date(r);const g={"Y+":c.getFullYear().toString(),"m+":(c.getMonth()+1).toString(),"d+":c.getDate().toString(),"H+":c.getHours().toString(),"M+":c.getMinutes().toString(),"S+":c.getSeconds().toString()};for(let Y in g)p=new RegExp("("+Y+")").exec(o),p&&(o=o.replace(p[1],p[1].length==1?g[Y]:g[Y].padStart(p[1].length,"0")));return o},onSearch:w,qualityCheckingRecordDetails:N,scanClick:J,seeImg:R}}},i=d=>(X("data-v-4e1b0bbb"),d=d(),Z(),d),it={class:"header"},ct={style:{display:"flex","background-color":"#ffffff"}},rt={id:"content",class:"content"},dt={style:{padding:"0px 5px 5px 5px"}},ut=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),ht=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),_t={style:{"overflow-y":"auto","overscroll-behavior-y":"contain",height:"calc(100vh - 180px)"}},ft=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),pt=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),gt=i(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),yt=i(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),mt=i(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),bt=i(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),kt={key:0},vt=i(()=>t("span",{style:{"font-weight":"bold"}},"是否最新：",-1)),Dt=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),wt={key:0,style:{"font-weight":"bold"}},Ct=i(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),It=i(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Lt={key:0},xt=i(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),St={key:1};function jt(d,n,x,e,S,j){const b=O,C=z,u=$,V=et,q=G,w=K,I=at,J=tt,R=W,N=H;return l(),_(L,null,[t("div",it,[y(b,{title:"质检记录列表",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),t("div",ct,[y(C,{style:{width:"80%"},modelValue:e.searchValue,"onUpdate:modelValue":n[0]||(n[0]=a=>e.searchValue=a),shape:"round",placeholder:"请输入编号搜索",onSearch:e.onSearch},null,8,["modelValue","onSearch"]),t("img",{style:{width:"55px",height:"55px"},src:lt,onClick:n[1]||(n[1]=(...a)=>e.scanClick&&e.scanClick(...a))})])]),t("div",rt,[y(q,{loading:e.loading,"onUpdate:loading":n[2]||(n[2]=a=>e.loading=a),finished:e.finished,offset:"50","finished-text":"没有更多了",onLoad:e.onLoad},{default:f(()=>[t("div",dt,[(l(!0),_(L,null,F(e.listData.qualityCheckingList,(a,v)=>(l(),D(V,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:B=>e.qualityCheckingRecordDetails(a)},{default:f(()=>[t("div",null,[t("p",null,[ut,t("span",null,s(a.batchnumber),1)]),t("p",null,[ht,t("span",null,s(parseFloat(a.suttle))+s(a.unit),1)]),a.state=="0"?(l(),D(u,{key:0,type:"primary"},{default:f(()=>[h("未质检")]),_:1})):m("",!0),a.state=="1"?(l(),D(u,{key:1,type:"success"},{default:f(()=>[h("已质检")]),_:1})):m("",!0)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),y(N,{modelValue:e.centerDialogVisible,"onUpdate:modelValue":n[4]||(n[4]=a=>e.centerDialogVisible=a),"destroy-on-close":!0,title:"质检记录详情",width:"96%","align-center":""},{default:f(()=>[t("div",_t,[t("div",null,[y(w,{"content-position":"left"},{default:f(()=>[h("基本信息")]),_:1}),t("p",null,[ft,t("span",null,s(e.listData.yjtJyInformationData.batchnumber),1)]),t("p",null,[pt,t("span",null,s(parseFloat(e.listData.yjtJyInformationData.suttle))+s(e.listData.yjtJyInformationData.unit),1)]),t("p",null,[gt,t("span",null,s(e.listData.yjtJyInformationData.standard),1)]),t("p",null,[yt,t("span",null,s(e.listData.yjtJyInformationData.suttleperson),1),h("     "),mt,t("span",null,s(e.listData.yjtJyInformationData.scanUser),1)]),t("p",null,[bt,h(s(e.dateFormat("YYYY-mm-dd HH:MM:SS",e.listData.yjtJyInformationData.proDate)),1)])]),e.listData.yjtJyInformationData.state=="1"?(l(),_("div",kt,[y(w,{"content-position":"left"},{default:f(()=>[h("质检信息")]),_:1}),(l(!0),_(L,null,F(e.listData.yjtJyInformationDecideDataList,(a,v)=>(l(),_("div",null,[t("div",null,[t("p",null,[vt,a.details.isNew=="0"?(l(),D(I,{key:0,type:"success"},{default:f(()=>[h("是")]),_:1})):m("",!0),a.details.isNew=="1"?(l(),D(I,{key:1,type:"danger"},{default:f(()=>[h("否")]),_:1})):m("",!0)]),t("p",null,[Dt,t("span",null,s(a.details.exteriorName),1),h("     "),a.details.exterior!="0"?(l(),_("span",wt,"类型：")):m("",!0),t("span",null,s(a.details.dictName),1)]),t("p",null,[Ct,h(s(e.dateFormat("YYYY-mm-dd HH:MM:SS",a.details.checkoutDate)),1)]),t("p",null,[It,t("span",null,s(a.details.checkoutUser),1)]),a.details.alterReason?(l(),_("p",Lt,[xt,t("span",null,s(a.details.alterReason),1)])):m("",!0),a.details.exterior!="0"?(l(),_("div",St,[(l(!0),_(L,null,F(a.fileList,(B,o)=>(l(),D(J,{style:{margin:"0 2%"},onClick:r=>e.seeImg(a.fileList),width:"45%",height:"8rem",fit:"cover",position:"left",src:B},null,8,["onClick","src"]))),256))])):m("",!0),y(w)])]))),256))])):m("",!0)]),y(R,{show:e.showImage,"onUpdate:show":n[3]||(n[3]=a=>e.showImage=a),images:e.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])]),_:1},8,["modelValue"])],64)}const Bt=P(st,[["render",jt],["__scopeId","data-v-4e1b0bbb"]]);export{Bt as default};
