System.register(["./el-table-column-legacy-21b45262.js","./index-legacy-50d3e2a7.js","./chukudan-legacy-75d20e56.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js"],(function(e,a){"use strict";var t,l,o,n,i,c,r,d,s,u,b,f,v,h,m,p,g,y,k,w,C,j,N,_,x,D,L,q,I=document.createElement("style");return I.textContent=".container[data-v-ec1cf12f]{display:flex;flex-direction:column;justify-content:space-between}.container>#data-area1[data-v-ec1cf12f]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-ec1cf12f]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-ec1cf12f]{width:45px}.btn-area>div[data-v-ec1cf12f]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-ec1cf12f]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-ec1cf12f]:nth-child(3){background-color:var(--btn-color1)}[data-v-ec1cf12f] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-ec1cf12f] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(I),{setters:[e=>{t=e.E,l=e.a},e=>{o=e._,n=e.a,i=e.k,c=e.r,r=e.u,d=e.m,s=e.e,u=e.s,b=e.o,f=e.c,v=e.b,h=e.d,m=e.w,p=e.q,g=e.g,y=e.N,k=e.v,w=e.t,C=e.p,j=e.i},e=>{N=e.b,_=e.d,x=e.s},e=>{D=e._},e=>{L=e._},e=>{q=e._}],execute:function(){const a={setup(){const e=n(),a=i();let t=c([]),l=c([{yingjian:0,yijian:0,queshao:0},{yingjian:"",yijian:0,queshao:""}]);const o=r();let b=0,f=0,v="";const h=e=>{let a=o.state.chukudanListInfo;l.value[0].yingjian=a.planNum,l.value[0].queshao=a.planNum,b=0,f=0,e.forEach((e=>{b+=e.blocks,f+=e.weight})),l.value[0].yijian=f,l.value[1].yijian=b,f>0&&(l.value[0].queshao=(l.value[0].yingjian-f/1e3).toFixed(4)),l.value[0].queshao<0&&s("请求数量过多！")};return d((()=>{let e=a.query,l=o.state.scandList||[];if(t.value=l,h(l),e.barcode){if(!N(e.barcode.trim()))return void s("条形码不符合规范");for(let a=0;a<l.length;a++)if(l[a].barcode==e.barcode)return void s("该批次已经选择，请勿重复选择！");u("加载中"),_(e.barcode).then((e=>{!0===e.data.value?s(e.data.message):(l.push(e.data.value),o.commit("setScandList",l),t.value=l,h(l))}))}})),{onClickLeft:()=>history.back(),tableData1:t,tableData2:l,onHandle:()=>{e.push({name:"manualUnqualifiedBarcodes"})},onConfirm:()=>{o.state.chukudan;let e=o.state.chukudanListInfo,a=o.state.carInfo;o.state.userInfo;let l={};l.carNo=a.plateNo,l.carUnit=a.forwardingUnit,l.deliveryNo=a.deliveryNo,l.materialCode=e.materialCode,l.materialId=e.materialDescribeId,l.materialName=e.materialDescribe,l.pickPackage=b,l.pickWeight=f,l.receiveUnit=e.receiveUnit,l.remark=e.remark,l.sendPlanNo=e.billNo,l.type=e.type,l.unit=e.unit,l.warehouseCode=a.warehouseCode,l.warehouseName=a.warehouseName;let n=[];t.value.forEach((e=>{let t={};t.barcode=e.barcode,t.batchNo=e.batchNo,t.blocks=e.blocks,t.carNo=a.plateNo,t.code=e.code,t.unit=e.unit,t.weight=e.weight,n.push(t)})),u(),x({pickBill:l,pickBillDetailList:n}).then((e=>{(e.data.state=!0)?(t.value=[],o.commit("setScandList",t.value),g({message:"拣配成功!",type:"success",className:"toast",overlay:!0})):s(e.data.message)}))},selectRow:(e,a,t)=>{v=p(e)},onDelete:()=>{if(v){let e=t.value.filter((e=>e.barcode!=v.barcode));t.value=e,o.commit("setScandList",t.value),v="",h(e)}else s("请选择要剔除的行！")}}}},I=e=>(C("data-v-ec1cf12f"),e=e(),j(),e),U={class:"container"},E={class:"btn-area"},R=[I((()=>h("img",{src:D,alt:""},null,-1))),I((()=>h("div",null,"确认",-1)))],S=[I((()=>h("img",{src:L,alt:"",type:"primary"},null,-1))),I((()=>h("div",null,"手动",-1)))],B=[I((()=>h("img",{src:q,alt:"",type:"primary"},null,-1))),I((()=>h("div",null,"剔除",-1)))];e("default",o(a,[["render",function(e,a,o,n,i,c){const r=y,d=l,s=t;return b(),f("main",null,[v(r,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),h("div",U,[v(s,{data:n.tableData1,border:"",id:"data-area1",onRowClick:n.selectRow},{default:m((()=>[v(d,{label:"日期",width:"150px"},{default:m((e=>[k(w(e.row.proDate.substr(0,10)),1)])),_:1}),v(d,{prop:"code",label:"一维码",width:"210px"}),v(d,{prop:"weight",label:"重量",width:"110px"})])),_:1},8,["data","onRowClick"]),v(s,{data:n.tableData2,border:"",id:"data-area2"},{default:m((()=>[v(d,{prop:"yingjian",label:"应拣"}),v(d,{prop:"yijian",label:"已拣"}),v(d,{prop:"queshao",label:"缺少"})])),_:1},8,["data"]),h("div",E,[h("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},R),h("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},S),h("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},B)])])])}],["__scopeId","data-v-ec1cf12f"]]))}}}));
