import{i as m,af as ce,ag as $e,ah as _e,ai as Pe,ac as Ae,c as M,n as O,a8 as de,m as N,d as D,p as I,W as ue,f as k,aj as fe,e as ve,J as ze,a3 as _,ak as J,ae as z,al as he,am as Oe,a as g,w as G,an as X,q as Le,t as U,ao as Ne,b as ie,ap as p,K as Ee,aq as He,ar as le,as as We,j as Me,r as De,a4 as Ze,L as je,ab as Ve,S as Fe,at as qe,a6 as Ke,V as Ue,$ as Xe,a0 as Ye,h as Je,a5 as oe}from"./index-ce976914.js";import{u as be}from"./use-id-890333ae.js";import{u as Q,o as pe,c as Ge}from"./mount-component-21eea6f5.js";import{T as Qe}from"./use-tab-status-0a8acb71.js";import{S as et,a as tt}from"./index-498faa0f.js";import{u as nt}from"./index-8d0d96cb.js";function at(e,i,l){let r,d=0;const t=e.scrollLeft,o=l===0?1:Math.round(l*1e3/16);function s(){m.cancelRaf(r)}function v(){e.scrollLeft+=(i-t)/o,++d<o&&(r=m.raf(v))}return v(),s}function it(e,i,l,r){let d,t=ce(e);const o=t<i,s=l===0?1:Math.round(l*1e3/16),v=(i-t)/s;function y(){m.cancelRaf(d)}function x(){t+=v,(o&&t>i||!o&&t<i)&&(t=i),$e(e,t),o&&t<i||!o&&t>i?d=m.raf(x):r&&(d=m.raf(r))}return x(),y}function me(e,i){if(!_e||!window.IntersectionObserver)return;const l=new IntersectionObserver(t=>{i(t[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&l.observe(e.value)},d=()=>{e.value&&l.unobserve(e.value)};Pe(d),Ae(d),m.onMountedOrActivated(r)}const[lt,ot]=M("sticky"),rt={zIndex:O,position:de("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var st=D({name:lt,props:rt,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const r=I(),d=m.useScrollParent(r),t=ue({fixed:!1,width:0,height:0,transform:0}),o=I(!1),s=k(()=>fe(e.position==="top"?e.offsetTop:e.offsetBottom)),v=k(()=>{if(o.value)return;const{fixed:f,height:C,width:u}=t;if(f)return{width:`${u}px`,height:`${C}px`}}),y=k(()=>{if(!t.fixed||o.value)return;const f=ve(ze(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),x=f=>i("scroll",{scrollTop:f,isFixed:t.fixed}),B=()=>{if(!r.value||J(r))return;const{container:f,position:C}=e,u=m.useRect(r),T=ce(window);if(t.width=u.width,t.height=u.height,C==="top")if(f){const c=m.useRect(f),$=c.bottom-s.value-t.height;t.fixed=s.value>u.top&&c.bottom>0,t.transform=$<0?$:0}else t.fixed=s.value>u.top;else{const{clientHeight:c}=document.documentElement;if(f){const $=m.useRect(f),b=c-$.top-s.value-t.height;t.fixed=c-s.value<u.bottom&&c>$.top,t.transform=b<0?-b:0}else t.fixed=c-s.value<u.bottom}x(T)};return _(()=>t.fixed,f=>i("change",f)),m.useEventListener("scroll",B,{target:d,passive:!0}),me(r,B),_([he,Oe],()=>{!r.value||J(r)||!t.fixed||(o.value=!0,z(()=>{const f=m.useRect(r);t.width=f.width,t.height=f.height,o.value=!1}))}),()=>{var f;return g("div",{ref:r,style:v.value},[g("div",{class:ot({fixed:t.fixed&&!o.value}),style:y.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const ct=G(st),[dt,re]=M("tabs");var ut=D({name:dt,props:{count:X(Number),inited:Boolean,animated:Boolean,duration:X(O),swipeable:Boolean,lazyRender:Boolean,currentIndex:X(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const r=I(),d=s=>i("change",s),t=()=>{var s;const v=(s=l.default)==null?void 0:s.call(l);return e.animated||e.swipeable?g(et,{ref:r,loop:!1,class:re("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[v]}):v},o=s=>{const v=r.value;v&&v.state.active!==s&&v.swipeTo(s,{immediate:!e.inited})};return _(()=>e.currentIndex,o),Le(()=>{o(e.currentIndex)}),Q({swipeRef:r}),()=>g("div",{class:re("content",{animated:e.animated||e.swipeable})},[t()])}});const[ge,K]=M("tabs"),ft={type:de("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:U,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:U,lineWidth:O,lineHeight:O,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},ye=Symbol(ge);var vt=D({name:ge,props:ft,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:i,slots:l}){let r,d,t,o,s;const v=I(),y=I(),x=I(),B=I(),f=be(),C=m.useScrollParent(v),[u,T]=nt(),{children:c,linkChildren:$}=m.useChildren(ye),b=ue({inited:!1,position:"",lineStyle:{},currentIndex:-1}),E=k(()=>c.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=k(()=>({borderColor:e.color,background:e.background})),H=(n,a)=>{var h;return(h=n.name)!=null?h:a},j=k(()=>{const n=c[b.currentIndex];if(n)return H(n,b.currentIndex)}),L=k(()=>fe(e.offsetTop)),ee=k(()=>e.sticky?L.value+r:0),W=n=>{const a=y.value,h=u.value;if(!E.value||!a||!h||!h[b.currentIndex])return;const S=h[b.currentIndex].$el,w=S.offsetLeft-(a.offsetWidth-S.offsetWidth)/2;o&&o(),o=at(a,w,n?0:+e.duration)},P=()=>{const n=b.inited;z(()=>{const a=u.value;if(!a||!a[b.currentIndex]||e.type!=="line"||J(v.value))return;const h=a[b.currentIndex].$el,{lineWidth:S,lineHeight:w}=e,R=h.offsetLeft+h.offsetWidth/2,A={width:ie(S),backgroundColor:e.color,transform:`translateX(${R}px) translateX(-50%)`};if(n&&(A.transitionDuration=`${e.duration}s`),p(w)){const q=ie(w);A.height=q,A.borderRadius=q}b.lineStyle=A})},we=n=>{const a=n<b.currentIndex?-1:1;for(;n>=0&&n<c.length;){if(!c[n].disabled)return n;n+=a}},V=(n,a)=>{const h=we(n);if(!p(h))return;const S=c[h],w=H(S,h),R=b.currentIndex!==null;b.currentIndex!==h&&(b.currentIndex=h,a||W(),P()),w!==e.active&&(i("update:active",w),R&&i("change",w,S.title)),t&&!e.scrollspy&&He(Math.ceil(le(v.value)-L.value))},F=(n,a)=>{const h=c.find((w,R)=>H(w,R)===n),S=h?c.indexOf(h):0;V(S,a)},te=(n=!1)=>{if(e.scrollspy){const a=c[b.currentIndex].$el;if(a&&C.value){const h=le(a,C.value)-ee.value;d=!0,s&&s(),s=it(C.value,h,n?0:+e.duration,()=>{d=!1})}}},xe=(n,a,h)=>{const{title:S,disabled:w}=c[a],R=H(c[a],a);w||(Ge(e.beforeChange,{args:[R],done:()=>{V(a),te()}}),We(n)),i("clickTab",{name:R,title:S,event:h,disabled:w})},Se=n=>{t=n.isFixed,i("scroll",n)},Te=n=>{z(()=>{F(n),te(!0)})},Ce=()=>{for(let n=0;n<c.length;n++){const{top:a}=m.useRect(c[n].$el);if(a>ee.value)return n===0?0:n-1}return c.length-1},Re=()=>{if(e.scrollspy&&!d){const n=Ce();V(n)}},Ie=()=>{if(e.type==="line"&&c.length)return g("div",{class:K("line"),style:b.lineStyle},null)},ne=()=>{var n,a,h;const{type:S,border:w,sticky:R}=e,A=[g("div",{ref:R?void 0:x,class:[K("wrap"),{[Ee]:S==="line"&&w}]},[g("div",{ref:y,role:"tablist",class:K("nav",[S,{shrink:e.shrink,complete:E.value}]),style:Z.value,"aria-orientation":"horizontal"},[(n=l["nav-left"])==null?void 0:n.call(l),c.map(q=>q.renderTitle(xe)),Ie(),(a=l["nav-right"])==null?void 0:a.call(l)])]),(h=l["nav-bottom"])==null?void 0:h.call(l)];return R?g("div",{ref:x},[A]):A},ae=()=>{P(),z(()=>{var n,a;W(!0),(a=(n=B.value)==null?void 0:n.swipeRef.value)==null||a.resize()})};_(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],P),_(he,ae),_(()=>e.active,n=>{n!==j.value&&F(n)}),_(()=>c.length,()=>{b.inited&&(F(e.active),P(),z(()=>{W(!0)}))});const ke=()=>{F(e.active,!0),z(()=>{b.inited=!0,x.value&&(r=m.useRect(x.value).height),W(!0)})},Be=(n,a)=>i("rendered",n,a);return Q({resize:ae,scrollTo:Te}),Ne(P),pe(P),m.onMountedOrActivated(ke),me(v,P),m.useEventListener("scroll",Re,{target:C,passive:!0}),$({id:f,props:e,setLine:P,scrollable:E,onRendered:Be,currentName:j,setTitleRefs:T,scrollIntoView:W}),()=>g("div",{ref:v,class:K([e.type])},[e.sticky?g(ct,{container:v.value,offsetTop:L.value,onScroll:Se},{default:()=>[ne()]}):ne(),g(ut,{ref:B,count:c.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:V},{default:()=>{var n;return[(n=l.default)==null?void 0:n.call(l)]}})])}});const[ht,se]=M("tab"),bt=D({name:ht,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:O,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:U},setup(e,{slots:i}){const l=k(()=>{const d={},{type:t,color:o,disabled:s,isActive:v,activeColor:y,inactiveColor:x}=e;o&&t==="card"&&(d.borderColor=o,s||(v?d.backgroundColor=o:d.color=o));const f=v?y:x;return f&&(d.color=f),d}),r=()=>{const d=g("span",{class:se("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||p(e.badge)&&e.badge!==""?g(Me,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>g("div",{id:e.id,role:"tab",class:[se([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}}),[mt,Y]=M("tab"),gt=ve({},De,{dot:Boolean,name:O,badge:O,title:String,disabled:Boolean,titleClass:Ze,titleStyle:[String,Object],showZeroBadge:U});var yt=D({name:mt,props:gt,setup(e,{slots:i}){const l=be(),r=I(!1),d=je(),{parent:t,index:o}=m.useParent(ye);if(!t)return;const s=()=>{var u;return(u=e.name)!=null?u:o.value},v=()=>{r.value=!0,t.props.lazyRender&&z(()=>{t.onRendered(s(),e.title)})},y=k(()=>{const u=s()===t.currentName.value;return u&&!r.value&&v(),u}),x=I(""),B=I("");Ve(()=>{const{titleClass:u,titleStyle:T}=e;x.value=u?Fe(u):"",B.value=T&&typeof T!="string"?qe(Ke(T)):T});const f=u=>g(bt,Je({key:l,id:`${t.id}-${o.value}`,ref:t.setTitleRefs(o.value),style:B.value,class:x.value,isActive:y.value,controls:l,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:T=>u(d.proxy,o.value,T)},oe(t.props,["type","color","shrink"]),oe(e,["dot","badge","title","disabled","showZeroBadge"])),{title:i.title}),C=I(!y.value);return _(y,u=>{u?C.value=!1:m.doubleRaf(()=>{C.value=!0})}),_(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),Ue(Qe,y),Q({id:l,renderTitle:f}),()=>{var u;const T=`${t.id}-${o.value}`,{animated:c,swipeable:$,scrollspy:b,lazyRender:E}=t.props;if(!i.default&&!c)return;const Z=b||y.value;if(c||$)return g(tt,{id:l,role:"tabpanel",class:Y("panel-wrapper",{inactive:C.value}),tabindex:y.value?0:-1,"aria-hidden":!y.value,"aria-labelledby":T},{default:()=>{var L;return[g("div",{class:Y("panel")},[(L=i.default)==null?void 0:L.call(i)])]}});const j=r.value||b||!E?(u=i.default)==null?void 0:u.call(i):null;return Xe(g("div",{id:l,role:"tabpanel",class:Y("panel"),tabindex:Z?0:-1,"aria-labelledby":T},[j]),[[Ye,Z]])}}});const It=G(yt),kt=G(vt);export{kt as T,It as a};
