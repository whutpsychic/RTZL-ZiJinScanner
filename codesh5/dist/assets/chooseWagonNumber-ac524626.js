import"./el-tag-56496b10.js";import{v as W}from"./el-loading-e3a885e8.js";import{_ as B,p as r,l as L,k as V,q as j,s as q,x as T,y as G,a as l,F as n,z as g,$ as U,A,a6 as P,o as J,G as K,D as O,E as X}from"./index-7ad4752d.js";import{C as Z}from"./index-1c65cf2d.js";import{F as $}from"./index-f4c47f9e.js";import{E as ee,a as te}from"./el-table-column-44cf2d59.js";import"./el-popper-6266427f.js";import{C as oe}from"./index-26753d2d.js";/* empty css              */import{C as ae}from"./index-dc6231d5.js";import"./index-4f064406.js";import{N as ne}from"./index-d7f0187b.js";import{a as le}from"./pickWith-1b0325a9.js";import{_ as re}from"./btn_chaxun1-d052ddc6.js";import{_ as se,a as ie}from"./btn_shoudong-07961c15.js";import{a as z}from"./function-call-63bccc74.js";import{F as me}from"./index-c6e5359e.js";import"./use-global-config-98ac7746.js";import"./objects-8d85df12.js";import"./use-id-c21c8892.js";import"./mount-component-b771f396.js";import"./index-6a3a1558.js";import"./request-352f5424.js";let F=new Date,ce=parseInt(F.getFullYear()-1),de=parseInt(F.getMonth()),ue=parseInt(F.getDate()),H="";const pe={mounted(){H=this.$refs.formRef},setup(){const s=r(""),t=r(""),m=r(""),e=r(""),D=L(),C=r(!1),c=V(),v=r([]),b=r(""),d=r(!0),w=r(null);j(()=>{q.register("goback",()=>{c.push({path:"/pickWithQueryInfoData"})}),t.value=h("YYYY-mm-dd",new Date(new Date().getTime()-24*60*60*1e3)),m.value=h("YYYY-mm-dd",new Date);let o=document.body.scrollHeight-275;b.value="height:"+o+"px",s.value=t.value+"至"+m.value,setTimeout(()=>{Y()},0)});const u=(o,_)=>J(o).pizhong.toFixed(4),S=o=>{const[_,i]=o;C.value=!1,t.value=h("YYYY-mm-dd",_),m.value=h("YYYY-mm-dd",i),s.value=`${t.value}至${m.value}`},y=()=>{c.push({path:"/pickWithQueryInfoData"})},k=()=>{H.submit()};let a={};const N=()=>{Y()};let x="";const Q=(o,_,i)=>{e.value=o.chehao,x=o},E=()=>{x?(D.commit("setCarInfo",x),c.push({name:"pickWithQueryInfoData"})):z({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择车号</span>'}).then(()=>{})},M=()=>{if(e.value){let o={chehao:e.value,danjuhao:"",chengfang:"",pizhong:0,DataId:""};D.commit("setCarInfo",o),c.push({name:"pickWithQueryInfoData"})}else z({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请手工录入车号</span>'}).then(()=>{})},Y=()=>{d.value=!0,e.value="",w.value.setScrollTop(0),a.startDate=t.value+" 00:00:00",a.endDate=m.value+" 23:59:59",le(a).then(o=>{v.value=o.data.data,d.value=!1})},h=(o,_)=>{let i,p=new Date(_);const I={"Y+":p.getFullYear().toString(),"m+":(p.getMonth()+1).toString(),"d+":p.getDate().toString(),"H+":p.getHours().toString(),"M+":p.getMinutes().toString(),"S+":p.getSeconds().toString()};for(let R in I)i=new RegExp("("+R+")").exec(o),i&&(o=o.replace(i[1],i[1].length==1?I[R]:I[R].padStart(i[1].length,"0")));return o};return{deDate:[new Date(new Date().getTime()-24*60*60*1e3),new Date],minDate:new Date(ce,de,ue),show:C,dataText:s,startDate:t,endDate:m,tableData:v,tableRef:w,loading:d,tableHeight:b,chehao:e,formatter:u,onClickLeft:y,onConfirm:S,onSubmit:N,onQuery:k,queryData:Y,selectRow:Q,confirmSelect:E,dateFormat:h,handleConfirmSelect:M}}},f=s=>(O("data-v-b39b51e2"),s=s(),X(),s),fe={style:{"font-weight":"bolder","font-size":"16px"}},he={class:"btn-area"},_e=f(()=>n("img",{src:re},null,-1)),ge=f(()=>n("div",null,"查询",-1)),ve=[_e,ge],be=f(()=>n("img",{src:se},null,-1)),we=f(()=>n("div",null,"确认",-1)),De=[be,we],Ce=f(()=>n("img",{src:ie},null,-1)),Se=f(()=>n("div",null,"手动确认",-1)),ye=[Ce,Se];function ke(s,t,m,e,D,C){const c=ne,v=Z,b=ae,d=oe,w=me,u=te,S=ee,y=$,k=W;return T(),G("main",null,[l(c,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),n("div",null,[l(w,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:g(()=>[l(d,{inset:""},{default:g(()=>[l(v,{title:"选择日期：","title-style":"max-width: 25%",value:e.dataText,onClick:t[0]||(t[0]=a=>e.show=!0)},null,8,["value"]),l(b,{show:e.show,"onUpdate:show":t[1]||(t[1]=a=>e.show=a),"min-date":e.minDate,"default-date":e.deDate,type:"range","allow-same-day":"",onConfirm:e.onConfirm},null,8,["show","min-date","default-date","onConfirm"])]),_:1})]),_:1},8,["onSubmit"]),U((T(),A(S,{ref:"tableRef",data:e.tableData,id:"data-area",style:P(e.tableHeight),"element-loading-text":"数据加载中...","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:e.selectRow},{default:g(()=>[l(u,{fixed:"",prop:"chehao",label:"车号",width:"110px"},{default:g(a=>[n("span",fe,K(a.row.chehao),1)]),_:1}),l(u,{prop:"danjuhao",label:"单据号",width:"130px"}),l(u,{prop:"chengfang",label:"秤房"}),l(u,{prop:"pizhong",label:"皮重",formatter:e.formatter},null,8,["formatter"])]),_:1},8,["data","style","onRowClick"])),[[k,e.loading]]),n("div",null,[l(d,{inset:""},{default:g(()=>[l(y,{class:"chehao",modelValue:e.chehao,"onUpdate:modelValue":t[2]||(t[2]=a=>e.chehao=a),label:"车牌号",placeholder:""},null,8,["modelValue"])]),_:1}),n("div",he,[n("div",{onClick:t[3]||(t[3]=(...a)=>e.onQuery&&e.onQuery(...a))},ve),n("div",{onClick:t[4]||(t[4]=(...a)=>e.confirmSelect&&e.confirmSelect(...a))},De),n("div",{onClick:t[5]||(t[5]=(...a)=>e.handleConfirmSelect&&e.handleConfirmSelect(...a))},ye)])])])])}const Ke=B(pe,[["render",ke],["__scopeId","data-v-b39b51e2"]]);export{Ke as default};
