System.register(["./el-tag-legacy-3631ff16.js","./el-overlay-legacy-a58ed750.js","./index-legacy-e566b6ee.js","./index-legacy-5039dca1.js","./el-select-legacy-8a405756.js","./el-popper-legacy-d4c995b5.js","./el-table-column-legacy-726e71eb.js","./index-legacy-eda59a38.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-ad438e42.js","./btn_shoudong-legacy-5e849329.js","./btn_tichu-legacy-29a262ad.js","./function-call-legacy-ba3e0141.js","./index-legacy-c47127f6.js","./use-global-config-legacy-23cb7ed7.js","./objects-legacy-c7a21acd.js"],(function(e,a){"use strict";var t,l,n,i,o,s,c,d,r,u,h,g,p,b,m,v,f,y,w,C,F,k,x,j,_,T,B,D,E,L,S,R,U,I,N,V,z,A,H,M,O,q,P,X,W,G;return{setters:[null,e=>{t=e.E},e=>{l=e._,n=e.u,i=e.E,o=e.r,s=e.a,c=e.H,d=e.I,r=e.t,u=e.o,h=e.b,g=e.c,p=e.d,b=e.w,m=e.i,v=e.e,f=e.j,y=e.F,w=e.J,C=e.P,F=e.Q,k=e.N,x=e.W,j=e.O,_=e.p,T=e.h,B=e.X,D=e.a2,E=e.a3,L=e.Z,S=e.a1,R=e.S,U=e.a4},null,e=>{I=e.E,N=e.a},null,e=>{V=e.E,z=e.a},null,e=>{A=e.B},e=>{H=e.c,M=e.b,O=e.s},e=>{q=e._,P=e.a},e=>{X=e._},e=>{W=e.a,G=e.s},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-ce82b979]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-ce82b979]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-ce82b979]{background-color:#3c5d85;color:#fff}.container[data-v-ce82b979]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-ce82b979]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-ce82b979]{border-radius:25px;font-size:20px;width:28%;min-height:45px}.btn-area img[data-v-ce82b979]{width:45px}.btn-area>div[data-v-ce82b979]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-ce82b979]:nth-child(1){background-color:var(--btn-color1);margin-left:10px}.btn-area>div[data-v-ce82b979]:nth-child(3){background-color:var(--btn-color1);margin-right:10px}[data-v-ce82b979] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-ce82b979] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const Q={setup(){const e=n();i();const a=o([]),t=s(),l=o(""),h=o(""),g=o("0"),p=o(""),b=o("0"),m=o("0"),v=o("0"),f=o(!1),y=o(""),k=o(""),x=o(""),j=o(""),_=c({barCodeSelectList:[]});d.await("scanner",(t=>{if("/pickWith"==e.currentRoute.value.path)if("null"!=t){let e=t;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,H(t).then((t=>{if(t.data.data)return D(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};E(r(a.value),t)}));W({title:"提示",width:"600",message:t.data.message}).then((()=>{}))}))}else W({title:"提示",width:"600",message:"对不起，此条码不符合规范"}).then((()=>{}))}else W({title:"提示",width:"600",message:"数据获取失败"}).then((()=>{}))}));let T="";u((()=>{let e=r(t.state.chukudanListInfo);r(t.state.carInfo.pizhong)&&(b.value=r(t.state.carInfo.pizhong).toFixed(4)),h.value=new A(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),a.value=r(t.state.scandList);let l=r(t.state.scandCalculateData);0==Object.getOwnPropertyNames(l).length?(p.value=new A(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),v.value=new A(b.value).plus(g.value).toFixed(4)):(g.value=l.yij1,p.value=l.ques,v.value=l.pz,m.value=l.yij2)}));const B=(e,n)=>{"add"==y.value?g.value=new A(g.value).plus(new A(n.weight).dividedBy(1e3).toNumber()).toFixed(4):g.value=new A(g.value).minus(new A(n.weight).dividedBy(1e3).toNumber()).toFixed(4),p.value=new A(h.value).minus(g.value).toFixed(4),v.value=new A(b.value).plus(g.value).toFixed(4),m.value=e.length,a.value=e,l.value=Math.random();let i={};i.yij1=g.value,i.ques=p.value,i.pz=v.value,i.yij2=m.value,t.commit("setScandCalculateData",i),t.commit("setScandList",a.value),p.value<0&&W({title:"提示",width:"600",message:"缺少数值已为负数"}).then((()=>{}))},D=e=>{let a=e.split("");const t=a.slice(0,3).join(""),l=a.slice(3,5).join(""),n=a.slice(5,7).join(""),i=a.slice(7,13).join(""),o=a.slice(13,17).join(""),s=a.slice(17,20).join(""),c=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,d)=>{a({barcode:e,qiyedaima:t,chanpinleibie:l,chanpindengji:n,shengchanriqi:i,chanpinpihao:o,kunxuhao:s,kunjingzhong:c})}))},E=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))W({title:"提示",width:"600",message:"该批次已经选择，请勿重复选择"}).then((()=>{}));else{let t=[];e.unshift(a),t=e,y.value="add",B(t,a)}};return{typeName:y,barCodeSelect:k,F_BATCHGROUP:x,F_BATCHNUMBER:j,listData:_,itemKey:l,yingj:h,yij1:g,ques:p,pizhong:b,yij2:m,pz:v,tableData:a,centerDialogVisibleTXM:f,passedTXMClick:()=>{if(""==k.value)return W({title:"提示",width:"600",message:"请选择条形码"}).then((()=>{})),!1;f.value=!1;let e=k.value;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,H(t).then((t=>{if(t.data.data)return D(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};E(r(a.value),t)}));W({title:"提示",width:"600",message:t.data.message}).then((()=>{}))}))}else W({title:"提示",width:"600",message:"对不起，此条码不符合规范"}).then((()=>{}))},onSubmit:e=>{k.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;M({strBatchno:a}).then((e=>{_.barCodeSelectList=e.data.data,_.barCodeSelectList.length>0?w({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):W({title:"提示",width:"600",message:"没有查询到对应的条码数据"}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{f.value=!1},checkIfExist:E,decode:D,scanCode:()=>{d.scan()},onClickLeft:()=>{e.push({path:"/pickWithQueryInfoData"})},onHandle:()=>{f.value=!0},onConfirm:()=>{if(0==a.value.length)return W({title:"提示",width:"600",message:"没有要处理的数据"}).then((()=>{})),!1;G({title:"提示",width:"600",message:"是否已完成扫描？"}).then((()=>{C({duration:0,forbidClick:!0,className:"particulars-detail-popup",message:"拣配中..."});let l=r(t.state.chukudanListInfo),n=r(t.state.carInfo),i={};i.F_DELIVERYNO=l.F_DELIVERYNO,i.strSuttle=g.value,i.strTruckNo=n.chehao,i.weighthousename=n.chengfang,i.id=n.danjuhao,n.DataId?i.strDataId=n.DataId:i.strDataId="";let o=r(a.value).map((e=>e.barcode+",")).join("");i.strBarcodes=o.substring(0,o.length-1),O(i).then((l=>{F(),"200"==l.data.code?(a.value=[],W({title:"提示",width:"600",message:l.data.message}).then((()=>{t.commit("setPickWithScroll",0),t.commit("setChukudanListInfo",{}),t.commit("setCarInfo",{}),t.commit("setScandList",[]),t.commit("setScandCalculateData",{}),e.push({path:"/pickWithQueryListData"})}))):W({title:"提示",width:"600",message:l.data.message}).then((()=>{}))}))})).catch((e=>{console.log(e),F()}))},selectRow:(e,a,t)=>{T=r(e)},onDelete:()=>{T?G({title:"提示",width:"600",message:"是否要剔除当前所选数据？"}).then((()=>{let e=a.value.filter((e=>e.barcode!=T.barcode));a.value=e,y.value="edit",B(e,T),T=""})).catch((e=>{console.log(e)})):W({title:"提示",width:"600",message:"请选择要剔除的的数据"}).then((()=>{}))}}}},K=e=>(_("data-v-ce82b979"),e=e(),T(),e),Y={class:"container"},$={class:"info-container"},J=K((()=>m("span",{class:"title"},"应拣",-1))),Z=K((()=>m("span",{class:"title"},"已拣",-1))),ee=K((()=>m("span",{class:"title"},"缺少",-1))),ae=K((()=>m("span",{class:"title"},"皮重",-1))),te=K((()=>m("span",{class:"title"},"捆数",-1))),le=K((()=>m("span",{class:"title"},"合计",-1))),ne={class:"btn-area"},ie=[K((()=>m("img",{src:q},null,-1))),K((()=>m("div",null,"确认",-1)))],oe=[K((()=>m("img",{src:P},null,-1))),K((()=>m("div",null,"手动",-1)))],se=[K((()=>m("img",{src:X},null,-1))),K((()=>m("div",null,"剔除",-1)))],ce={style:{margin:"16px"}},de={style:{"margin-top":"10px"}},re=K((()=>m("p",null,"条形码",-1)));e("default",l(Q,[["render",function(e,a,l,n,i,o){const s=B,c=k,d=z,r=V,u=D,w=E,C=L,F=I,_=N,T=S,A=R,H=U,M=t;return h(),g(y,null,[p(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:b((()=>[p(s,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),m("div",Y,[(h(),v(r,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:b((()=>[p(d,{fixed:"",prop:"date",label:"日期"}),p(d,{prop:"number",label:"包号"}),p(d,{prop:"weight",label:"重量"}),p(d,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),m("div",$,[J,Z,ee,m("span",null,f(n.yingj),1),m("span",null,f(n.yij1),1),m("span",null,f(n.ques),1),ae,te,le,m("span",null,f(n.pizhong),1),m("span",null,f(n.yij2),1),m("span",null,f(n.pz),1)]),m("div",ne,[m("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},ie),m("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},oe),m("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},se)])]),p(M,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:b((()=>[p(H,{onSubmit:n.onSubmit},{default:b((()=>[p(w,{inset:""},{default:b((()=>[p(u,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),p(u,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),m("div",ce,[p(C,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:b((()=>[x(" 查询 ")])),_:1}),m("div",de,[re,p(_,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:b((()=>[(h(!0),g(y,null,j(n.listData.barCodeSelectList,(e=>(h(),v(F,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),p(A,{style:{"margin-top":"15px"}},{default:b((()=>[p(T,{span:"2"}),p(T,{span:"10"},{default:b((()=>[p(C,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:b((()=>[x("确定 ")])),_:1},8,["onClick"])])),_:1}),p(T,{span:"10",style:{"text-align":"center"}},{default:b((()=>[p(C,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:b((()=>[x("退出 ")])),_:1},8,["onClick"])])),_:1}),p(T,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-ce82b979"]]))}}}));
