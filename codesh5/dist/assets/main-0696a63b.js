import"./el-tag-0dd03ffc.js";import{E as q}from"./el-overlay-5da5aa34.js";import{a5 as z,a6 as P,_ as X,u as Z,r as _,J as G,b as d,c as b,j as t,d as r,w as m,F as Y,s as O,N as K,a7 as W,a8 as $,O as R,e as k,k as e,U as y,g as v,a9 as tt,aa as at,Y as ot,Z as et,a0 as lt,S as nt,$ as st,X as it,R as rt,p as dt,i as ct}from"./index-8b63aa92.js";/* empty css              */import{E as ut}from"./el-card-3523e71e.js";/* empty css              *//* empty css              */import{a as mt,E as yt}from"./el-select-3852e214.js";import"./el-popper-95a192dd.js";/* empty css              */import{f as ft}from"./gradeDetermination-eb58a5b1.js";import{a as pt}from"./function-call-21129ae9.js";import"./index-8dcd196a.js";import"./use-global-config-2bc38bcb.js";import"./objects-1c412bdf.js";function _t(h){return z({url:`${P.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:h})}function ht(h){return z({url:`${P.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:h})}const gt={setup(){const h=Z(),l=_(""),F=_(!1),a=_(""),B=_(""),Q=_(!1),s=G({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[]}),x=_(!1),H=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=_(!1),I=_(!1),g=_("0"),L=_(10),w=_(0),N=()=>{h.push({path:"/home"})},M=i=>{w.value=1,s.auditorListData=[],I.value=!1,J({batchnumber:i,status:g.value})},U=i=>{w.value=1,s.auditorListData=[],I.value=!1,J({batchnumber:i,status:g.value})},j=()=>{w.value=w.value+1,J({batchnumber:l.value,status:g.value})},V=i=>{s.yjtJyInformationDetails=i,x.value=!0,s.yjtJyInformationDetails.exterior!="0"&&T(s.yjtJyInformationDetails.yjtJyInformationDetailsId)},E=()=>{F.value=!0};function J(i){let f={},c={},u={};u.limit=L.value,u.offset=w.value,u.blockId="paramBlock",u.data=i,c.paramBlock=u,f.blocks=c,_t(f).then(p=>{s.auditorListData=[...s.auditorListData,...p.data.blocks.resultBlock.data],S.value=!1,s.auditorListData.length==p.data.blocks.resultBlock.total&&(I.value=!0);let D=document.body.scrollHeight-180;B.value="height:"+D+"px"}).catch(p=>{console.log(p)})}const o=(i,f)=>{let c,u=new Date(f);const p={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let D in p)c=new RegExp("("+D+")").exec(i),c&&(i=i.replace(c[1],c[1].length==1?p[D]:p[D].padStart(c[1].length,"0")));return i},A=i=>{if(a.value=="")return O({message:"请填写审核内容",type:"fail",className:"particulars-detail-popup"}),!1;let f={},c={},u={},p={};f.id=s.yjtJyInformationDetails.id,f.yjtJyInformationId=s.yjtJyInformationDetails.yjtJyInformationId,f.yjtJyInformationDetailsId=s.yjtJyInformationDetails.yjtJyInformationDetailsId,f.auditorContent=a.value,f.status=i,p.data=f,u.paramBlock=p,c.blocks=u;let D="";i=="1"?D="驳回":D="通过",pt({title:"提示",width:"600",message:"是否"+D+"这条数据？"}).then(()=>{ht(c).then(C=>{C.data.status=="0"&&(O({message:C.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),s.auditorListData=[],x.value=!1,J({batchnumber:l.value,status:g.value}))}).catch(C=>{console.log(C)})}).catch(C=>{console.log(C)})};function T(i){let f={};f.yjtJyInformationDetailsId=i,ft(f).then(c=>{s.yjtJyInformationFileList=c.data.data}).catch(c=>{console.log(c)})}return{elDialogHeight:B,state:Q,listData:s,showImage:F,auditorContent:a,centerDialogVisible:x,searchValue:l,loading:S,finished:I,limit:L,offset:w,status:g,options:H,listData:s,onClickLeft:N,onLoad:j,statusChange:M,dateFormat:o,onSearch:U,auditingDetails:V,seeImg:E,cathodeCopperAuditorClick:A}}},n=h=>(dt("data-v-1d8c30d6"),h=h(),ct(),h),Dt={class:"header"},bt={style:{display:"flex","background-color":"#ffffff"}},vt={class:"content"},It={style:{padding:"0px 5px 5px 5px"}},wt=n(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),kt=n(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),jt=n(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Jt=n(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Ct={key:0,style:{"font-weight":"bold"}},xt={style:{color:"#bbbbbb"}},St={style:{float:"right",color:"#bbbbbb"}},Lt=n(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Vt=n(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Yt=n(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ft=n(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Bt=n(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Ht=n(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Nt=n(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Mt={key:0,style:{"font-weight":"bold"}},Ut=n(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Et=n(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),At=n(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Rt={key:0},Qt={key:2},Tt=n(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),Ot=n(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),zt=n(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),Pt=n(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),qt={key:0,style:{"margin-top":"30px"}};function Xt(h,l,F,a,B,Q){const s=K,x=W,H=yt,S=mt,I=at,g=ot,L=ut,w=$,N=et,M=lt,U=nt,j=st,V=it,E=rt,J=q;return d(),b(Y,null,[t("div",Dt,[r(s,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",bt,[r(x,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":l[0]||(l[0]=o=>a.searchValue=o),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),r(S,{modelValue:a.status,"onUpdate:modelValue":l[1]||(l[1]=o=>a.status=o),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:m(()=>[(d(!0),b(Y,null,R(a.options,o=>(d(),k(H,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",vt,[r(w,{loading:a.loading,"onUpdate:loading":l[2]||(l[2]=o=>a.loading=o),finished:a.finished,offset:"50","finished-text":"没有更多了",onLoad:a.onLoad},{default:m(()=>[t("div",It,[(d(!0),b(Y,null,R(a.listData.auditorListData,(o,A)=>(d(),k(L,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:T=>a.auditingDetails(o)},{default:m(()=>[t("div",null,[t("p",null,[wt,t("span",null,e(o.batchnumber),1)]),t("p",null,[kt,t("span",null,e(parseFloat(o.suttle))+e(o.unit),1)]),t("p",null,[jt,t("span",null,e(o.standard),1)]),t("p",null,[Jt,t("span",null,e(o.exteriorName),1),y("     "),o.exterior!="0"?(d(),b("span",Ct,"类型：")):v("",!0),t("span",null,e(o.dictName),1)]),t("p",null,[o.status=="0"?(d(),k(I,{key:0,type:"primary"},{default:m(()=>[y("未审核")]),_:1})):v("",!0),o.status=="1"?(d(),k(I,{key:1,type:"danger"},{default:m(()=>[y("驳回")]),_:1})):v("",!0),o.status=="2"?(d(),k(I,{key:2,type:"success"},{default:m(()=>[y("审核通过")]),_:1})):v("",!0)]),r(g,{style:{color:"#c8c8c8"}}),t("span",xt,e(a.dateFormat("YYYY-mm-dd HH:MM:SS",o.checkoutDate)),1),t("span",St,e(o.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),r(J,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":l[7]||(l[7]=o=>a.centerDialogVisible=o),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:m(()=>[t("div",{style:tt([{"overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[r(g,{"content-position":"left"},{default:m(()=>[y("基本信息")]),_:1}),t("div",null,[t("p",null,[Lt,t("span",null,e(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Vt,t("span",null,e(parseFloat(a.listData.yjtJyInformationDetails.suttle))+e(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Yt,t("span",null,e(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Ft,t("span",null,e(a.listData.yjtJyInformationDetails.suttleperson),1),y("     "),Bt,t("span",null,e(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[Ht,y(e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),r(g,{"content-position":"left"},{default:m(()=>[y("质检信息")]),_:1}),t("div",null,[t("p",null,[Nt,t("span",null,e(a.listData.yjtJyInformationDetails.exteriorName),1),y("     "),a.listData.yjtJyInformationDetails.exterior!="0"?(d(),b("span",Mt,"类型：")):v("",!0),t("span",null,e(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Ut,y(e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Et,t("span",null,e(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[At,t("span",null,e(a.listData.yjtJyInformationDetails.alterReason),1)])]),a.listData.yjtJyInformationDetails.exterior!="0"?(d(),b("div",Rt,[(d(!0),b(Y,null,R(a.listData.yjtJyInformationFileList,(o,A)=>(d(),k(N,{style:{margin:"0 2%"},onClick:a.seeImg,width:"45%",height:"8rem",fit:"cover",position:"left",src:o},null,8,["onClick","src"]))),256))])):v("",!0),a.listData.yjtJyInformationDetails.status=="0"?(d(),k(M,{key:1,modelValue:a.auditorContent,"onUpdate:modelValue":l[3]||(l[3]=o=>a.auditorContent=o),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):v("",!0),a.listData.yjtJyInformationDetails.status!="0"?(d(),b("div",Qt,[r(g,{"content-position":"left"},{default:m(()=>[y("审核信息")]),_:1}),t("p",null,[Tt,t("span",null,e(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),y("     "),Ot,t("span",null,e(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[zt,y(e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[Pt,t("span",null,e(a.listData.yjtJyInformationDetails.auditorContent),1)])])):v("",!0)]),r(U,{show:a.showImage,"onUpdate:show":l[4]||(l[4]=o=>a.showImage=o),images:a.listData.yjtJyInformationFileList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(d(),b("div",qt,[r(E,null,{default:m(()=>[r(j,{span:"2"}),r(j,{span:"10"},{default:m(()=>[r(V,{icon:"close",type:"danger",style:{width:"90%"},onClick:l[5]||(l[5]=o=>a.cathodeCopperAuditorClick("1"))},{default:m(()=>[y("驳回 ")]),_:1})]),_:1}),r(j,{span:"10"},{default:m(()=>[r(V,{icon:"passed",type:"success",style:{width:"90%"},onClick:l[6]||(l[6]=o=>a.cathodeCopperAuditorClick("2"))},{default:m(()=>[y("通过 ")]),_:1})]),_:1}),r(j,{span:"2"})]),_:1})])):v("",!0)],4)]),_:1},8,["modelValue"])],64)}const ca=X(gt,[["render",Xt],["__scopeId","data-v-1d8c30d6"]]);export{ca as default};
