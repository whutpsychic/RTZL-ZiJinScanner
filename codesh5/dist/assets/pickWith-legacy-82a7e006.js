System.register(["./el-tag-legacy-9c5e3cae.js","./el-overlay-legacy-5eda7516.js","./index-legacy-89a34e7c.js","./index-legacy-eb9065b9.js","./el-select-legacy-582e2892.js","./el-popper-legacy-70ffd702.js","./index-legacy-36e03f5c.js","./index-legacy-f3c1d55a.js","./index-legacy-a8b76193.js","./el-table-column-legacy-257ab153.js","./index-legacy-043578f0.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-c5aa0884.js","./btn_shoudong-legacy-5e849329.js","./btn_tichu-legacy-29a262ad.js","./function-call-legacy-5e820113.js","./index-legacy-11bfa915.js","./index-legacy-9a7624ac.js","./index-legacy-16ab7d77.js","./use-global-config-legacy-7d6044fa.js","./objects-legacy-05777e60.js","./index-legacy-10513804.js","./use-id-legacy-a10b8f4a.js","./mount-component-legacy-2eb7189b.js","./request-legacy-e169870c.js"],(function(e,a){"use strict";var t,l,n,s,i,o,c,d,r,u,p,h,g,m,f,b,v,y,x,w,k,F,C,j,_,z,H,T,B,E,D,R,L,S,U,I,N,V,A,q,M,O,P,G,X;return{setters:[null,e=>{t=e.E},e=>{l=e._,n=e.k,s=e.p,i=e.l,o=e.Z,c=e.s,d=e.o,r=e.q,u=e.x,p=e.y,h=e.a,g=e.z,m=e.F,f=e.A,b=e.G,v=e.N,y=e.H,x=e.a1,w=e.D,k=e.E,F=e.I,C=e.a2},e=>{j=e.C,_=e.R},e=>{z=e.E,H=e.a},null,e=>{T=e.C},null,e=>{B=e.F},e=>{E=e.E,D=e.a},e=>{R=e.N},e=>{L=e.B},e=>{S=e.c,U=e.b,I=e.s},e=>{N=e._,V=e.a},e=>{A=e._},e=>{q=e.s,M=e.a},e=>{O=e.s,P=e.a,G=e.c},e=>{X=e.F},null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-ccfd707e]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-ccfd707e]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-ccfd707e]{background-color:#3c5d85;color:#fff}.container[data-v-ccfd707e]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-ccfd707e]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-ccfd707e]{border-radius:25px;font-size:20px;width:28%;min-height:45px}.btn-area img[data-v-ccfd707e]{width:45px}.btn-area>div[data-v-ccfd707e]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-ccfd707e]:nth-child(1){background-color:var(--btn-color1);margin-left:10px}.btn-area>div[data-v-ccfd707e]:nth-child(3){background-color:var(--btn-color1);margin-right:10px}[data-v-ccfd707e] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-ccfd707e] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const W={setup(){const e=n(),a=s([]),t=i(),l=s(""),u=s(""),p=s("0"),h=s(""),g=s("0"),m=s("0"),f=s("0"),b=s(!1),v=s(""),y=s(""),x=s(""),w=s(""),k=o({barCodeSelectList:[]});c.await("scanner",(t=>{if("/pickWith"==e.currentRoute.value.path)if("null"!=t){let e=t;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,S(t).then((t=>{if(t.data.data)return j(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};_(d(a.value),t)}));{let l="",n=!0;"1"==t.data.distinguish?l='<span style="font-size: 18px;color: red">'+t.data.message+"</span>":"2"==t.data.distinguish?l='<span style="font-size: 18px;color: #0e80d2">'+t.data.message+"</span>":"4"==t.data.distinguish?(n=!1,q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>j(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};_(d(a.value),t)})))).catch((e=>{console.log(e)}))):l='<span style="font-size: 18px">'+t.data.message+"</span>",n&&M({title:"提示",width:"600",allowHtml:!0,message:l}).then((()=>{}))}}))}else M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))}else M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">数据获取失败</span>'}).then((()=>{}))}));let F="";r((()=>{c.register("goback",(()=>{e.push({path:"/pickWithQueryInfoData"})}));let a=d(t.state.chukudanListInfo);d(t.state.carInfo.pizhong)&&(g.value=d(t.state.carInfo.pizhong).toFixed(4)),u.value=new L(a.F_PLANSUTTLE).minus(a.F_SUTTLE).toFixed(4),h.value=new L(a.F_PLANSUTTLE).minus(a.F_SUTTLE).toFixed(4),f.value=new L(g.value).plus(p.value).toFixed(4)}));const C=(e,t)=>{"add"==v.value?p.value=new L(p.value).plus(new L(t.weight).dividedBy(1e3).toNumber()).toFixed(4):p.value=new L(p.value).minus(new L(t.weight).dividedBy(1e3).toNumber()).toFixed(4),h.value=new L(u.value).minus(p.value).toFixed(4),f.value=new L(g.value).plus(p.value).toFixed(4),m.value=e.length,a.value=e,l.value=Math.random(),h.value<0&&M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">缺少数值已为负数</span>'}).then((()=>{}))},j=e=>{let a=e.split("");const t=a.slice(0,3).join(""),l=a.slice(3,5).join(""),n=a.slice(5,7).join(""),s=a.slice(7,13).join(""),i=a.slice(13,17).join(""),o=a.slice(17,20).join(""),c=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,d)=>{a({barcode:e,qiyedaima:t,chanpinleibie:l,chanpindengji:n,shengchanriqi:s,chanpinpihao:i,kunxuhao:o,kunjingzhong:c})}))},_=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">该批次已经选择，请勿重复选择</span>'}).then((()=>{}));else{let t=[];e.unshift(a),t=e,v.value="add",C(t,a)}};return{typeName:v,barCodeSelect:y,F_BATCHGROUP:x,F_BATCHNUMBER:w,listData:k,itemKey:l,yingj:u,yij1:p,ques:h,pizhong:g,yij2:m,pz:f,tableData:a,centerDialogVisibleTXM:b,passedTXMClick:()=>{if(""==y.value)return M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择条形码</span>'}).then((()=>{})),!1;b.value=!1;let e=y.value;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,S(t).then((t=>{if(t.data.data)return j(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};_(d(a.value),t)}));{let l="",n=!0;"1"==t.data.distinguish?l='<span style="font-size: 18px;color: red">'+t.data.message+"</span>":"2"==t.data.distinguish?l='<span style="font-size: 18px;color: #0e80d2">'+t.data.message+"</span>":"4"==t.data.distinguish?(n=!1,q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>j(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};_(d(a.value),t)})))).catch((e=>{console.log(e)}))):l='<span style="font-size: 18px">'+t.data.message+"</span>",n&&M({title:"提示",width:"600",allowHtml:!0,message:l}).then((()=>{}))}}))}else M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))},onSubmit:e=>{y.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;U({strBatchno:a}).then((e=>{k.barCodeSelectList=e.data.data,k.barCodeSelectList.length>0?O({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有查询到对应的条码数据</span>'}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{b.value=!1},checkIfExist:_,decode:j,scanCode:()=>{c.scan()},onClickLeft:()=>{e.push({path:"/pickWithQueryInfoData"})},onHandle:()=>{b.value=!0},onConfirm:()=>{if(0==a.value.length)return M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有要处理的数据</span>'}).then((()=>{})),!1;q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否已完成扫描？</span>'}).then((()=>{P({duration:0,forbidClick:!0,overlay:!0,className:"particulars-detail-popup",message:"拣配中..."});let l=d(t.state.chukudanListInfo),n=d(t.state.carInfo),s={};s.F_DELIVERYNO=l.F_DELIVERYNO,s.strSuttle=p.value,s.strTruckNo=n.chehao,s.weighthousename=n.chengfang,s.id=n.danjuhao,n.DataId?s.strDataId=n.DataId:s.strDataId="";let i=d(a.value).map((e=>e.barcode+",")).join("");s.strBarcodes=i.substring(0,i.length-1),I(s).then((l=>{G(),"200"==l.data.code?(a.value=[],M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+l.data.message+"</span>"}).then((()=>{t.commit("setPickWithScroll",0),t.commit("setChukudanListInfo",{}),t.commit("setCarInfo",{}),e.push({path:"/pickWithQueryListData"})}))):M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+l.data.message+"</span>"}).then((()=>{}))}))})).catch((e=>{console.log(e),G()}))},selectRow:(e,a,t)=>{F=d(e)},onDelete:()=>{F?q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否要剔除当前所选数据？</span>'}).then((()=>{let e=a.value.filter((e=>e.barcode!=F.barcode));a.value=e,v.value="edit",C(e,F),F=""})).catch((e=>{console.log(e)})):M({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择要剔除的的数据</span>'}).then((()=>{}))}}}},Q=e=>(w("data-v-ccfd707e"),e=e(),k(),e),K={class:"container"},Y={class:"info-container"},$=Q((()=>m("span",{class:"title"},"应拣",-1))),J=Q((()=>m("span",{class:"title"},"已拣",-1))),Z=Q((()=>m("span",{class:"title"},"缺少",-1))),ee=Q((()=>m("span",{class:"title"},"皮重",-1))),ae=Q((()=>m("span",{class:"title"},"捆数",-1))),te=Q((()=>m("span",{class:"title"},"合计",-1))),le={class:"btn-area"},ne=[Q((()=>m("img",{src:N},null,-1))),Q((()=>m("div",null,"确认",-1)))],se=[Q((()=>m("img",{src:V},null,-1))),Q((()=>m("div",null,"手动",-1)))],ie=[Q((()=>m("img",{src:A},null,-1))),Q((()=>m("div",null,"剔除",-1)))],oe={style:{margin:"16px"}},ce={style:{"margin-top":"10px"}},de=Q((()=>m("p",null,"条形码",-1)));e("default",l(W,[["render",function(e,a,l,n,s,i){const o=F,c=R,d=D,r=E,w=B,k=T,L=C,S=z,U=H,I=j,N=_,V=X,A=t;return u(),p("main",null,[h(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:g((()=>[h(o,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),m("div",K,[(u(),f(r,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:g((()=>[h(d,{fixed:"",prop:"date",label:"日期"}),h(d,{prop:"number",label:"包号"}),h(d,{prop:"weight",label:"重量"}),h(d,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),m("div",Y,[$,J,Z,m("span",null,b(n.yingj),1),m("span",null,b(n.yij1),1),m("span",null,b(n.ques),1),ee,ae,te,m("span",null,b(n.pizhong),1),m("span",null,b(n.yij2),1),m("span",null,b(n.pz),1)]),m("div",le,[m("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},ne),m("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},se),m("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},ie)])]),h(A,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:g((()=>[h(V,{onSubmit:n.onSubmit},{default:g((()=>[h(k,{inset:""},{default:g((()=>[h(w,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),h(w,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),m("div",oe,[h(L,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:g((()=>[v(" 查询 ")])),_:1}),m("div",ce,[de,h(U,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:g((()=>[(u(!0),p(y,null,x(n.listData.barCodeSelectList,(e=>(u(),f(S,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),h(N,{style:{"margin-top":"15px"}},{default:g((()=>[h(I,{span:"2"}),h(I,{span:"10"},{default:g((()=>[h(L,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:g((()=>[v("确定 ")])),_:1},8,["onClick"])])),_:1}),h(I,{span:"10",style:{"text-align":"center"}},{default:g((()=>[h(L,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:g((()=>[v(" 退出 ")])),_:1},8,["onClick"])])),_:1}),h(I,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-ccfd707e"]]))}}}));
