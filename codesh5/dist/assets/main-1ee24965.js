import"./el-tag-f6f00fc6.js";import{E as O}from"./el-overlay-a91cb260.js";import{a7 as T,a8 as q,_ as W,u as Z,r as I,H as G,o as K,b as o,c as p,i as t,d as h,w as c,F as Y,J as Q,N as X,a9 as $,aa as tt,O as M,e as D,j as l,W as m,f as y,ab as at,ac as et,$ as ot,a0 as lt,a2 as nt,V as st,a1 as it,Z as rt,S as dt,p as ct,h as yt}from"./index-75daa47f.js";/* empty css              */import{E as ut}from"./el-card-296a4173.js";/* empty css              */import{q as mt}from"./qualityCheckingRecord-aa9b282f.js";import{a as ft,E as ht}from"./el-select-05d8700c.js";import"./el-popper-bcdb3bc7.js";/* empty css              */import{f as pt}from"./gradeDetermination-e6f9438e.js";import{s as _t}from"./function-call-7d0db559.js";import"./index-b3cea12d.js";import"./use-global-config-4f4e05c3.js";import"./objects-8825edb2.js";function Dt(v){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:v})}function gt(v){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:v})}const bt={setup(){const v=Z(),n=I(""),B=I(!1),a=I(""),U=I(""),P=I(!1),r=G({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[],yjtJyInformationDecideData:{},filePathList:[]}),C=I(!1),z=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=I(!1),_=I(!1),g=I("0"),N=I(10),j=I(0);K(()=>{j.value=1,J({batchnumber:n.value,status:g.value})});const F=()=>{v.push({path:"/home"})},E=()=>{console.log("aaa"),j.value=j.value+1,J({batchnumber:n.value,status:g.value})},R=i=>{console.log("bbbb"),r.auditorListData=[],j.value=1,_.value=!1,J({batchnumber:i,status:g.value})},w=i=>{r.auditorListData=[],j.value=1,_.value=!1,J({batchnumber:i,status:g.value})},H=i=>{let d={yjtJyInformationId:i.yjtJyInformationId,status:"2"};V(d),r.yjtJyInformationDetails=i,r.yjtJyInformationDetails.exterior!="0"&&L(r.yjtJyInformationDetails.yjtJyInformationDetailsId)},A=i=>{r.filePathList=[],r.filePathList=i,B.value=!0},J=i=>{S.value=!0;let d={},u={},f={};f.limit=N.value,f.offset=j.value,f.blockId="paramBlock",f.data=i,u.paramBlock=f,d.blocks=u,Dt(d).then(b=>{r.auditorListData=[...r.auditorListData,...b.data.blocks.resultBlock.data],S.value=!1,r.auditorListData.length==b.data.blocks.resultBlock.total&&(_.value=!0);let k=document.body.scrollHeight-180;U.value="height:"+k+"px"}).catch(b=>{console.log(b)})},e=i=>{if(a.value=="")return Q({message:"请填写审核内容",type:"fail",className:"particulars-detail-popup"}),!1;let d={},u={},f={},b={};d.id=r.yjtJyInformationDetails.id,d.yjtJyInformationId=r.yjtJyInformationDetails.yjtJyInformationId,d.yjtJyInformationDetailsId=r.yjtJyInformationDetails.yjtJyInformationDetailsId,d.auditorContent=a.value,d.status=i,b.data=d,f.paramBlock=b,u.blocks=f;let k="";i=="1"?k="驳回":k="通过",_t({title:"提示",width:"600",message:"是否"+k+"这条数据？"}).then(()=>{gt(u).then(x=>{x.data.status=="0"&&(Q({message:x.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),r.auditorListData=[],C.value=!1,J({batchnumber:n.value,status:g.value}))}).catch(x=>{console.log(x)})}).catch(x=>{console.log(x)})},L=i=>{let d={};d.yjtJyInformationDetailsId=i,pt(d).then(u=>{r.yjtJyInformationFileList=u.data.data}).catch(u=>{console.log(u)})},V=i=>{mt(i).then(d=>{let u={},f=r.yjtJyInformationDetails.status;f=="0"||f=="1"?u=d.data.data[0]:u=d.data.data[1],r.yjtJyInformationDecideData=u,C.value=!0}).catch(d=>{console.log(d)})};return{elDialogHeight:U,state:P,listData:r,showImage:B,auditorContent:a,centerDialogVisible:C,searchValue:n,loading:S,finished:_,limit:N,offset:j,status:g,options:z,listData:r,onClickLeft:F,onLoad:E,getFileQuery:L,getAuditorDataQuery:J,statusChange:R,dateFormat:(i,d)=>{let u,f=new Date(d);const b={"Y+":f.getFullYear().toString(),"m+":(f.getMonth()+1).toString(),"d+":f.getDate().toString(),"H+":f.getHours().toString(),"M+":f.getMinutes().toString(),"S+":f.getSeconds().toString()};for(let k in b)u=new RegExp("("+k+")").exec(i),u&&(i=i.replace(u[1],u[1].length==1?b[k]:b[k].padStart(u[1].length,"0")));return i},onSearch:w,auditingDetails:H,seeImg:A,cathodeCopperAuditorClick:e,getQualityCheckingRecordDecide:V}}},s=v=>(ct("data-v-1cf71bcb"),v=v(),yt(),v),It={class:"header"},vt={style:{display:"flex","background-color":"#ffffff"}},jt={class:"content"},kt={style:{padding:"0px 5px 5px 5px"}},Jt=s(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),wt=s(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),xt=s(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ct=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),St={key:0,style:{"font-weight":"bold"}},Lt={style:{color:"#bbbbbb"}},Vt={style:{float:"right",color:"#bbbbbb"}},Yt=s(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Nt=s(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ft=s(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ht=s(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Mt=s(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Bt=s(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Ut=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),zt={key:3,style:{"font-weight":"bold"}},Et=s(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Rt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),At={key:0},Pt=s(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Qt={key:1},Tt=s(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),qt={key:2},Ot=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Wt={key:3,style:{"font-weight":"bold"}},Zt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Gt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Kt=s(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Xt={key:0},$t=s(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),ta={key:0,style:{"margin-top":"15px"}},aa=s(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),ea=s(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),oa=s(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),la=s(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),na={key:1},sa={key:0,style:{"margin-top":"30px"}};function ia(v,n,B,a,U,P){const r=X,C=$,z=ht,S=ft,_=et,g=ot,N=ut,j=tt,F=lt,E=nt,R=st,w=it,H=rt,A=dt,J=O;return o(),p(Y,null,[t("div",It,[h(r,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",vt,[h(C,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":n[0]||(n[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),h(S,{modelValue:a.status,"onUpdate:modelValue":n[1]||(n[1]=e=>a.status=e),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:c(()=>[(o(!0),p(Y,null,M(a.options,e=>(o(),D(z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",jt,[h(j,{loading:a.loading,"onUpdate:loading":n[2]||(n[2]=e=>a.loading=e),"immediate-check":!1,finished:a.finished,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",kt,[(o(!0),p(Y,null,M(a.listData.auditorListData,(e,L)=>(o(),D(N,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:V=>a.auditingDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[Jt,t("span",null,l(e.batchnumber),1)]),t("p",null,[wt,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1)]),t("p",null,[xt,t("span",null,l(e.standard),1)]),t("p",null,[Ct,t("span",null,l(e.exteriorName),1),m("    "),e.exterior!="0"?(o(),p("span",St,"类型：")):y("",!0),t("span",null,l(e.dictName),1)]),t("p",null,[e.status=="0"?(o(),D(_,{key:0,type:"primary",size:"large"},{default:c(()=>[m("未审核")]),_:1})):y("",!0),e.status=="1"?(o(),D(_,{key:1,type:"danger",size:"large"},{default:c(()=>[m("驳回")]),_:1})):y("",!0),e.status=="2"?(o(),D(_,{key:2,type:"success",size:"large"},{default:c(()=>[m("审核通过")]),_:1})):y("",!0)]),h(g,{style:{color:"#c8c8c8"}}),t("span",Lt,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.checkoutDate)),1),t("span",Vt,l(e.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),h(J,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":n[9]||(n[9]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:c(()=>[t("div",{style:at([{"overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[t("div",null,[h(g,{"content-position":"left"},{default:c(()=>[m("基本信息")]),_:1}),t("p",null,[Yt,t("span",null,l(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Nt,t("span",null,l(parseFloat(a.listData.yjtJyInformationDetails.suttle))+l(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Ft,t("span",null,l(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Ht,t("span",null,l(a.listData.yjtJyInformationDetails.suttleperson),1),m("     "),Mt,t("span",null,l(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[Bt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),t("div",null,[h(g,{"content-position":"left"},{default:c(()=>[m("历史质检信息")]),_:1}),t("div",null,[t("p",null,[Ut,a.listData.yjtJyInformationDecideData.details.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("      "),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),p("span",zt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDecideData.details.dictName),1)]),t("p",null,[Et,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDecideData.details.checkoutDate)),1)]),t("p",null,[Rt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.checkoutUser),1)]),a.listData.yjtJyInformationDecideData.details.alterReason?(o(),p("p",At,[Pt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.alterReason),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.remarks?(o(),p("p",Qt,[Tt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.remarks),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),p("div",qt,[(o(!0),p(Y,null,M(a.listData.yjtJyInformationDecideData.fileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[3]||(n[3]=V=>a.seeImg(a.listData.yjtJyInformationDecideData.fileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0)])]),t("div",null,[h(g,{"content-position":"left"},{default:c(()=>[m("审核的质检信息")]),_:1}),t("p",null,[Ot,a.listData.yjtJyInformationDetails.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("    "),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),p("span",Wt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Zt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Gt,t("span",null,l(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[Kt,t("span",null,l(a.listData.yjtJyInformationDetails.alterReason),1)]),a.listData.yjtJyInformationDetails.remarks?(o(),p("p",Xt,[$t,t("span",null,l(a.listData.yjtJyInformationDetails.remarks),1)])):y("",!0)]),a.listData.yjtJyInformationDetails.status!="0"?(o(),p("div",ta,[t("p",null,[aa,t("span",null,l(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),m("     "),ea,t("span",null,l(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[oa,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[la,t("span",null,l(a.listData.yjtJyInformationDetails.auditorContent),1)])])):y("",!0),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),p("div",na,[(o(!0),p(Y,null,M(a.listData.yjtJyInformationFileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[4]||(n[4]=V=>a.seeImg(a.listData.yjtJyInformationFileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0),a.listData.yjtJyInformationDetails.status=="0"?(o(),D(E,{key:2,modelValue:a.auditorContent,"onUpdate:modelValue":n[5]||(n[5]=e=>a.auditorContent=e),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):y("",!0)]),h(R,{show:a.showImage,"onUpdate:show":n[6]||(n[6]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(o(),p("div",sa,[h(A,null,{default:c(()=>[h(w,{span:"2"}),h(w,{span:"10"},{default:c(()=>[h(H,{icon:"close",type:"danger",style:{width:"90%"},onClick:n[7]||(n[7]=e=>a.cathodeCopperAuditorClick("1"))},{default:c(()=>[m("驳回 ")]),_:1})]),_:1}),h(w,{span:"10"},{default:c(()=>[h(H,{icon:"passed",type:"success",style:{width:"90%"},onClick:n[8]||(n[8]=e=>a.cathodeCopperAuditorClick("2"))},{default:c(()=>[m("通过 ")]),_:1})]),_:1}),h(w,{span:"2"})]),_:1})])):y("",!0)],4)]),_:1},8,["modelValue"])],64)}const ka=W(bt,[["render",ia],["__scopeId","data-v-1cf71bcb"]]);export{ka as default};
