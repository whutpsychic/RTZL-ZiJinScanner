import{u as z,p as W,b as M,P as j,c as V,m as Y,d as q}from"./mount-component-21eea6f5.js";import{c as T,d as p,p as E,i as I,t as x,a as o,w as N,e as h,r as G,u as J,f as O,a2 as S,n as Q,a4 as X,a8 as Z,W as ee,h as R,a5 as te,b as ne,aL as oe,ba as D,bb as ae,bc as le,B as se,ah as ce}from"./index-ce976914.js";import{u as re}from"./index-8f5a4469.js";const[F,_]=T("action-bar"),H=Symbol(F),ie={placeholder:Boolean,safeAreaInsetBottom:x};var ue=p({name:F,props:ie,setup(e,{slots:a}){const n=E(),s=re(n,_),{linkChildren:c}=I.useChildren(H);c();const f=()=>{var m;return o("div",{ref:n,class:[_(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=a.default)==null?void 0:m.call(a)])};return()=>e.placeholder?s(f):f()}});const de=N(ue),[fe,me]=T("action-bar-button"),Be=h({},G,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ge=p({name:fe,props:Be,setup(e,{slots:a}){const n=J(),{parent:s,index:c}=I.useParent(H),f=O(()=>{if(s){const r=s.children[c.value-1];return!(r&&"isButton"in r)}}),m=O(()=>{if(s){const r=s.children[c.value+1];return!(r&&"isButton"in r)}});return z({isButton:!0}),()=>{const{type:r,icon:B,text:g,color:w,loading:v,disabled:y}=e;return o(S,{class:me([r,{last:m.value,first:f.value}]),size:"large",type:r,icon:B,color:w,loading:v,disabled:y,onClick:n},{default:()=>[a.default?a.default():g]})}}});const A=N(ge),[he,i,C]=T("dialog"),be=h({},W,{title:String,theme:String,width:Q,message:[String,Function],callback:Function,allowHtml:Boolean,className:X,transition:Z("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),Ce=[...M,"transition","closeOnPopstate"];var we=p({name:he,props:be,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:a,slots:n}){const s=E(),c=ee({confirm:!1,cancel:!1}),f=t=>a("update:show",t),m=t=>{var l;f(!1),(l=e.callback)==null||l.call(e,t)},r=t=>()=>{e.show&&(a(t),e.beforeClose?(c[t]=!0,V(e.beforeClose,{args:[t],done(){m(t),c[t]=!1},canceled(){c[t]=!1}})):m(t))},B=r("cancel"),g=r("confirm"),w=oe(t=>{var l,u;if(t.target!==((u=(l=s.value)==null?void 0:l.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?g:D,Escape:e.showCancelButton?B:D})[t.key](),a("keydown",t)},["enter","esc"]),v=()=>{const t=n.title?n.title():e.title;if(t)return o("div",{class:i("header",{isolated:!e.message&&!n.default})},[t])},y=t=>{const{message:l,allowHtml:u,messageAlign:d}=e,b=i("message",{"has-title":t,[d]:d}),P=ae(l)?l():l;return u&&typeof P=="string"?o("div",{class:b,innerHTML:P},null):o("div",{class:b},[P])},K=()=>{if(n.default)return o("div",{class:i("content")},[n.default()]);const{title:t,message:l,allowHtml:u}=e;if(l){const d=!!(t||n.title);return o("div",{key:u?1:0,class:i("content",{isolated:!d})},[y(d)])}},$=()=>o("div",{class:[se,i("footer")]},[e.showCancelButton&&o(S,{size:"large",text:e.cancelButtonText||C("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(S,{size:"large",text:e.confirmButtonText||C("confirm"),class:[i("confirm"),{[le]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),L=()=>o(de,{class:i("footer")},{default:()=>[e.showCancelButton&&o(A,{type:"warning",text:e.cancelButtonText||C("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(A,{type:"danger",text:e.confirmButtonText||C("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),U=()=>n.footer?n.footer():e.theme==="round-button"?L():$();return()=>{const{width:t,title:l,theme:u,message:d,className:b}=e;return o(j,R({ref:s,role:"dialog",class:[i([u]),b],style:{width:ne(t)},tabindex:0,"aria-labelledby":l||d,onKeydown:w,"onUpdate:show":f},te(e,Ce)),{default:()=>[v(),K(),U()]})}}});let k;const ve={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ye=h({},ve);function Pe(){({instance:k}=Y({setup(){const{state:a,toggle:n}=q();return()=>o(we,R(a,{"onUpdate:show":n}),null)}}))}function xe(e){return ce?new Promise((a,n)=>{k||Pe(),k.open(h({},ye,e,{callback:s=>{(s==="confirm"?a:n)(s)}}))}):Promise.resolve()}const pe=e=>xe(h({showCancelButton:!0},e));export{xe as a,we as b,pe as s};
