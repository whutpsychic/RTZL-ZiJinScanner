import"./el-tag-7aa21aa3.js";import{E as M}from"./el-overlay-741ce293.js";import{_ as H,k as P,p as b,Z as U,s as R,q as T,x as n,y as i,F as t,a as p,z as c,H as B,a1 as Y,A as D,G as l,N as _,C as d,I as z,D as Q,E as A}from"./index-ce976914.js";import{E as G,D as O,I as Z,a as K}from"./el-card-78d562e6.js";/* empty css              */import{a as W,q as X,S as $,L as tt,T as et}from"./qualityCheckingRecord-8bb2b34b.js";import"./index-0c1f1cf9.js";import"./index-b5332b67.js";import{N as at}from"./index-8f5a4469.js";import{E as ot}from"./index-85d2e338.js";import{s as nt}from"./index-402c235e.js";import"./index-64aa9276.js";import"./use-global-config-d39b7b40.js";import"./objects-2035efb6.js";import"./mount-component-21eea6f5.js";import"./index-498faa0f.js";import"./use-tab-status-0a8acb71.js";import"./use-id-890333ae.js";import"./request-e5d79f44.js";const lt={setup(){const y=P(),s=b(""),w=b(!1),a=U({qualityCheckingList:[],yjtJyInformationData:{},yjtJyInformationDecideDataList:[],filePathList:[]}),N=b(!1),C=b(!1),k=b(!1),I=b(10),f=b(0);R.await("scanner",o=>{y.currentRoute.value.path=="/qualityCheckingRecord"&&(o!="null"?(a.qualityCheckingList=[],f.value=1,k.value=!0,e({batchnumber:"",barcode:o})):nt({message:"数据获取失败",type:"fail",className:"particulars-detail-popup"}))}),T(()=>{R.register("goback",()=>{w.value?w.value=!1:y.push({path:"/home"})}),f.value=1,e({batchnumber:s.value,barcode:""})});const v=()=>{y.push({path:"/home"})},L=()=>{f.value=1,a.qualityCheckingList=[],k.value=!1,e({batchnumber:s.value,barcode:""})},V=()=>{f.value=1,a.qualityCheckingList=[],k.value=!1,e({batchnumber:s.value,barcode:""})},j=()=>{f.value=f.value+1,e({batchnumber:s.value,barcode:""})},x=()=>{R.scan()},q=o=>{a.filePathList=[],a.filePathList=o,N.value=!0},F=o=>{if(a.yjtJyInformationData=o,o.state=="1"){let h={yjtJyInformationId:o.id,status:"2"};S(h)}w.value=!0},S=o=>{X(o).then(h=>{a.yjtJyInformationDecideDataList=h.data.data}).catch(h=>{console.log(h)})},e=o=>{C.value=!0;let h={},g={},u={};u.limit=I.value,u.offset=f.value,u.blockId="paramBlock",u.data=o,g.paramBlock=u,h.blocks=g,W(h).then(m=>{a.qualityCheckingList=[...a.qualityCheckingList,...m.data.blocks.resultBlock.data],C.value=!1,a.qualityCheckingList.length==m.data.blocks.resultBlock.total&&(k.value=!0)}).catch(m=>{console.log(m)})};return{showImage:N,centerDialogVisible:w,searchValue:s,loading:C,finished:k,limit:I,offset:f,listData:a,onClickLeft:v,onLoad:j,statusChange:L,dateFormat:(o,h)=>{let g,u=new Date(h);const m={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let J in m)g=new RegExp("("+J+")").exec(o),g&&(o=o.replace(g[1],g[1].length==1?m[J]:m[J].padStart(g[1].length,"0")));return o},onSearch:V,qualityCheckingRecordDetails:F,scanClick:x,seeImg:q,getQualityCheckingRecordDecide:S,getQualityCheckingRecord:e}}},r=y=>(Q("data-v-7496b192"),y=y(),A(),y),st={class:"header"},it={style:{display:"flex","background-color":"#ffffff"}},rt={id:"content",class:"content"},ct={style:{padding:"0px 5px 5px 5px"}},dt=r(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),ut=r(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),pt={key:0,style:{"margin-left":"30px"}},ht={key:0},_t={key:1},ft={key:2},gt={style:{padding:"15px","overflow-y":"auto","overscroll-behavior-y":"contain",height:"calc(100vh - 180px)"}},yt=r(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),mt=r(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),kt=r(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),vt=r(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),bt=r(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Dt=r(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),wt={key:0},xt=r(()=>t("span",{style:{"font-weight":"bold"}},"是否最新：",-1)),Ct=r(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),It={key:0,style:{"font-weight":"bold"}},Lt=r(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),St=r(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Nt={key:0},Vt=r(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),jt={key:1},qt=r(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),Ft={key:2};function Jt(y,s,w,a,N,C){const k=z,I=at,f=$,v=ot,L=et,V=G,j=tt,x=O,q=K,F=Z,S=M;return n(),i("main",null,[t("div",st,[p(I,{title:"质检记录列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},{right:c(()=>[p(k,{onClick:a.scanClick,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])]),_:1},8,["onClickLeft"]),t("div",it,[p(f,{style:{width:"100%"},modelValue:a.searchValue,"onUpdate:modelValue":s[0]||(s[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"])])]),t("div",rt,[p(j,{loading:a.loading,"onUpdate:loading":s[1]||(s[1]=e=>a.loading=e),finished:a.finished,"immediate-check":!1,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",ct,[(n(!0),i(B,null,Y(a.listData.qualityCheckingList,(e,E)=>(n(),D(V,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:o=>a.qualityCheckingRecordDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[dt,t("span",null,l(e.batchnumber),1)]),t("p",null,[ut,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1),e.exteriorName?(n(),i("span",pt,[e.exteriorName=="优等品"?(n(),i("span",ht,[p(v,null,{default:c(()=>[_(l(e.exteriorName),1)]),_:2},1024)])):d("",!0),e.exteriorName=="合格"?(n(),i("span",_t,[p(v,{type:"warning"},{default:c(()=>[_(l(e.exteriorName),1)]),_:2},1024)])):d("",!0),e.exteriorName=="不合格"?(n(),i("span",ft,[p(v,{type:"danger"},{default:c(()=>[_(l(e.exteriorName),1)]),_:2},1024)])):d("",!0)])):d("",!0)]),e.state=="0"?(n(),D(L,{key:0,type:"primary",size:"large"},{default:c(()=>[_("未质检")]),_:1})):d("",!0),e.state=="1"?(n(),D(L,{key:1,type:"success",size:"large"},{default:c(()=>[_("已质检")]),_:1})):d("",!0)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),p(S,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"质检记录详情",width:"96%","align-center":""},{default:c(()=>[t("div",gt,[t("div",null,[p(x,{"content-position":"left"},{default:c(()=>[_("基本信息")]),_:1}),t("p",null,[yt,t("span",null,l(a.listData.yjtJyInformationData.batchnumber),1)]),t("p",null,[mt,t("span",null,l(parseFloat(a.listData.yjtJyInformationData.suttle))+l(a.listData.yjtJyInformationData.unit),1)]),t("p",null,[kt,t("span",null,l(a.listData.yjtJyInformationData.standard),1)]),t("p",null,[vt,t("span",null,l(a.listData.yjtJyInformationData.suttleperson),1),_("      "),bt,t("span",null,l(a.listData.yjtJyInformationData.scanUser),1)]),t("p",null,[Dt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationData.proDate)),1)])]),a.listData.yjtJyInformationData.state=="1"?(n(),i("div",wt,[p(x,{"content-position":"left"},{default:c(()=>[_("质检信息")]),_:1}),(n(!0),i(B,null,Y(a.listData.yjtJyInformationDecideDataList,(e,E)=>(n(),i("div",null,[t("div",null,[t("p",null,[xt,e.details.isNew=="0"?(n(),D(v,{key:0,type:"success"},{default:c(()=>[_("是")]),_:1})):d("",!0),e.details.isNew=="1"?(n(),D(v,{key:1,type:"danger"},{default:c(()=>[_("否")]),_:1})):d("",!0)]),t("p",null,[Ct,t("span",null,l(e.details.exteriorName),1),_("      "),e.details.exterior!="0"?(n(),i("span",It,"类型：")):d("",!0),t("span",null,l(e.details.dictName),1)]),t("p",null,[Lt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.details.checkoutDate)),1)]),t("p",null,[St,t("span",null,l(e.details.checkoutUser),1)]),e.details.alterReason?(n(),i("p",Nt,[Vt,t("span",null,l(e.details.alterReason),1)])):d("",!0),e.details.remarks?(n(),i("p",jt,[qt,t("span",null,l(e.details.remarks),1)])):d("",!0),e.details.exterior!="0"?(n(),i("div",Ft,[(n(!0),i(B,null,Y(e.fileList,(o,h)=>(n(),D(q,{style:{margin:"0 2%"},onClick:g=>a.seeImg(e.fileList),width:"45%",height:"8rem",fit:"cover",position:"left",src:o},null,8,["onClick","src"]))),256))])):d("",!0),p(x)])]))),256))])):d("",!0)]),p(F,{show:a.showImage,"onUpdate:show":s[2]||(s[2]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])]),_:1},8,["modelValue"])])}const te=H(lt,[["render",Jt],["__scopeId","data-v-7496b192"]]);export{te as default};
