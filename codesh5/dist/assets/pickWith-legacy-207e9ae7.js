System.register(["./el-tag-legacy-3c9cedb4.js","./el-overlay-legacy-aaac20d6.js","./index-legacy-d432f125.js","./index-legacy-5039dca1.js","./el-select-legacy-ca49c0db.js","./el-popper-legacy-cb65354b.js","./el-table-column-legacy-a5370755.js","./index-legacy-eda59a38.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-658dcb6b.js","./btn_shoudong-legacy-5e849329.js","./btn_tichu-legacy-29a262ad.js","./function-call-legacy-f9562467.js","./index-legacy-1388c7cd.js","./use-global-config-legacy-27224871.js","./objects-legacy-241eae9f.js","./index-legacy-3f3b008e.js"],(function(e,a){"use strict";var t,l,n,s,i,o,d,c,r,u,p,h,g,m,f,b,v,w,y,x,k,F,C,_,j,z,H,T,B,E,D,L,R,I,S,U,V,A,N,M,q,O,P,W,X,G,Q;return{setters:[null,e=>{t=e.E},e=>{l=e._,n=e.u,s=e.H,i=e.r,o=e.a,d=e.I,c=e.f,r=e.t,u=e.g1,p=e.o,h=e.c,g=e.d,m=e.e,f=e.w,b=e.k,v=e.g,w=e.l,y=e.F,x=e.J,k=e.P,F=e.Q,C=e.N,_=e.W,j=e.O,z=e.p,H=e.j,T=e.X,B=e.a2,E=e.a3,D=e.Z,L=e.a1,R=e.S,I=e.a4},null,e=>{S=e.E,U=e.a},null,e=>{V=e.E,A=e.a},null,e=>{N=e.B},e=>{M=e.c,q=e.b,O=e.s},e=>{P=e._,W=e.a},e=>{X=e._},e=>{G=e.s,Q=e.a},null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-41d9f539]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-41d9f539]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-41d9f539]{background-color:#3c5d85;color:#fff}.container[data-v-41d9f539]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-41d9f539]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-41d9f539]{border-radius:25px;font-size:20px;width:28%;min-height:45px}.btn-area img[data-v-41d9f539]{width:45px}.btn-area>div[data-v-41d9f539]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-41d9f539]:nth-child(1){background-color:var(--btn-color1);margin-left:10px}.btn-area>div[data-v-41d9f539]:nth-child(3){background-color:var(--btn-color1);margin-right:10px}[data-v-41d9f539] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-41d9f539] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const K={setup(){const e=n();s();const a=i([]),t=o(),l=i(""),h=i(""),g=i("0"),m=i(""),f=i("0"),b=i("0"),v=i("0"),w=i(!1),y=i(""),C=i(""),_=i(""),j=i(""),z=d({barCodeSelectList:[]});function H(){e.push({path:"/pickWithQueryInfoData"})}c.await("scanner",(t=>{if("/pickWith"==e.currentRoute.value.path)if("null"!=t){let e=t;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,M(t).then((t=>{if(t.data.data)return E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};D(r(a.value),t)}));{let l="",n=!0;"1"==t.data.distinguish?l='<span style="font-size: 18px;color: red">'+t.data.message+"</span>":"2"==t.data.distinguish?l='<span style="font-size: 18px;color: #0e80d2">'+t.data.message+"</span>":"4"==t.data.distinguish?(n=!1,G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};D(r(a.value),t)})))).catch((e=>{console.log(e)}))):l='<span style="font-size: 18px">'+t.data.message+"</span>",n&&Q({title:"提示",width:"600",allowHtml:!0,message:l}).then((()=>{}))}}))}else Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))}else Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">数据获取失败</span>'}).then((()=>{}))})),window.history.pushState(null,null,document.URL),window.addEventListener("popstate",H,!1),u((()=>{window.removeEventListener("popstate",H,!1)}));let T="";p((()=>{c.register("goback",(()=>{e.push({path:"/pickWithQueryInfoData"})}));let a=r(t.state.chukudanListInfo);r(t.state.carInfo.pizhong)&&(f.value=r(t.state.carInfo.pizhong).toFixed(4)),h.value=new N(a.F_PLANSUTTLE).minus(a.F_SUTTLE).toFixed(4),m.value=new N(a.F_PLANSUTTLE).minus(a.F_SUTTLE).toFixed(4),v.value=new N(f.value).plus(g.value).toFixed(4)}));const B=(e,t)=>{"add"==y.value?g.value=new N(g.value).plus(new N(t.weight).dividedBy(1e3).toNumber()).toFixed(4):g.value=new N(g.value).minus(new N(t.weight).dividedBy(1e3).toNumber()).toFixed(4),m.value=new N(h.value).minus(g.value).toFixed(4),v.value=new N(f.value).plus(g.value).toFixed(4),b.value=e.length,a.value=e,l.value=Math.random(),m.value<0&&Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">缺少数值已为负数</span>'}).then((()=>{}))},E=e=>{let a=e.split("");const t=a.slice(0,3).join(""),l=a.slice(3,5).join(""),n=a.slice(5,7).join(""),s=a.slice(7,13).join(""),i=a.slice(13,17).join(""),o=a.slice(17,20).join(""),d=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,c)=>{a({barcode:e,qiyedaima:t,chanpinleibie:l,chanpindengji:n,shengchanriqi:s,chanpinpihao:i,kunxuhao:o,kunjingzhong:d})}))},D=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">该批次已经选择，请勿重复选择</span>'}).then((()=>{}));else{let t=[];e.unshift(a),t=e,y.value="add",B(t,a)}};return{typeName:y,barCodeSelect:C,F_BATCHGROUP:_,F_BATCHNUMBER:j,listData:z,itemKey:l,yingj:h,yij1:g,ques:m,pizhong:f,yij2:b,pz:v,tableData:a,centerDialogVisibleTXM:w,passedTXMClick:()=>{if(""==C.value)return Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择条形码</span>'}).then((()=>{})),!1;w.value=!1;let e=C.value;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,M(t).then((t=>{if(t.data.data)return E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};D(r(a.value),t)}));{let l="",n=!0;"1"==t.data.distinguish?l='<span style="font-size: 18px;color: red">'+t.data.message+"</span>":"2"==t.data.distinguish?l='<span style="font-size: 18px;color: #0e80d2">'+t.data.message+"</span>":"4"==t.data.distinguish?(n=!1,G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};D(r(a.value),t)})))).catch((e=>{console.log(e)}))):l='<span style="font-size: 18px">'+t.data.message+"</span>",n&&Q({title:"提示",width:"600",allowHtml:!0,message:l}).then((()=>{}))}}))}else Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))},onSubmit:e=>{C.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;q({strBatchno:a}).then((e=>{z.barCodeSelectList=e.data.data,z.barCodeSelectList.length>0?x({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有查询到对应的条码数据</span>'}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{w.value=!1},checkIfExist:D,decode:E,scanCode:()=>{c.scan()},onClickLeft:()=>{e.push({path:"/pickWithQueryInfoData"})},onHandle:()=>{w.value=!0},onConfirm:()=>{if(0==a.value.length)return Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有要处理的数据</span>'}).then((()=>{})),!1;G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否已完成扫描？</span>'}).then((()=>{k({duration:0,forbidClick:!0,overlay:!0,className:"particulars-detail-popup",message:"拣配中..."});let l=r(t.state.chukudanListInfo),n=r(t.state.carInfo),s={};s.F_DELIVERYNO=l.F_DELIVERYNO,s.strSuttle=g.value,s.strTruckNo=n.chehao,s.weighthousename=n.chengfang,s.id=n.danjuhao,n.DataId?s.strDataId=n.DataId:s.strDataId="";let i=r(a.value).map((e=>e.barcode+",")).join("");s.strBarcodes=i.substring(0,i.length-1),O(s).then((l=>{F(),"200"==l.data.code?(a.value=[],Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+l.data.message+"</span>"}).then((()=>{t.commit("setPickWithScroll",0),t.commit("setChukudanListInfo",{}),t.commit("setCarInfo",{}),e.push({path:"/pickWithQueryListData"})}))):Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+l.data.message+"</span>"}).then((()=>{}))}))})).catch((e=>{console.log(e),F()}))},selectRow:(e,a,t)=>{T=r(e)},onDelete:()=>{T?G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否要剔除当前所选数据？</span>'}).then((()=>{let e=a.value.filter((e=>e.barcode!=T.barcode));a.value=e,y.value="edit",B(e,T),T=""})).catch((e=>{console.log(e)})):Q({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择要剔除的的数据</span>'}).then((()=>{}))}}}},Y=e=>(z("data-v-41d9f539"),e=e(),H(),e),$={class:"container"},J={class:"info-container"},Z=Y((()=>b("span",{class:"title"},"应拣",-1))),ee=Y((()=>b("span",{class:"title"},"已拣",-1))),ae=Y((()=>b("span",{class:"title"},"缺少",-1))),te=Y((()=>b("span",{class:"title"},"皮重",-1))),le=Y((()=>b("span",{class:"title"},"捆数",-1))),ne=Y((()=>b("span",{class:"title"},"合计",-1))),se={class:"btn-area"},ie=[Y((()=>b("img",{src:P},null,-1))),Y((()=>b("div",null,"确认",-1)))],oe=[Y((()=>b("img",{src:W},null,-1))),Y((()=>b("div",null,"手动",-1)))],de=[Y((()=>b("img",{src:X},null,-1))),Y((()=>b("div",null,"剔除",-1)))],ce={style:{margin:"16px"}},re={style:{"margin-top":"10px"}},ue=Y((()=>b("p",null,"条形码",-1)));e("default",l(K,[["render",function(e,a,l,n,s,i){const o=T,d=C,c=A,r=V,u=B,p=E,x=D,k=S,F=U,z=L,H=R,N=I,M=t;return h(),g(y,null,[m(d,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:f((()=>[m(o,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),b("div",$,[(h(),v(r,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:f((()=>[m(c,{fixed:"",prop:"date",label:"日期"}),m(c,{prop:"number",label:"包号"}),m(c,{prop:"weight",label:"重量"}),m(c,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),b("div",J,[Z,ee,ae,b("span",null,w(n.yingj),1),b("span",null,w(n.yij1),1),b("span",null,w(n.ques),1),te,le,ne,b("span",null,w(n.pizhong),1),b("span",null,w(n.yij2),1),b("span",null,w(n.pz),1)]),b("div",se,[b("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},ie),b("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},oe),b("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},de)])]),m(M,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:f((()=>[m(N,{onSubmit:n.onSubmit},{default:f((()=>[m(p,{inset:""},{default:f((()=>[m(u,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),m(u,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),b("div",ce,[m(x,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:f((()=>[_(" 查询 ")])),_:1}),b("div",re,[ue,m(F,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:f((()=>[(h(!0),g(y,null,j(n.listData.barCodeSelectList,(e=>(h(),v(k,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),m(H,{style:{"margin-top":"15px"}},{default:f((()=>[m(z,{span:"2"}),m(z,{span:"10"},{default:f((()=>[m(x,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:f((()=>[_("确定 ")])),_:1},8,["onClick"])])),_:1}),m(z,{span:"10",style:{"text-align":"center"}},{default:f((()=>[m(x,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:f((()=>[_("退出 ")])),_:1},8,["onClick"])])),_:1}),m(z,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-41d9f539"]]))}}}));
