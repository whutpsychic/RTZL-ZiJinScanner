import{P as M,m as L,d as N}from"./mount-component-b771f396.js";import{c as z,d as j,a3 as h,q as U,b3 as q,a as i,h as O,a5 as V,a8 as k,n as p,aQ as D,a4 as C,I as E,ax as F,ap as H,e as v,ah as Q,M as _,p as A,L as G,w as J}from"./index-7ad4752d.js";let u=0;function K(e){e?(u||document.body.classList.add("van-toast--unclickable"),u++):u&&(u--,u||document.body.classList.remove("van-toast--unclickable"))}const[R,c]=z("toast"),W=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],X={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:p,iconSize:p,duration:D(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var S=j({name:R,props:X,emits:["update:show"],setup(e,{emit:t,slots:a}){let f,l=!1;const r=()=>{const n=e.show&&e.forbidClick;l!==n&&(l=n,K(l))},d=n=>t("update:show",n),y=()=>{e.closeOnClick&&d(!1)},m=()=>clearTimeout(f),g=()=>{const{icon:n,type:o,iconSize:w,iconPrefix:I,loadingType:B}=e;if(n||o==="success"||o==="fail")return i(E,{name:n||o,size:w,class:c("icon"),classPrefix:I},null);if(o==="loading")return i(F,{class:c("loading"),size:w,type:B},null)},T=()=>{const{type:n,message:o}=e;if(a.message)return i("div",{class:c("text")},[a.message()]);if(H(o)&&o!=="")return n==="html"?i("div",{key:0,class:c("text"),innerHTML:String(o)},null):i("div",{class:c("text")},[o])};return h(()=>[e.show,e.forbidClick],r),h(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(f=setTimeout(()=>{d(!1)},e.duration))}),U(r),q(r),()=>i(M,O({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:m,"onUpdate:show":d},V(e,W)),{default:()=>[g(),T()]})}});const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let s=[],Z=!1,b=v({},Y);const $=new Map;function P(e){return _(e)?e:{message:e}}function ee(){const{instance:e,unmount:t}=L({setup(){const a=A(""),{open:f,state:l,close:r,toggle:d}=N(),y=()=>{},m=()=>i(S,O(l,{onClosed:y,"onUpdate:show":d}),null);return h(a,g=>{l.message=g}),G().render=m,{open:f,close:r,message:a}}});return e}function te(){if(!s.length||Z){const e=ee();s.push(e)}return s[s.length-1]}function ne(e={}){if(!Q)return{};const t=te(),a=P(e);return t.open(v({},b,$.get(a.type||b.type),a)),t}const x=e=>t=>ne(v({type:e},P(t))),ie=x("loading"),le=x("fail"),ce=e=>{s.length&&(e?(s.forEach(t=>{t.close()}),s=[]):s[0].close())};J(S);export{ie as a,le as b,ce as c,ne as s};
