import"./el-tag-f8ec1a70.js";import{v as W}from"./el-loading-526a83d3.js";import{_ as B,r as s,a as E,u as V,o as j,f as q,c as F,d as U,e as l,k as n,w as g,L as G,g as P,ab as Z,F as A,t as J,N as K,a3 as O,a4 as X,l as $,C as ee,fZ as te,a2 as oe,p as ae,j as ne}from"./index-ecb86d45.js";import{E as le,a as se}from"./el-table-column-7d33d5e6.js";import"./el-popper-81f3a1c7.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as re}from"./pickWith-4f8088ee.js";import{_ as ie}from"./btn_chaxun1-d052ddc6.js";import{_ as ce,a as de}from"./btn_shoudong-07961c15.js";import{a as H}from"./function-call-509584aa.js";import"./use-global-config-a7f40fa2.js";import"./objects-aa909a4b.js";let T=new Date,me=parseInt(T.getFullYear()-1),ue=parseInt(T.getMonth()),fe=parseInt(T.getDate()),z="";const he={mounted(){z=this.$refs.formRef},setup(){const r=s(""),t=s(""),c=s(""),e=s(""),D=E(),C=s(!1),d=V(),v=s([]),w=s(""),m=s(!0),b=s(null);j(()=>{q.register("goback",()=>{d.push({path:"/pickWithQueryInfoData"})}),t.value=_("YYYY-mm-dd",new Date(new Date().getTime()-24*60*60*1e3)),c.value=_("YYYY-mm-dd",new Date);let o=document.body.scrollHeight-275;w.value="height:"+o+"px",r.value=t.value+"至"+c.value,setTimeout(()=>{x()},0)});const u=(o,p)=>J(o).pizhong.toFixed(4),S=o=>{const[p,i]=o;C.value=!1,t.value=_("YYYY-mm-dd",p),c.value=_("YYYY-mm-dd",i),r.value=`${t.value}至${c.value}`},k=()=>{d.push({path:"/pickWithQueryInfoData"})},y=()=>{z.submit()};let a={};const N=()=>{x()};let Y="";const Q=(o,p,i)=>{e.value=o.chehao,Y=o},L=()=>{Y?(D.commit("setCarInfo",Y),d.push({name:"pickWithQueryInfoData"})):H({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择车号</span>'}).then(()=>{})},M=()=>{if(e.value){let o={chehao:e.value,danjuhao:"",chengfang:"",pizhong:0,DataId:""};D.commit("setCarInfo",o),d.push({name:"pickWithQueryInfoData"})}else H({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请手工录入车号</span>'}).then(()=>{})},x=()=>{m.value=!0,e.value="",b.value.setScrollTop(0),a.startDate=t.value+" 00:00:00",a.endDate=c.value+" 23:59:59",re(a).then(o=>{v.value=o.data.data,m.value=!1})},_=(o,p)=>{let i,f=new Date(p);const I={"Y+":f.getFullYear().toString(),"m+":(f.getMonth()+1).toString(),"d+":f.getDate().toString(),"H+":f.getHours().toString(),"M+":f.getMinutes().toString(),"S+":f.getSeconds().toString()};for(let R in I)i=new RegExp("("+R+")").exec(o),i&&(o=o.replace(i[1],i[1].length==1?I[R]:I[R].padStart(i[1].length,"0")));return o};return{deDate:[new Date(new Date().getTime()-24*60*60*1e3),new Date],minDate:new Date(me,ue,fe),show:C,dataText:r,startDate:t,endDate:c,tableData:v,tableRef:b,loading:m,tableHeight:w,chehao:e,formatter:u,onClickLeft:k,onConfirm:S,onSubmit:N,onQuery:y,queryData:x,selectRow:Q,confirmSelect:L,dateFormat:_,handleConfirmSelect:M}}},h=r=>(ae("data-v-1b9556e1"),r=r(),ne(),r),_e={style:{"font-weight":"bolder","font-size":"16px"}},pe={class:"btn-area"},ge=h(()=>n("img",{src:ie},null,-1)),ve=h(()=>n("div",null,"查询",-1)),we=[ge,ve],be=h(()=>n("img",{src:ce},null,-1)),De=h(()=>n("div",null,"确认",-1)),Ce=[be,De],Se=h(()=>n("img",{src:de},null,-1)),ke=h(()=>n("div",null,"手动确认",-1)),ye=[Se,ke];function Ye(r,t,c,e,D,C){const d=K,v=ee,w=te,m=O,b=X,u=se,S=le,k=oe,y=W;return F(),U(A,null,[l(d,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),n("div",null,[l(b,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:g(()=>[l(m,{inset:""},{default:g(()=>[l(v,{title:"选择日期：","title-style":"max-width: 25%",value:e.dataText,onClick:t[0]||(t[0]=a=>e.show=!0)},null,8,["value"]),l(w,{show:e.show,"onUpdate:show":t[1]||(t[1]=a=>e.show=a),"min-date":e.minDate,"default-date":e.deDate,type:"range","allow-same-day":"",onConfirm:e.onConfirm},null,8,["show","min-date","default-date","onConfirm"])]),_:1})]),_:1},8,["onSubmit"]),G((F(),P(S,{ref:"tableRef",data:e.tableData,id:"data-area",style:Z(e.tableHeight),"element-loading-text":"数据加载中...","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:e.selectRow},{default:g(()=>[l(u,{fixed:"",prop:"chehao",label:"车号",width:"110px"},{default:g(a=>[n("span",_e,$(a.row.chehao),1)]),_:1}),l(u,{prop:"danjuhao",label:"单据号",width:"130px"}),l(u,{prop:"chengfang",label:"秤房"}),l(u,{prop:"pizhong",label:"皮重",formatter:e.formatter},null,8,["formatter"])]),_:1},8,["data","style","onRowClick"])),[[y,e.loading]]),n("div",null,[l(m,{inset:""},{default:g(()=>[l(k,{class:"chehao",modelValue:e.chehao,"onUpdate:modelValue":t[2]||(t[2]=a=>e.chehao=a),label:"车牌号",placeholder:""},null,8,["modelValue"])]),_:1}),n("div",pe,[n("div",{onClick:t[3]||(t[3]=(...a)=>e.onQuery&&e.onQuery(...a))},we),n("div",{onClick:t[4]||(t[4]=(...a)=>e.confirmSelect&&e.confirmSelect(...a))},Ce),n("div",{onClick:t[5]||(t[5]=(...a)=>e.handleConfirmSelect&&e.handleConfirmSelect(...a))},ye)])])])],64)}const je=B(he,[["render",Ye],["__scopeId","data-v-1b9556e1"]]);export{je as default};
