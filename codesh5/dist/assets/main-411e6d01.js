import"./el-tag-f8ec1a70.js";import{E as M}from"./el-overlay-1f30441e.js";import{_ as H,u as P,r as b,I as U,f as B,J as T,o as z,c as n,d as i,k as t,e as h,w as c,F as N,N as O,a9 as Q,aa as W,O as Y,g as D,l,W as p,h as d,X,ac as A,$ as G,V as K,p as Z,j as $,a0 as tt}from"./index-ecb86d45.js";import{E as et}from"./el-card-c7aba386.js";/* empty css              */import{a as at,q as ot}from"./qualityCheckingRecord-95914072.js";/* empty css              */import{E as nt}from"./index-dd289210.js";import"./index-95c1965a.js";import"./use-global-config-a7f40fa2.js";import"./objects-aa909a4b.js";const lt={setup(){const y=P(),s=b(""),w=b(!1),a=U({qualityCheckingList:[],yjtJyInformationData:{},yjtJyInformationDecideDataList:[],filePathList:[]}),V=b(!1),C=b(!1),k=b(!1),I=b(10),f=b(0);B.await("scanner",o=>{y.currentRoute.value.path=="/qualityCheckingRecord"&&(o!="null"?(a.qualityCheckingList=[],f.value=1,k.value=!0,e({batchnumber:"",barcode:o})):T({message:"数据获取失败",type:"fail",className:"particulars-detail-popup"}))}),z(()=>{B.register("goback",()=>{w.value?w.value=!1:y.push({path:"/home"})}),f.value=1,e({batchnumber:s.value,barcode:""})});const v=()=>{y.push({path:"/home"})},L=()=>{f.value=1,a.qualityCheckingList=[],k.value=!1,e({batchnumber:s.value,barcode:""})},j=()=>{f.value=1,a.qualityCheckingList=[],k.value=!1,e({batchnumber:s.value,barcode:""})},F=()=>{f.value=f.value+1,e({batchnumber:s.value,barcode:""})},x=()=>{B.scan()},J=o=>{a.filePathList=[],a.filePathList=o,V.value=!0},q=o=>{if(a.yjtJyInformationData=o,o.state=="1"){let _={yjtJyInformationId:o.id,status:"2"};S(_)}w.value=!0},S=o=>{ot(o).then(_=>{a.yjtJyInformationDecideDataList=_.data.data}).catch(_=>{console.log(_)})},e=o=>{C.value=!0;let _={},g={},u={};u.limit=I.value,u.offset=f.value,u.blockId="paramBlock",u.data=o,g.paramBlock=u,_.blocks=g,at(_).then(m=>{a.qualityCheckingList=[...a.qualityCheckingList,...m.data.blocks.resultBlock.data],C.value=!1,a.qualityCheckingList.length==m.data.blocks.resultBlock.total&&(k.value=!0)}).catch(m=>{console.log(m)})};return{showImage:V,centerDialogVisible:w,searchValue:s,loading:C,finished:k,limit:I,offset:f,listData:a,onClickLeft:v,onLoad:F,statusChange:L,dateFormat:(o,_)=>{let g,u=new Date(_);const m={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let R in m)g=new RegExp("("+R+")").exec(o),g&&(o=o.replace(g[1],g[1].length==1?m[R]:m[R].padStart(g[1].length,"0")));return o},onSearch:j,qualityCheckingRecordDetails:q,scanClick:x,seeImg:J,getQualityCheckingRecordDecide:S,getQualityCheckingRecord:e}}},r=y=>(Z("data-v-684079ce"),y=y(),$(),y),st={class:"header"},it={style:{display:"flex","background-color":"#ffffff"}},rt={id:"content",class:"content"},ct={style:{padding:"0px 5px 5px 5px"}},dt=r(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),ut=r(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),ht={key:0,style:{"margin-left":"30px"}},_t={key:0},pt={key:1},ft={key:2},gt={style:{padding:"15px","overflow-y":"auto","overscroll-behavior-y":"contain",height:"calc(100vh - 180px)"}},yt=r(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),mt=r(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),kt=r(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),vt=r(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),bt=r(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Dt=r(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),wt={key:0},xt=r(()=>t("span",{style:{"font-weight":"bold"}},"是否最新：",-1)),Ct=r(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),It={key:0,style:{"font-weight":"bold"}},Lt=r(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),St=r(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Nt={key:0},Vt=r(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),jt={key:1},Ft=r(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),Jt={key:2};function qt(y,s,w,a,V,C){const k=X,I=O,f=Q,v=nt,L=A,j=et,F=W,x=G,J=tt,q=K,S=M;return n(),i(N,null,[t("div",st,[h(I,{title:"质检记录列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},{right:c(()=>[h(k,{onClick:a.scanClick,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])]),_:1},8,["onClickLeft"]),t("div",it,[h(f,{style:{width:"100%"},modelValue:a.searchValue,"onUpdate:modelValue":s[0]||(s[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"])])]),t("div",rt,[h(F,{loading:a.loading,"onUpdate:loading":s[1]||(s[1]=e=>a.loading=e),finished:a.finished,"immediate-check":!1,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",ct,[(n(!0),i(N,null,Y(a.listData.qualityCheckingList,(e,E)=>(n(),D(j,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:o=>a.qualityCheckingRecordDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[dt,t("span",null,l(e.batchnumber),1)]),t("p",null,[ut,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1),e.exteriorName?(n(),i("span",ht,[e.exteriorName=="优等品"?(n(),i("span",_t,[h(v,null,{default:c(()=>[p(l(e.exteriorName),1)]),_:2},1024)])):d("",!0),e.exteriorName=="合格"?(n(),i("span",pt,[h(v,{type:"warning"},{default:c(()=>[p(l(e.exteriorName),1)]),_:2},1024)])):d("",!0),e.exteriorName=="不合格"?(n(),i("span",ft,[h(v,{type:"danger"},{default:c(()=>[p(l(e.exteriorName),1)]),_:2},1024)])):d("",!0)])):d("",!0)]),e.state=="0"?(n(),D(L,{key:0,type:"primary",size:"large"},{default:c(()=>[p("未质检")]),_:1})):d("",!0),e.state=="1"?(n(),D(L,{key:1,type:"success",size:"large"},{default:c(()=>[p("已质检")]),_:1})):d("",!0)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),h(S,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"质检记录详情",width:"96%","align-center":""},{default:c(()=>[t("div",gt,[t("div",null,[h(x,{"content-position":"left"},{default:c(()=>[p("基本信息")]),_:1}),t("p",null,[yt,t("span",null,l(a.listData.yjtJyInformationData.batchnumber),1)]),t("p",null,[mt,t("span",null,l(parseFloat(a.listData.yjtJyInformationData.suttle))+l(a.listData.yjtJyInformationData.unit),1)]),t("p",null,[kt,t("span",null,l(a.listData.yjtJyInformationData.standard),1)]),t("p",null,[vt,t("span",null,l(a.listData.yjtJyInformationData.suttleperson),1),p("      "),bt,t("span",null,l(a.listData.yjtJyInformationData.scanUser),1)]),t("p",null,[Dt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationData.proDate)),1)])]),a.listData.yjtJyInformationData.state=="1"?(n(),i("div",wt,[h(x,{"content-position":"left"},{default:c(()=>[p("质检信息")]),_:1}),(n(!0),i(N,null,Y(a.listData.yjtJyInformationDecideDataList,(e,E)=>(n(),i("div",null,[t("div",null,[t("p",null,[xt,e.details.isNew=="0"?(n(),D(v,{key:0,type:"success"},{default:c(()=>[p("是")]),_:1})):d("",!0),e.details.isNew=="1"?(n(),D(v,{key:1,type:"danger"},{default:c(()=>[p("否")]),_:1})):d("",!0)]),t("p",null,[Ct,t("span",null,l(e.details.exteriorName),1),p("      "),e.details.exterior!="0"?(n(),i("span",It,"类型：")):d("",!0),t("span",null,l(e.details.dictName),1)]),t("p",null,[Lt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.details.checkoutDate)),1)]),t("p",null,[St,t("span",null,l(e.details.checkoutUser),1)]),e.details.alterReason?(n(),i("p",Nt,[Vt,t("span",null,l(e.details.alterReason),1)])):d("",!0),e.details.remarks?(n(),i("p",jt,[Ft,t("span",null,l(e.details.remarks),1)])):d("",!0),e.details.exterior!="0"?(n(),i("div",Jt,[(n(!0),i(N,null,Y(e.fileList,(o,_)=>(n(),D(J,{style:{margin:"0 2%"},onClick:g=>a.seeImg(e.fileList),width:"45%",height:"8rem",fit:"cover",position:"left",src:o},null,8,["onClick","src"]))),256))])):d("",!0),h(x)])]))),256))])):d("",!0)]),h(q,{show:a.showImage,"onUpdate:show":s[2]||(s[2]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])]),_:1},8,["modelValue"])],64)}const Qt=H(lt,[["render",qt],["__scopeId","data-v-684079ce"]]);export{Qt as default};
