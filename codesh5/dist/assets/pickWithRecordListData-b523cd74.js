import"./el-tag-acf0ed7e.js";import{v as Z}from"./el-loading-0b61243c.js";import{E as B}from"./el-overlay-d38babd4.js";import{E as z,a as Q}from"./el-table-column-b4960c42.js";import"./el-popper-8f138f0c.js";import{_ as j,D as W,u as X,r as c,a as J,o as K,t as S,gj as q,b as I,c as $,d as t,i as n,K as U,e as y,w as k,aa as V,F as ee,O as te,P as E,N as oe,p as le,h as ae}from"./index-703aaad1.js";/* empty css              */import{g as ie,d as ne,a as se}from"./pickWithRecordQuery-baf359c0.js";import{_ as x}from"./btn_fanhui1-37aac388.js";import{_ as re}from"./btn_tichu-bca5bbb8.js";import{a as R,s as ce}from"./function-call-60d2426a.js";import"./use-global-config-3a66211f.js";import"./objects-1d7d6bfe.js";import"./index-5f02ee64.js";const de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA8CAYAAADRy2JxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjlEN0M4NzUwNUU5MTFFQUJFM0RFQTM1MEQ3QTRDRjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjlEN0M4NzYwNUU5MTFFQUJFM0RFQTM1MEQ3QTRDRjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOUQ3Qzg3MzA1RTkxMUVBQkUzREVBMzUwRDdBNENGNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOUQ3Qzg3NDA1RTkxMUVBQkUzREVBMzUwRDdBNENGNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhTaGmQAAAKMSURBVHja7Jq7SxxBHMd3Tz0QUSysLHwgYkDEJpVFNFhYaCFqYyUpBLEQ/AOEiDapok2w8P6As0tIIShYXiOo+MQXAUUl+IT4Or3bfAd/h8vieTu3r/H8/eAD59zN7H6c387OzK5uGIb2XkNneZZneZZn+efoBCOgDCRf+D4E8sFv8BUcm777CL6DijR104Vo8w8YAium8nIwBtpAIk2bOjgEo2Du1aMI+QysGPajz1L3p+Esopb2BiTqxjK5hWz0QqnN3joFJ5ayTXCfZVbegS1L2V9wabN+qRtpvw+q6XMcLIJlSs1UiopGZin1H011i8AgqKHfyKT9NvgBbk3lYdADPlPap9pM0jE+gUIqWwMNTtN+35RKu6DCRp0gKAbrpnNddSPtzXEODhQdvOOEVHrJxCON7CpGWNZHVl7Ppft8SHvHwfIsz/Isz/Isn+Ph1mytEbTTQibpcWf9owXUqgryYqNiEjT72Gkt4As4CjrtxQ5Prc8Z+0Fin8HTnt8A30AfnVDCQ+k8cAEiYE8FebHjMkXXYVhy00I2dNoZOrBsmgQ64MVpx4dvdSzP8izP8rk8vU1Ndgp9uNXdgDNV5EX29IJuUOLD3P4KRMGMCvL1YBxU+Zix4phLYCfoa/6GVlp+xjXNLAPveTHHFo+SO3yc2//SXHhy5NaAtwBioMCHAS+uZf/k17PR/s6NVOT7PMuzPMuzPMuzfGDyhscLFyfxIHtuduR1y6QooXBHhtOcd9YzPPM/SLzrFqHppUrv54gOqbSsLDO62XkJcR60vsFLehr0O5VvoVVU8RsSF2v9Lu3p5WVH8iK9m8AwqKO/DUWv+XvK1AnNxkNMft+e5Vme5Vme5XM8/gswAHLRRWx4YfPzAAAAAElFTkSuQmCC";const pe={setup(){W();const h=X(),i=c([]),C=J(),o=c(""),_=c(!0),A=c(null),b=c(""),e=c(!0),f=c(null),v=c([]),m=c(20),u=c(0),s=c(!0),F=c(!1);let T="";K(()=>{let l=document.body.scrollHeight-170;o.value="height:"+l+"px",T=S(C.state.pickWithRecordQuery)});const L=()=>{s.value&&(u.value=u.value+1,w())},H=()=>{h.push({path:"/pickWithRecordQuery"})};let d="";const G=(l,r,a)=>{d=S(l)},O=()=>{if(d)F.value=!0,setTimeout(()=>{let l=document.body.scrollHeight-180;b.value="height:"+l+"px",e.value=!0;let r={pickno:d.F_PICKNO};ie(r).then(a=>{v.value=a.data.data,e.value=!1})},200);else return R({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择一条数据</span>'}).then(()=>{}),!1},Y=()=>{if(d){if(d.F_PICKSTATE!=0)return R({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">已装车，不能删除</span>'}).then(()=>{}),!1;ce({title:"提示",width:"600",allowHtml:!0,message:'<p style="font-size: 18px"><span>确定删除车号为</span><span style="color: red;font-weight: bolder">'+d.F_TRUCKNO+"</span><span>的记录？</span></p>"}).then(()=>{te({duration:0,forbidClick:!0,className:"particulars-detail-popup",overlay:!0,message:"撤销中..."});let l={};l.F_PICKNO=d.F_PICKNO,l.F_SUTTLE=d.F_SUTTLE,l.F_DELIVERYNO=d.F_DELIVERYNO,ne(l).then(r=>{E(),R({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+r.data.message+"</span>"}).then(()=>{u.value=1,i.value=[],A.value.setScrollTop(0),w()})}).catch(r=>{console.log(r),E()})}).catch(l=>{console.log(l),E()})}else return R({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择一条数据</span>'}).then(()=>{}),!1},w=()=>{d="",_.value=!0;let l={},r={},a={};a.limit=m.value,a.offset=u.value,a.blockId="paramBlock",a.data=T,r.paramBlock=a,l.blocks=r,se(l).then(p=>{i.value=[...i.value,...p.data.blocks.resultBlock.data],i.value.length==p.data.blocks.resultBlock.total&&(s.value=!1),_.value=!1})},P=(l,r,a,p)=>typeof a>"u"?"":M("YYYY-mm-dd",a),M=(l,r)=>{let a,p=new Date(r);const D={"Y+":p.getFullYear().toString(),"m+":(p.getMonth()+1).toString(),"d+":p.getDate().toString(),"H+":p.getHours().toString(),"M+":p.getMinutes().toString(),"S+":p.getSeconds().toString()};for(let N in D)a=new RegExp("("+N+")").exec(l),a&&(l=l.replace(a[1],a[1].length==1?D[N]:D[N].padStart(a[1].length,"0")));return l};return{tableHeightInfo:b,loadingInfo:e,tableRefInfo:f,tableDataInfo:v,tableData:i,tableRef:A,loading:_,tableHeight:o,limit:m,offset:u,continuation:s,centerDialogVisible:F,scrollBehavior:L,formatDate:P,dateFormat:M,onDelete:Y,onClickLeft:H,selectRow:G,showDetail:O,queryData:w}}},g=h=>(le("data-v-c9065176"),h=h(),ae(),h),ge={class:"btn-area"},ue=g(()=>n("img",{src:x},null,-1)),he=g(()=>n("div",null,"返回",-1)),me=[ue,he],_e=g(()=>n("img",{src:re},null,-1)),be=g(()=>n("div",null,"删除",-1)),fe=[_e,be],ve=g(()=>n("img",{src:de},null,-1)),Re=g(()=>n("div",null,"明细",-1)),Ae=[ve,Re],we={id:"contentInfo"},De={class:"btn-area"},Ne=g(()=>n("img",{src:x},null,-1)),Ie=g(()=>n("div",null,"返回",-1)),ke=[Ne,Ie];function Ee(h,i,C,o,_,A){const b=oe,e=Q,f=z,v=B,m=Z,u=q("el-table-infinite-scroll");return I(),$(ee,null,[t(b,{title:"拣配单查询结果",class:"page-nav-bar","left-arrow":"",onClickLeft:o.onClickLeft},null,8,["onClickLeft"]),n("div",null,[U((I(),y(f,{data:o.tableData,ref:"tableRef",style:V(o.tableHeight),"element-loading-text":"数据加载中...","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:o.selectRow},{default:k(()=>[t(e,{fixed:"",prop:"F_PICKDATE",label:"拣配日期",width:"100px",formatter:o.formatDate},null,8,["formatter"]),t(e,{prop:"F_TRUCKNO",label:"车号",width:"100px"}),t(e,{prop:"F_RECIVE",label:"收货单位",width:"100px"}),t(e,{prop:"F_PICKSTATE_NAME",label:"拣配状态",width:"100px"}),t(e,{prop:"F_CONTRACT",label:"合同号"}),t(e,{prop:"F_DELIVERYNO",label:"发货单号",width:"110px"}),t(e,{prop:"F_RECIVE",label:"收货单位",width:"100px"}),t(e,{prop:"F_PRODUCTCODE",label:"产品编码",width:"110px"}),t(e,{prop:"F_PRODUCTNAME",label:"产品名称",width:"100px"}),t(e,{prop:"F_BATCHGROUP",label:"批次号",width:"100px"}),t(e,{prop:"F_UNIT",label:"计量单位",width:"90px"}),t(e,{prop:"F_SUTTLE",label:"重量"}),t(e,{prop:"F_COUNT",label:"数量"}),t(e,{prop:"F_STORENAME",label:"仓库"}),t(e,{prop:"F_CONTENT",label:"备注"}),t(e,{prop:"F_PICKPERSON",label:"拣配人"})]),_:1},8,["data","style","onRowClick"])),[[m,o.loading],[u,o.scrollBehavior]]),n("div",ge,[n("div",{onClick:i[0]||(i[0]=(...s)=>o.onClickLeft&&o.onClickLeft(...s))},me),n("div",{onClick:i[1]||(i[1]=(...s)=>o.onDelete&&o.onDelete(...s))},fe),n("div",{onClick:i[2]||(i[2]=(...s)=>o.showDetail&&o.showDetail(...s))},Ae)])]),t(v,{class:"elDialogInfo",modelValue:o.centerDialogVisible,"onUpdate:modelValue":i[4]||(i[4]=s=>o.centerDialogVisible=s),"destroy-on-close":!0,"show-close":!1,title:"拣配单明细",fullscreen:"","align-center":""},{default:k(()=>[n("div",we,[U((I(),y(f,{data:o.tableDataInfo,ref:"tableRefInfo",style:V(o.tableHeightInfo),"element-loading-text":"数据加载中...","element-loading-background":"rgba(122, 122, 122, 0.8)"},{default:k(()=>[t(e,{fixed:"",prop:"F_PICKNO",label:"拣配单号",width:"110px"}),t(e,{prop:"F_BATCHGROUP",label:"批次号"}),t(e,{prop:"F_BATCHNUMBER",label:"批次编码",width:"110px"}),t(e,{prop:"F_SUTTLE",label:"重量"}),t(e,{prop:"F_BLOCKS",label:"块数"}),t(e,{prop:"F_UNIT",label:"计量单位",width:"110px"})]),_:1},8,["data","style"])),[[m,o.loadingInfo]]),n("div",De,[n("div",{onClick:i[3]||(i[3]=s=>o.centerDialogVisible=!1),style:{margin:"0 auto"}},ke)])])]),_:1},8,["modelValue"])],64)}const Pe=j(pe,[["render",Ee],["__scopeId","data-v-c9065176"]]);export{Pe as default};
