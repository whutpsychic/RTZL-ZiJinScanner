import"./el-tag-9e3a0ffc.js";import{v as V}from"./el-loading-9c2e00f9.js";import{_ as W,r as s,a as z,u as j,o as q,b as F,c as A,d as l,i as n,w as D,L as U,e as G,ab as P,F as Z,t as J,N as K,a3 as O,a4 as X,C as $,fZ as ee,a2 as te,p as oe,h as ae}from"./index-b858ed87.js";import{E as ne,a as le}from"./el-table-column-83656449.js";import"./el-popper-b0a8955c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as se}from"./pickWith-4f6cdbbc.js";import{_ as ie}from"./btn_chaxun1-d052ddc6.js";import{_ as re,a as ce}from"./btn_shoudong-07961c15.js";import{a as M}from"./function-call-0c592813.js";import"./use-global-config-8ad95f1f.js";import"./objects-80741298.js";let T=new Date,de=parseInt(T.getFullYear()-1),me=parseInt(T.getMonth()),ue=parseInt(T.getDate()),N="";const he={mounted(){N=this.$refs.formRef},setup(){const i=s(""),t=s(""),c=s(""),e=s(""),d=z(),S=s(!1),_=j(),v=s([]),w=s(""),m=s(!0),b=s(null),u=`
                    <path class="path" d="
                      M 30 15
                      L 28 17
                      M 25.61 25.61
                      A 15 15, 0, 0, 1, 15 30
                      A 15 15, 0, 1, 1, 27.99 7.5
                      L 15 15
                    " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>`;q(()=>{t.value=g("YYYY-mm-dd",new Date(new Date().getTime()-24*60*60*1e3)),c.value=g("YYYY-mm-dd",new Date);let o=document.body.scrollHeight-260;w.value="height:"+o+"px",i.value=t.value+"至"+c.value,setTimeout(()=>{I()},0)});const C=(o,p)=>J(o).pizhong.toFixed(4),k=o=>{const[p,r]=o;S.value=!1,t.value=g("YYYY-mm-dd",p),c.value=g("YYYY-mm-dd",r),i.value=`${t.value}至${c.value}`},Y=()=>{_.push({path:"/pickWithQueryInfoData"})},a=()=>{N.submit()};let y={};const H=()=>{I()};let x="";const Q=(o,p,r)=>{e.value=o.chehao,x=o},B=()=>{x?(d.commit("setCarInfo",x),d.commit("setScandList",[]),d.commit("setScandCalculateData",{}),_.push({name:"pickWithQueryInfoData"})):M({title:"提示",width:"600",message:"请选择车号"}).then(()=>{})},E=()=>{if(e.value){let o={chehao:e.value,danjuhao:"",chengfang:"",pizhong:0,DataId:""};d.commit("setCarInfo",o),d.commit("setScandList",[]),d.commit("setScandCalculateData",{}),_.push({name:"pickWithQueryInfoData"})}else M({title:"提示",width:"600",message:"请手工录入车号"}).then(()=>{})},I=()=>{m.value=!0,e.value="",b.value.setScrollTop(0),y.startDate=t.value+" 00:00:00",y.endDate=c.value+" 23:59:59",se(y).then(o=>{v.value=o.data.data,m.value=!1})},g=(o,p)=>{let r,h=new Date(p);const R={"Y+":h.getFullYear().toString(),"m+":(h.getMonth()+1).toString(),"d+":h.getDate().toString(),"H+":h.getHours().toString(),"M+":h.getMinutes().toString(),"S+":h.getSeconds().toString()};for(let L in R)r=new RegExp("("+L+")").exec(o),r&&(o=o.replace(r[1],r[1].length==1?R[L]:R[L].padStart(r[1].length,"0")));return o};return{deDate:[new Date(new Date().getTime()-24*60*60*1e3),new Date],minDate:new Date(de,me,ue),show:S,dataText:i,startDate:t,endDate:c,tableData:v,tableRef:b,svg:u,loading:m,tableHeight:w,formatter:C,onClickLeft:Y,onConfirm:k,onSubmit:H,onQuery:a,queryData:I,selectRow:Q,confirmSelect:B,dateFormat:g,handleConfirmSelect:E,chehao:e}}},f=i=>(oe("data-v-775f83f0"),i=i(),ae(),i),fe={class:"table-content container"},_e={class:"btn-area"},ge=f(()=>n("img",{src:ie},null,-1)),pe=f(()=>n("div",null,"查询",-1)),ve=[ge,pe],we=f(()=>n("img",{src:re},null,-1)),be=f(()=>n("div",null,"确认",-1)),De=[we,be],Se=f(()=>n("img",{src:ce},null,-1)),Ce=f(()=>n("div",null,"手动确认",-1)),ke=[Se,Ce];function Ye(i,t,c,e,d,S){const _=K,v=$,w=ee,m=O,b=X,u=le,C=ne,k=te,Y=V;return F(),A(Z,null,[l(_,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),n("div",fe,[l(b,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:D(()=>[l(m,{inset:""},{default:D(()=>[l(v,{title:"选择日期：","title-style":"max-width: 25%",value:e.dataText,onClick:t[0]||(t[0]=a=>e.show=!0)},null,8,["value"]),l(w,{show:e.show,"onUpdate:show":t[1]||(t[1]=a=>e.show=a),"min-date":e.minDate,"default-date":e.deDate,type:"range","allow-same-day":"",onConfirm:e.onConfirm},null,8,["show","min-date","default-date","onConfirm"])]),_:1})]),_:1},8,["onSubmit"]),U((F(),G(C,{ref:"tableRef",data:e.tableData,id:"data-area",style:P([e.tableHeight,{width:"100%"}]),"highlight-current-row":"","element-loading-text":"数据加载中...","element-loading-spinner":e.svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:e.selectRow},{default:D(()=>[l(u,{fixed:"",prop:"chehao",label:"车号"}),l(u,{prop:"danjuhao",label:"单据号",width:"130"}),l(u,{prop:"chengfang",label:"秤房"}),l(u,{prop:"pizhong",label:"皮重",formatter:e.formatter},null,8,["formatter"])]),_:1},8,["data","style","element-loading-spinner","onRowClick"])),[[Y,e.loading]]),n("div",null,[l(m,{inset:""},{default:D(()=>[l(k,{class:"chehao",modelValue:e.chehao,"onUpdate:modelValue":t[2]||(t[2]=a=>e.chehao=a),label:"车牌号",placeholder:""},null,8,["modelValue"])]),_:1}),n("div",_e,[n("div",{onClick:t[3]||(t[3]=(...a)=>e.onQuery&&e.onQuery(...a))},ve),n("div",{onClick:t[4]||(t[4]=(...a)=>e.confirmSelect&&e.confirmSelect(...a))},De),n("div",{onClick:t[5]||(t[5]=(...a)=>e.handleConfirmSelect&&e.handleConfirmSelect(...a))},ke)])])])],64)}const ze=W(he,[["render",Ye],["__scopeId","data-v-775f83f0"]]);export{ze as default};
