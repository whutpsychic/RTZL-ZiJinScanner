import"./el-tag-917e96a8.js";import{v as V}from"./el-loading-f21dbb2f.js";import{_ as W,r as s,a as z,u as j,o as q,b as F,c as A,d as l,i as n,w as D,L as U,e as G,a9 as P,F as X,t as J,N as K,a1 as O,a2 as Z,C as $,fX as ee,a0 as te,p as ae,h as oe}from"./index-7129c5de.js";import{E as ne,a as le}from"./el-table-column-ca63614e.js";import"./el-popper-08cae5f5.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as se}from"./pickWith-e453961e.js";import{_ as ie}from"./btn_chaxun1-d052ddc6.js";import{_ as re,a as ce}from"./btn_shoudong-07961c15.js";import{a as M}from"./function-call-82e7a3c0.js";import"./use-global-config-f89850f5.js";import"./objects-7d31d301.js";let T=new Date,de=parseInt(T.getFullYear()-1),me=parseInt(T.getMonth()),ue=parseInt(T.getDate()),N="";const he={mounted(){N=this.$refs.formRef},setup(){const i=s(""),t=s(""),c=s(""),e=s(""),d=z(),S=s(!1),f=j(),v=s([]),w=s(""),m=s(!0),b=s(null),u=`
                    <path class="path" d="
                      M 30 15
                      L 28 17
                      M 25.61 25.61
                      A 15 15, 0, 0, 1, 15 30
                      A 15 15, 0, 1, 1, 27.99 7.5
                      L 15 15
                    " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>`;q(()=>{t.value=g("YYYY-mm-dd",new Date(new Date().getTime()-24*60*60*1e3)),c.value=g("YYYY-mm-dd",new Date);let a=document.body.scrollHeight-260;w.value="height:"+a+"px",i.value=t.value+"至"+c.value,setTimeout(()=>{I()},0)});const C=(a,p)=>J(a).pizhong.toFixed(4),k=a=>{const[p,r]=a;S.value=!1,t.value=g("YYYY-mm-dd",p),c.value=g("YYYY-mm-dd",r),i.value=`${t.value}至${c.value}`},Y=()=>{f.push({path:"/pickWithQueryInfoData"})},o=()=>{N.submit()};let y={};const H=()=>{I()};let x="";const Q=(a,p,r)=>{e.value=a.chehao,x=a},B=()=>{x?(d.commit("setCarInfo",x),d.commit("setScandList",[]),d.commit("setScandCalculateData",{}),f.push({name:"pickWithQueryInfoData"})):M({title:"提示",width:"600",message:"请选择车号"}).then(()=>{})},E=()=>{if(e.value){let a={chehao:e.value,danjuhao:"",chengfang:"",pizhong:0,DataId:""};d.commit("setCarInfo",a),d.commit("setScandList",[]),d.commit("setScandCalculateData",{}),f.push({name:"pickWithQueryInfoData"})}else M({title:"提示",width:"600",message:"请手工录入车号"}).then(()=>{})},I=()=>{m.value=!0,e.value="",b.value.setScrollTop(0),y.startDate=t.value+" 00:00:00",y.endDate=c.value+" 23:59:59",se(y).then(a=>{v.value=a.data.data,m.value=!1})},g=(a,p)=>{let r,h=new Date(p);const R={"Y+":h.getFullYear().toString(),"m+":(h.getMonth()+1).toString(),"d+":h.getDate().toString(),"H+":h.getHours().toString(),"M+":h.getMinutes().toString(),"S+":h.getSeconds().toString()};for(let L in R)r=new RegExp("("+L+")").exec(a),r&&(a=a.replace(r[1],r[1].length==1?R[L]:R[L].padStart(r[1].length,"0")));return a};return{deDate:[new Date(new Date().getTime()-24*60*60*1e3),new Date],minDate:new Date(de,me,ue),show:S,dataText:i,startDate:t,endDate:c,tableData:v,tableRef:b,svg:u,loading:m,tableHeight:w,formatter:C,onClickLeft:Y,onConfirm:k,onSubmit:H,onQuery:o,queryData:I,selectRow:Q,confirmSelect:B,dateFormat:g,handleConfirmSelect:E,chehao:e}}},_=i=>(ae("data-v-685af34d"),i=i(),oe(),i),_e={class:"table-content container"},fe={class:"btn-area"},ge=_(()=>n("img",{src:ie,alt:""},null,-1)),pe=_(()=>n("div",null,"查询",-1)),ve=[ge,pe],we=_(()=>n("img",{src:re,alt:""},null,-1)),be=_(()=>n("div",null,"确认",-1)),De=[we,be],Se=_(()=>n("img",{src:ce,alt:""},null,-1)),Ce=_(()=>n("div",null,"手动确认",-1)),ke=[Se,Ce];function Ye(i,t,c,e,d,S){const f=K,v=$,w=ee,m=O,b=Z,u=le,C=ne,k=te,Y=V;return F(),A(X,null,[l(f,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),n("div",_e,[l(b,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:D(()=>[l(m,{inset:""},{default:D(()=>[l(v,{title:"选择日期：","title-style":"max-width: 25%",value:e.dataText,onClick:t[0]||(t[0]=o=>e.show=!0)},null,8,["value"]),l(w,{show:e.show,"onUpdate:show":t[1]||(t[1]=o=>e.show=o),"min-date":e.minDate,"default-date":e.deDate,type:"range","allow-same-day":"",onConfirm:e.onConfirm},null,8,["show","min-date","default-date","onConfirm"])]),_:1})]),_:1},8,["onSubmit"]),U((F(),G(C,{ref:"tableRef",data:e.tableData,id:"data-area",style:P([e.tableHeight,{width:"100%"}]),"highlight-current-row":"","element-loading-text":"数据加载中...","element-loading-spinner":e.svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:e.selectRow},{default:D(()=>[l(u,{fixed:"",prop:"chehao",label:"车号"}),l(u,{prop:"danjuhao",label:"单据号",width:"130"}),l(u,{prop:"chengfang",label:"秤房"}),l(u,{prop:"pizhong",label:"皮重",formatter:e.formatter},null,8,["formatter"])]),_:1},8,["data","style","element-loading-spinner","onRowClick"])),[[Y,e.loading]]),n("div",null,[l(m,{inset:""},{default:D(()=>[l(k,{class:"chehao",modelValue:e.chehao,"onUpdate:modelValue":t[2]||(t[2]=o=>e.chehao=o),label:"车牌号",placeholder:""},null,8,["modelValue"])]),_:1}),n("div",fe,[n("div",{onClick:t[3]||(t[3]=(...o)=>e.onQuery&&e.onQuery(...o))},ve),n("div",{onClick:t[4]||(t[4]=(...o)=>e.confirmSelect&&e.confirmSelect(...o))},De),n("div",{onClick:t[5]||(t[5]=(...o)=>e.handleConfirmSelect&&e.handleConfirmSelect(...o))},ke)])])])],64)}const ze=W(he,[["render",Ye],["__scopeId","data-v-685af34d"]]);export{ze as default};
