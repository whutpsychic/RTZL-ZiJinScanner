import"./el-tag-56496b10.js";import{E as O}from"./el-overlay-0ca9246d.js";import{_ as G,k as Z,p as v,Z as K,q as W,s as X,x as o,y as h,F as t,a as p,z as c,H,a1 as M,A as D,G as l,N as u,C as y,a6 as $,a2 as tt,D as at,E as et}from"./index-7ad4752d.js";import{C as ot,R as lt}from"./index-3d4c7514.js";import{D as nt,E as it,a as st,I as rt}from"./el-card-60d3f957.js";/* empty css              */import"./index-1c65cf2d.js";import{F as dt}from"./index-f4c47f9e.js";import{q as ct,S as yt,L as mt,T as ut}from"./qualityCheckingRecord-2029681a.js";import{a as ft,E as pt}from"./el-select-ab6db4a7.js";import"./el-popper-6266427f.js";import{N as ht}from"./index-d7f0187b.js";import{r as T,b as q}from"./request-352f5424.js";import{f as _t}from"./gradeDetermination-dde8d4d8.js";import{s as Q}from"./index-6a3a1558.js";import{s as Dt}from"./function-call-63bccc74.js";import"./index-22004baa.js";import"./use-global-config-98ac7746.js";import"./objects-8d85df12.js";import"./mount-component-b771f396.js";import"./index-84d329ed.js";import"./use-id-c21c8892.js";import"./use-tab-status-ed012240.js";import"./index-4e11758a.js";function gt(g){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:g})}function bt(g){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:g})}const It={setup(){const g=Z(),n=v(""),z=v(!1),a=v(""),B=v(""),P=v(!1),r=K({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[],yjtJyInformationDecideData:{},filePathList:[]}),w=v(!1),U=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=v(!1),_=v(!1),b=v("0"),Y=v(10),k=v(0);W(()=>{X.register("goback",()=>{w.value?w.value=!1:g.push({path:"/home"})}),k.value=1,J({batchnumber:n.value,status:b.value})});const N=()=>{g.back()},E=()=>{k.value=k.value+1,J({batchnumber:n.value,status:b.value})},R=s=>{r.auditorListData=[],k.value=1,_.value=!1,J({batchnumber:s,status:b.value})},x=s=>{r.auditorListData=[],k.value=1,_.value=!1,J({batchnumber:s,status:b.value})},F=s=>{let d={yjtJyInformationId:s.yjtJyInformationId,status:"2"};V(d),r.yjtJyInformationDetails=s,r.yjtJyInformationDetails.exterior!="0"&&L(r.yjtJyInformationDetails.yjtJyInformationDetailsId)},A=s=>{r.filePathList=[],r.filePathList=s,z.value=!0},J=s=>{S.value=!0;let d={},m={},f={};f.limit=Y.value,f.offset=k.value,f.blockId="paramBlock",f.data=s,m.paramBlock=f,d.blocks=m,gt(d).then(I=>{r.auditorListData=[...r.auditorListData,...I.data.blocks.resultBlock.data],S.value=!1,r.auditorListData.length==I.data.blocks.resultBlock.total&&(_.value=!0);let j=document.body.scrollHeight-180;B.value="height:"+j+"px"}).catch(I=>{console.log(I)})},e=s=>{if(a.value=="")return Q({message:"请填写审核内容",type:"fail",overlay:!0,className:"particulars-detail-popup"}),!1;let d={},m={},f={},I={};d.id=r.yjtJyInformationDetails.id,d.yjtJyInformationId=r.yjtJyInformationDetails.yjtJyInformationId,d.yjtJyInformationDetailsId=r.yjtJyInformationDetails.yjtJyInformationDetailsId,d.auditorContent=a.value,d.status=s,I.data=d,f.paramBlock=I,m.blocks=f;let j="";s=="1"?j="驳回":j="通过",Dt({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否'+j+"这条数据？</span>"}).then(()=>{bt(m).then(C=>{C.data.status=="0"&&(Q({message:C.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),r.auditorListData=[],w.value=!1,J({batchnumber:n.value,status:b.value}))}).catch(C=>{console.log(C)})}).catch(C=>{console.log(C)})},L=s=>{let d={};d.yjtJyInformationDetailsId=s,_t(d).then(m=>{r.yjtJyInformationFileList=m.data.data}).catch(m=>{console.log(m)})},V=s=>{ct(s).then(d=>{let m={},f=r.yjtJyInformationDetails.status;f=="0"||f=="1"?m=d.data.data[0]:m=d.data.data[1],r.yjtJyInformationDecideData=m,w.value=!0}).catch(d=>{console.log(d)})};return{elDialogHeight:B,state:P,listData:r,showImage:z,auditorContent:a,centerDialogVisible:w,searchValue:n,loading:S,finished:_,limit:Y,offset:k,status:b,options:U,listData:r,onClickLeft:N,onLoad:E,getFileQuery:L,getAuditorDataQuery:J,statusChange:R,dateFormat:(s,d)=>{let m,f=new Date(d);const I={"Y+":f.getFullYear().toString(),"m+":(f.getMonth()+1).toString(),"d+":f.getDate().toString(),"H+":f.getHours().toString(),"M+":f.getMinutes().toString(),"S+":f.getSeconds().toString()};for(let j in I)m=new RegExp("("+j+")").exec(s),m&&(s=s.replace(m[1],m[1].length==1?I[j]:I[j].padStart(m[1].length,"0")));return s},onSearch:x,auditingDetails:F,seeImg:A,cathodeCopperAuditorClick:e,getQualityCheckingRecordDecide:V}}},i=g=>(at("data-v-83935840"),g=g(),et(),g),vt={class:"header"},kt={style:{display:"flex","background-color":"#ffffff"}},jt={class:"content"},Jt={style:{padding:"0px 5px 5px 5px"}},wt=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),xt=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ct=i(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),St=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Lt={key:0,style:{"font-weight":"bold"}},Vt={style:{color:"#bbbbbb"}},Yt={style:{float:"right",color:"#bbbbbb"}},Nt=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Ft=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ht=i(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Mt=i(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),zt=i(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Bt=i(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Ut=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Et={key:3,style:{"font-weight":"bold"}},Rt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),At=i(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Pt={key:0},Qt=i(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Tt={key:1},qt=i(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),Ot={key:2},Gt=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Zt={key:3,style:{"font-weight":"bold"}},Kt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Wt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Xt=i(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),$t={key:0},ta=i(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),aa={key:0,style:{"margin-top":"15px"}},ea=i(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),oa=i(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),la=i(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),na=i(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),ia={key:1},sa={key:0,style:{"margin-top":"30px"}};function ra(g,n,z,a,B,P){const r=ht,w=yt,U=pt,S=ft,_=ut,b=nt,Y=it,k=mt,N=st,E=dt,R=rt,x=ot,F=tt,A=lt,J=O;return o(),h("main",null,[t("div",vt,[p(r,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",kt,[p(w,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":n[0]||(n[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),p(S,{modelValue:a.status,"onUpdate:modelValue":n[1]||(n[1]=e=>a.status=e),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:c(()=>[(o(!0),h(H,null,M(a.options,e=>(o(),D(U,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",jt,[p(k,{loading:a.loading,"onUpdate:loading":n[2]||(n[2]=e=>a.loading=e),"immediate-check":!1,finished:a.finished,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",Jt,[(o(!0),h(H,null,M(a.listData.auditorListData,(e,L)=>(o(),D(Y,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:V=>a.auditingDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[wt,t("span",null,l(e.batchnumber),1)]),t("p",null,[xt,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1)]),t("p",null,[Ct,t("span",null,l(e.standard),1)]),t("p",null,[St,t("span",null,l(e.exteriorName),1),u("    "),e.exterior!="0"?(o(),h("span",Lt,"类型：")):y("",!0),t("span",null,l(e.dictName),1)]),t("p",null,[e.status=="0"?(o(),D(_,{key:0,type:"primary",size:"large"},{default:c(()=>[u("未审核")]),_:1})):y("",!0),e.status=="1"?(o(),D(_,{key:1,type:"danger",size:"large"},{default:c(()=>[u("驳回")]),_:1})):y("",!0),e.status=="2"?(o(),D(_,{key:2,type:"success",size:"large"},{default:c(()=>[u("审核通过")]),_:1})):y("",!0)]),p(b,{style:{color:"#c8c8c8"}}),t("span",Vt,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.checkoutDate)),1),t("span",Yt,l(e.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),p(J,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":n[9]||(n[9]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:c(()=>[t("div",{style:$([{padding:"15px","overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[u("基本信息")]),_:1}),t("p",null,[Nt,t("span",null,l(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Ft,t("span",null,l(parseFloat(a.listData.yjtJyInformationDetails.suttle))+l(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Ht,t("span",null,l(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Mt,t("span",null,l(a.listData.yjtJyInformationDetails.suttleperson),1),u("     "),zt,t("span",null,l(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[Bt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[u("历史质检信息")]),_:1}),t("div",null,[t("p",null,[Ut,a.listData.yjtJyInformationDecideData.details.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[u("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[u("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[u("不合格 ")]),_:1})):y("",!0),u("      "),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("span",Et,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDecideData.details.dictName),1)]),t("p",null,[Rt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDecideData.details.checkoutDate)),1)]),t("p",null,[At,t("span",null,l(a.listData.yjtJyInformationDecideData.details.checkoutUser),1)]),a.listData.yjtJyInformationDecideData.details.alterReason?(o(),h("p",Pt,[Qt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.alterReason),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.remarks?(o(),h("p",Tt,[qt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.remarks),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("div",Ot,[(o(!0),h(H,null,M(a.listData.yjtJyInformationDecideData.fileList,(e,L)=>(o(),D(N,{style:{margin:"0 2%"},onClick:n[3]||(n[3]=V=>a.seeImg(a.listData.yjtJyInformationDecideData.fileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0)])]),t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[u("审核的质检信息")]),_:1}),t("p",null,[Gt,a.listData.yjtJyInformationDetails.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[u("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[u("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[u("不合格 ")]),_:1})):y("",!0),u("    "),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("span",Zt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Kt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Wt,t("span",null,l(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[Xt,t("span",null,l(a.listData.yjtJyInformationDetails.alterReason),1)]),a.listData.yjtJyInformationDetails.remarks?(o(),h("p",$t,[ta,t("span",null,l(a.listData.yjtJyInformationDetails.remarks),1)])):y("",!0)]),a.listData.yjtJyInformationDetails.status!="0"?(o(),h("div",aa,[t("p",null,[ea,t("span",null,l(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),u("     "),oa,t("span",null,l(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[la,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[na,t("span",null,l(a.listData.yjtJyInformationDetails.auditorContent),1)])])):y("",!0),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("div",ia,[(o(!0),h(H,null,M(a.listData.yjtJyInformationFileList,(e,L)=>(o(),D(N,{style:{margin:"0 2%"},onClick:n[4]||(n[4]=V=>a.seeImg(a.listData.yjtJyInformationFileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0),a.listData.yjtJyInformationDetails.status=="0"?(o(),D(E,{key:2,modelValue:a.auditorContent,"onUpdate:modelValue":n[5]||(n[5]=e=>a.auditorContent=e),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):y("",!0)]),p(R,{show:a.showImage,"onUpdate:show":n[6]||(n[6]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(o(),h("div",sa,[p(A,null,{default:c(()=>[p(x,{span:"2"}),p(x,{span:"10"},{default:c(()=>[p(F,{icon:"close",type:"danger",style:{width:"90%"},onClick:n[7]||(n[7]=e=>a.cathodeCopperAuditorClick("1"))},{default:c(()=>[u("驳回 ")]),_:1})]),_:1}),p(x,{span:"10"},{default:c(()=>[p(F,{icon:"passed",type:"success",style:{width:"90%"},onClick:n[8]||(n[8]=e=>a.cathodeCopperAuditorClick("2"))},{default:c(()=>[u("通过 ")]),_:1})]),_:1}),p(x,{span:"2"})]),_:1})])):y("",!0)],4)]),_:1},8,["modelValue"])])}const Fa=G(It,[["render",ra],["__scopeId","data-v-83935840"]]);export{Fa as default};
