System.register(["./index-legacy-48e23aa3.js","./el-card-legacy-8195b03e.js","./index-legacy-2f76a666.js","./el-tag-legacy-e961511b.js","./el-select-legacy-69048b65.js","./el-popper-legacy-95cfe048.js","./index-legacy-d1883c5a.js","./index-legacy-eda59a38.js","./gradeDetermination-legacy-fc2ae81c.js","./index-legacy-776ca772.js"],(function(e,a){"use strict";var l,o,t,n,i,r,d,s,c,u,v,p,g,m,h,b,f,y,_,k,w,x,I,C,D,j,L,J,S,F,R,U,z,P,N,B;return{setters:[e=>{l=e._,o=e.u,t=e.I,n=e.r,i=e.J,r=e.f,d=e.o,s=e.b,c=e.c,u=e.j,v=e.d,p=e.w,g=e.s,m=e.N,h=e.X,b=e.S,f=e.U,y=e.k,_=e.F,k=e.O,w=e.e,x=e.g,I=e.Y,C=e.a3,D=e.a4,j=e.a0,L=e.a1,J=e.p,S=e.i},e=>{F=e.E},null,null,e=>{R=e.E,U=e.a},null,null,null,e=>{z=e.d,P=e.g,N=e.b,B=e.e},null],execute:function(){var a=document.createElement("style");function V(e){let a=e.split(","),l=a[0].match(/:(.*?);/)[1],o=atob(a[1]),t=o.length,n=new Uint8Array(t);for(;t--;)n[t]=o.charCodeAt(t);let i=Math.random().toString(36).slice(-8),r=l.split("/")[1];return new File([n],i+"."+r,{type:l})}a.textContent=".van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.header[data-v-47e57e16]{width:100%;height:46px;line-height:46px;position:absolute;z-index:5;top:0}.content[data-v-47e57e16]{width:100%;overflow:scroll;top:46px;position:absolute;z-index:10;bottom:5px}\n",document.head.appendChild(a);const Q={setup(){const e=o(),a=t(),l=n(""),s=n(""),c=n(""),u=n(""),v=n(""),p=n(""),m=n([]),h=n([]),b=n([]),f=n([]),y=n([]),_=n([]),k=n(!1),w=n(!1),x=n([]),I=i({yjtJyInformationData:{},typeCodeList:[],alterReasonList:[]});I.yjtJyInformationData=JSON.parse(decodeURIComponent(a.query.yjtJyInformation));const C=n(JSON.parse(decodeURIComponent(a.query.exterior))),D=n(JSON.parse(decodeURIComponent(a.query.tabIndex)));return r.await("takePhoto",(e=>{if("null"!=e){if("0"==p.value){let a={};a.index=m.value.length+1,a.base64Img=e,m.value.push(a),h.value.push(e);let l=new FormData,o="/cathodeCopper/"+I.yjtJyInformationData.batchgroup+"/"+I.yjtJyInformationData.batchnumber;l.append("file",V(e)),l.append("path",o),z(l).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=m.value.length,b.value.push(a)})).catch((e=>{console.log(e)}))}if("1"==p.value){let a={};a.index=f.value.length+1,a.base64Img=e,f.value.push(a),y.value.push(e);let l=new FormData,o="/cathodeCopperLabel/"+I.yjtJyInformationData.batchnumber;l.append("file",V(e)),l.append("path",o),z(l).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=f.value.length,_.value.push(a)})).catch((e=>{console.log(e)}))}}})),"1"==C.value?(l.value="qualified",s.value="合格品类型"):"2"==C.value&&(l.value="unqualified",s.value="不合格品类型"),d((()=>{!function(e){let a={};a.typeCode=e,P(a).then((e=>{200==e.data.code&&(I.typeCodeList=e.data.data,v.value=String(I.typeCodeList[0].id))})).catch((e=>{console.log(e)}))}(l.value),function(){let e={},a={},l={limit:9999,offset:1,blockId:"paramBlock",data:{}};a.paramBlock=l,e.blocks=a,N(e).then((e=>{I.alterReasonList=e.data.blocks.resultBlock.data})).catch((e=>{console.log(e)}))}()})),{imgList:x,showImage:k,showLabelImage:w,fileList:m,base64ImgList:h,imagePath:b,labelFileList:f,labelImagePath:_,takePhotoState:p,alterReason:u,remarks:c,typeCode:l,typeCodeText:s,listData:I,exterior:C,tabIndex:D,typeCodeChecked:v,seeImg:()=>{x.value=h.value,k.value=!0},seeImgBQ:()=>{x.value=y.value,k.value=!0},takePhotoZJ:()=>{p.value="0",r.takePhoto()},takePhotoBQ:()=>{p.value="1",r.takePhoto()},onClickLeft:()=>{e.back()},dateFormat:(e,a)=>{let l,o=new Date(a);const t={"Y+":o.getFullYear().toString(),"m+":(o.getMonth()+1).toString(),"d+":o.getDate().toString(),"H+":o.getHours().toString(),"M+":o.getMinutes().toString(),"S+":o.getSeconds().toString()};for(let n in t)l=new RegExp("("+n+")").exec(e),l&&(e=e.replace(l[1],1==l[1].length?t[n]:t[n].padStart(l[1].length,"0")));return e},beforeDelete:(e,a)=>{b.value=b.value.filter((a=>a.index!=e)),m.value=m.value.filter((a=>a.index!=e)),h.value=h.value.filter((e=>e!=a))},beforeDeleteBQ:(e,a)=>{_.value=_.value.filter((a=>a.index!=e)),f.value=f.value.filter((a=>a.index!=e)),y.value=y.value.filter((e=>e!=a))},conservation:()=>{if(0==b.value.length)return g({message:"请上传质检照片",type:"fail",className:"particulars-detail-popup"}),!1;if(0==D.value&&0==_.value.length)return g({message:"请上传标签照片",type:"fail",className:"particulars-detail-popup"}),!1;if(1==D.value&&!u.value)return g({message:"请选择或者填写改判理由",type:"fail",className:"particulars-detail-popup"}),!1;let a={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[],labelFileList:[]},l=[];l.push(I.yjtJyInformationData),a.data=l,a.typeCodeChecked=v.value,a.active=D.value,a.exterior=C.value,a.remarks=c.value,a.alterReason=u.value,a.fileList=b.value,a.labelFileList=_.value,B(a).then((a=>{200==a.data.code&&(g({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),e.back())})).catch((e=>{console.log(e)}))}}}},Y=e=>(J("data-v-47e57e16"),e=e(),S(),e),q={class:"container"},M={class:"header"},O={class:"content"},E=Y((()=>u("span",{style:{"font-weight":"bold"}},"编号：",-1))),H=Y((()=>u("span",{style:{"font-weight":"bold"}},"重量：",-1))),Z=Y((()=>u("span",{style:{"font-weight":"bold"}},"标准：",-1))),A=Y((()=>u("span",{style:{"font-weight":"bold"}},"计量员：",-1))),T=Y((()=>u("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),X=Y((()=>u("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),G=Y((()=>u("span",{style:{color:"red"}},"*",-1))),K=Y((()=>u("span",{style:{color:"red"}},"*",-1))),W={class:"van-uploader"},$={class:"van-uploader__wrapper"},ee={class:"van-image van-uploader__preview-image"},ae=["src"],le=["onClick"],oe=[Y((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],te=[Y((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],ne={key:0},ie=Y((()=>u("span",{style:{color:"red"}},"*",-1))),re={class:"van-uploader"},de={class:"van-uploader__wrapper"},se={class:"van-image van-uploader__preview-image"},ce=["src"],ue=["onClick"],ve=[Y((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],pe=[Y((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],ge={key:1},me=Y((()=>u("span",{style:{color:"red"}},"*",-1)));e("default",l(Q,[["render",function(e,a,l,o,t,n){const i=m,r=I,d=C,g=D,J=R,S=U,z=j,P=L,N=F,B=h,V=b;return s(),c("div",q,[u("div",M,[v(i,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:o.onClickLeft},null,8,["onClickLeft"])]),u("div",O,[v(N,{class:"box-card",shadow:"always"},{default:p((()=>[v(r,{"content-position":"left"},{default:p((()=>[f("基本信息")])),_:1}),u("div",null,[u("p",null,[E,u("span",null,y(o.listData.yjtJyInformationData.batchnumber),1)]),u("p",null,[H,u("span",null,y(parseFloat(o.listData.yjtJyInformationData.suttle))+y(o.listData.yjtJyInformationData.unit),1)]),u("p",null,[Z,u("span",null,y(o.listData.yjtJyInformationData.standard),1)]),u("p",null,[A,u("span",null,y(o.listData.yjtJyInformationData.suttleperson),1),f("     "),T,u("span",null,y(o.listData.yjtJyInformationData.scanUser),1)]),u("p",null,[X,u("span",null,y(o.dateFormat("YYYY-mm-dd HH:MM:SS",o.listData.yjtJyInformationData.proDate)),1)])]),u("div",null,[v(r,{"content-position":"left"},{default:p((()=>[G,f(y(o.typeCodeText),1)])),_:1}),v(g,{modelValue:o.typeCodeChecked,"onUpdate:modelValue":a[0]||(a[0]=e=>o.typeCodeChecked=e),direction:"horizontal"},{default:p((()=>[(s(!0),c(_,null,k(o.listData.typeCodeList,((e,a)=>(s(),w(d,{name:String(e.id)},{default:p((()=>[f(y(e.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),u("div",null,[v(r,{"content-position":"left"},{default:p((()=>[K,f(" 质检照片")])),_:1}),u("div",W,[u("div",$,[(s(!0),c(_,null,k(o.fileList,((e,l)=>(s(),c("div",{class:"van-uploader__preview",key:e.index},[u("div",ee,[u("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[1]||(a[1]=(...e)=>o.seeImg&&o.seeImg(...e))},null,8,ae)]),u("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>o.beforeDelete(e.index,e.base64Img)},oe,8,le)])))),128)),u("div",{class:"van-uploader__upload",onClick:a[2]||(a[2]=(...e)=>o.takePhotoZJ&&o.takePhotoZJ(...e))},te)])])]),0==o.tabIndex?(s(),c("div",ne,[v(r,{"content-position":"left"},{default:p((()=>[ie,f(" 标签照片")])),_:1}),u("div",re,[u("div",de,[(s(!0),c(_,null,k(o.labelFileList,((e,l)=>(s(),c("div",{class:"van-uploader__preview",key:e.index},[u("div",se,[u("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[3]||(a[3]=(...e)=>o.seeImgBQ&&o.seeImgBQ(...e))},null,8,ce)]),u("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>o.beforeDeleteBQ(e.index,e.base64Img)},ve,8,ue)])))),128)),1!=o.labelFileList.length?(s(),c("div",{key:0,class:"van-uploader__upload",onClick:a[4]||(a[4]=(...e)=>o.takePhotoBQ&&o.takePhotoBQ(...e))},pe)):x("",!0)])])])):x("",!0),1==o.tabIndex?(s(),c("div",ge,[v(r,{"content-position":"left"},{default:p((()=>[me,f("改判理由")])),_:1}),v(S,{modelValue:o.alterReason,"onUpdate:modelValue":a[5]||(a[5]=e=>o.alterReason=e),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:p((()=>[(s(!0),c(_,null,k(o.listData.alterReasonList,(e=>(s(),w(J,{key:e.alterReason,label:e.alterReason,value:e.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):x("",!0),u("div",null,[v(r,{"content-position":"left"},{default:p((()=>[f("备注")])),_:1}),v(P,{inset:""},{default:p((()=>[v(z,{modelValue:o.remarks,"onUpdate:modelValue":a[6]||(a[6]=e=>o.remarks=e),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),v(B,{type:"primary",size:"large",style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px","background-color":"#003363",color:"#FFFFFF"},onClick:o.conservation},{default:p((()=>[f("提交 ")])),_:1},8,["onClick"]),v(V,{show:o.showImage,"onUpdate:show":a[7]||(a[7]=e=>o.showImage=e),images:o.imgList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])])])}],["__scopeId","data-v-47e57e16"]]))}}}));
