System.register(["./index-legacy-d432f125.js","./el-card-legacy-318bb744.js","./index-legacy-2f76a666.js","./el-tag-legacy-3c9cedb4.js","./el-select-legacy-ca49c0db.js","./el-popper-legacy-cb65354b.js","./index-legacy-d1883c5a.js","./index-legacy-eda59a38.js","./gradeDetermination-legacy-b90226aa.js","./index-legacy-1388c7cd.js","./index-legacy-3f3b008e.js"],(function(e,a){"use strict";var o,t,l,n,r,i,d,s,c,u,v,p,g,m,h,b,y,f,_,k,w,x,C,D,I,j,J,L,S,R,F,z,U,N,V,P,q,M;return{setters:[e=>{o=e._,t=e.u,l=e.H,n=e.r,r=e.I,i=e.f,d=e.o,s=e.c,c=e.d,u=e.k,v=e.e,p=e.w,g=e.J,m=e.P,h=e.Q,b=e.N,y=e.Z,f=e.V,_=e.W,k=e.l,w=e.F,x=e.O,C=e.g,D=e.h,I=e.$,j=e.a5,J=e.a6,L=e.a2,S=e.a3,R=e.p,F=e.j},e=>{z=e.E},null,null,e=>{U=e.E,N=e.a},null,null,null,e=>{V=e.d,P=e.g,q=e.b,M=e.e},null,null],execute:function(){var a=document.createElement("style");a.textContent=".van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.header[data-v-48e7a5ac]{width:100%;height:58px;line-height:58px;position:absolute;z-index:5;top:0}.content[data-v-48e7a5ac]{width:100%;overflow:scroll;top:58px;position:absolute;z-index:10;bottom:5px}\n",document.head.appendChild(a);const Y={setup(){const e=t(),a=l(),o=n(""),s=n(""),c=n(""),u=n(""),v=n(""),p=n(""),b=n([]),y=n([]),f=n([]),_=n(!1),k=n(!1),w=n([]),x=r({yjtJyInformationData:{},typeCodeList:[],alterReasonList:[]}),C=n(!1);x.yjtJyInformationData=JSON.parse(decodeURIComponent(a.query.yjtJyInformation));const D=n(JSON.parse(decodeURIComponent(a.query.exterior))),I=n(JSON.parse(decodeURIComponent(a.query.tabIndex)));i.await("takePhoto",(e=>{if("null"!=e){let a={};a.index=b.value.length+1,a.base64Img=e,b.value.push(a),y.value.push(e);let o=new FormData,t="/cathodeCopper/"+x.yjtJyInformationData.batchgroup+"/"+x.yjtJyInformationData.batchnumber;o.append("file",function(e){let a=e.split(","),o=a[0].match(/:(.*?);/)[1],t=atob(a[1]),l=t.length,n=new Uint8Array(l);for(;l--;)n[l]=t.charCodeAt(l);let r=Math.random().toString(36).slice(-8),i=o.split("/")[1];return new File([n],r+"."+i,{type:o})}(e)),o.append("path",t),V(o).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=b.value.length,f.value.push(a)})).catch((e=>{console.log(e)}))}})),"1"==D.value?(o.value="qualified",s.value="合格品类型"):"2"==D.value&&(o.value="unqualified",s.value="不合格品类型"),d((()=>{i.register("goback",(()=>{e.push({path:"/gradeDetermination"})})),j(o.value),J()}));const j=e=>{let a={};a.typeCode=e,P(a).then((e=>{200==e.data.code&&(x.typeCodeList=e.data.data,v.value=String(x.typeCodeList[0].id))})).catch((e=>{console.log(e)}))},J=()=>{let e={},a={},o={limit:9999,offset:1,blockId:"paramBlock",data:{}};a.paramBlock=o,e.blocks=a,q(e).then((e=>{x.alterReasonList=e.data.blocks.resultBlock.data})).catch((e=>{console.log(e)}))};return{imgList:w,showImage:_,showLabelImage:k,fileList:b,base64ImgList:y,imagePath:f,takePhotoState:p,alterReason:u,remarks:c,typeCode:o,typeCodeText:s,listData:x,exterior:D,tabIndex:I,typeCodeChecked:v,disabled:C,seeImg:()=>{w.value=y.value,_.value=!0},takePhotoZJ:()=>{i.takePhoto()},onClickLeft:()=>{e.push({path:"/gradeDetermination"})},dateFormat:(e,a)=>{let o,t=new Date(a);const l={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(let n in l)o=new RegExp("("+n+")").exec(e),o&&(e=e.replace(o[1],1==o[1].length?l[n]:l[n].padStart(o[1].length,"0")));return e},beforeDelete:(e,a)=>{f.value=f.value.filter((a=>a.index!=e)),b.value=b.value.filter((a=>a.index!=e)),y.value=y.value.filter((e=>e!=a))},conservation:()=>{if(C.value=!0,0==f.value.length)return g({message:"请上传质检照片",type:"fail",overlay:!0,className:"particulars-detail-popup"}),C.value=!1,!1;if(1==I.value&&!u.value)return g({message:"请选择或者填写改判理由",type:"fail",overlay:!0,className:"particulars-detail-popup"}),C.value=!1,!1;m({duration:0,forbidClick:!0,className:"particulars-detail-popup",overlay:!0,message:"正在质检..."});let a={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[],labelFileList:[]},o=[];o.push(x.yjtJyInformationData),a.data=o,a.typeCodeChecked=v.value,a.active=I.value,a.exterior=D.value,a.remarks=c.value,a.alterReason=u.value,a.fileList=f.value,M(a).then((a=>{h(),200==a.data.code&&(g({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),C.value=!1,e.push({path:"/gradeDetermination",query:{barcode:x.yjtJyInformationData.barcode,tabState:"1"}}))})).catch((e=>{console.log(e),C.value=!1,h()}))},getTypeCodeData:j,getAlterReasonQuery:J}}},H=e=>(R("data-v-48e7a5ac"),e=e(),F(),e),O={class:"container"},E={class:"header"},Z={class:"content"},A=H((()=>u("span",{style:{"font-weight":"bold"}},"编号：",-1))),B=H((()=>u("span",{style:{"font-weight":"bold"}},"重量：",-1))),T=H((()=>u("span",{style:{"font-weight":"bold"}},"标准：",-1))),Q=H((()=>u("span",{style:{"font-weight":"bold"}},"计量员：",-1))),W=H((()=>u("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),$=H((()=>u("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),G=H((()=>u("span",{style:{color:"red"}},"*",-1))),K=H((()=>u("span",{style:{color:"red"}},"*",-1))),X={class:"van-uploader"},ee={class:"van-uploader__wrapper"},ae={class:"van-image van-uploader__preview-image"},oe=["src"],te=["onClick"],le=[H((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],ne=[H((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],re={key:0},ie=H((()=>u("span",{style:{color:"red"}},"*",-1)));e("default",o(Y,[["render",function(e,a,o,t,l,n){const r=b,i=I,d=j,g=J,m=U,h=N,R=L,F=S,V=z,P=y,q=f;return s(),c("div",O,[u("div",E,[v(r,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:t.onClickLeft},null,8,["onClickLeft"])]),u("div",Z,[v(V,{class:"box-card",shadow:"always"},{default:p((()=>[v(i,{"content-position":"left"},{default:p((()=>[_("基本信息")])),_:1}),u("div",null,[u("p",null,[A,u("span",null,k(t.listData.yjtJyInformationData.batchnumber),1)]),u("p",null,[B,u("span",null,k(parseFloat(t.listData.yjtJyInformationData.suttle))+k(t.listData.yjtJyInformationData.unit),1)]),u("p",null,[T,u("span",null,k(t.listData.yjtJyInformationData.standard),1)]),u("p",null,[Q,u("span",null,k(t.listData.yjtJyInformationData.suttleperson),1),_("      "),W,u("span",null,k(t.listData.yjtJyInformationData.scanUser),1)]),u("p",null,[$,u("span",null,k(t.dateFormat("YYYY-mm-dd HH:MM:SS",t.listData.yjtJyInformationData.proDate)),1)])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[G,_(k(t.typeCodeText),1)])),_:1}),v(g,{modelValue:t.typeCodeChecked,"onUpdate:modelValue":a[0]||(a[0]=e=>t.typeCodeChecked=e),direction:"horizontal"},{default:p((()=>[(s(!0),c(w,null,x(t.listData.typeCodeList,((e,a)=>(s(),C(d,{name:String(e.id)},{default:p((()=>[_(k(e.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[K,_(" 质检照片")])),_:1}),u("div",X,[u("div",ee,[(s(!0),c(w,null,x(t.fileList,((e,o)=>(s(),c("div",{class:"van-uploader__preview",key:e.index},[u("div",ae,[u("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[1]||(a[1]=(...e)=>t.seeImg&&t.seeImg(...e))},null,8,oe)]),u("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>t.beforeDelete(e.index,e.base64Img)},le,8,te)])))),128)),u("div",{class:"van-uploader__upload",onClick:a[2]||(a[2]=(...e)=>t.takePhotoZJ&&t.takePhotoZJ(...e))},ne)])])]),1==t.tabIndex?(s(),c("div",re,[v(i,{"content-position":"left"},{default:p((()=>[ie,_("改判理由")])),_:1}),v(h,{modelValue:t.alterReason,"onUpdate:modelValue":a[3]||(a[3]=e=>t.alterReason=e),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:p((()=>[(s(!0),c(w,null,x(t.listData.alterReasonList,(e=>(s(),C(m,{key:e.alterReason,label:e.alterReason,value:e.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):D("",!0),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[_("备注")])),_:1}),v(F,{inset:""},{default:p((()=>[v(R,{modelValue:t.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>t.remarks=e),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),v(P,{type:"primary",size:"large",disabled:t.disabled,style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px","background-color":"#003363",color:"#FFFFFF"},onClick:t.conservation},{default:p((()=>[_("提交 ")])),_:1},8,["disabled","onClick"]),v(q,{show:t.showImage,"onUpdate:show":a[5]||(a[5]=e=>t.showImage=e),images:t.imgList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])])])}],["__scopeId","data-v-48e7a5ac"]]))}}}));
