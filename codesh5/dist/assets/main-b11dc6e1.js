import"./index-ea7b9f97.js";import{E as H}from"./el-overlay-c46362d1.js";import{a6 as E,a7 as M,_ as P,f as U,s as T,u as A,r as b,J as O,b as n,c as i,j as t,d as _,w as c,F as I,N as Q,a8 as z,a9 as Z,O as Y,e as D,k as l,U as r,g as h,V as G,ab as K,Y as W,S as X,p as $,i as tt,Z as et}from"./index-a6a132b2.js";import{a as at,E as ot}from"./el-card-ba5edc3c.js";/* empty css              *//* empty css              */function nt(p){return E({url:`${M.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecord`,method:"post",data:p})}function lt(p){return E({url:`${M.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecordDecide`,method:"get",params:p})}const st={setup(){U.await("scanner",o=>{o!="null"?(e.qualityCheckingList=[],g.value=1,k.value=!0,a({batchnumber:"",barcode:o})):T({message:"数据获取失败",type:"fail",className:"particulars-detail-popup"})});const p=A(),s=b(""),L=b(!1),e=O({qualityCheckingList:[],yjtJyInformationData:{},yjtJyInformationDecideDataList:[],filePathList:[]}),S=b(!1),N=b(!1),k=b(!1),C=b(10),g=b(0),v=()=>{p.push({path:"/home"})},x=()=>{g.value=1,e.qualityCheckingList=[],k.value=!1,a({batchnumber:s.value,barcode:""})},V=()=>{g.value=1,e.qualityCheckingList=[],k.value=!1,a({batchnumber:s.value,barcode:""})},j=()=>{g.value=g.value+1,a({batchnumber:s.value,barcode:""})},w=()=>{U.scan()},q=o=>{e.filePathList=[],e.filePathList=o,S.value=!0},F=o=>{if(e.yjtJyInformationData=o,o.state=="1"){let f={yjtJyInformationId:o.id,status:"2"};J(f)}L.value=!0};function J(o){lt(o).then(f=>{e.yjtJyInformationDecideDataList=f.data.data}).catch(f=>{console.log(f)})}function a(o){let f={},y={},u={};u.limit=C.value,u.offset=g.value,u.blockId="paramBlock",u.data=o,y.paramBlock=u,f.blocks=y,nt(f).then(m=>{e.qualityCheckingList=[...e.qualityCheckingList,...m.data.blocks.resultBlock.data],N.value=!1,e.qualityCheckingList.length==m.data.blocks.resultBlock.total&&(k.value=!0)}).catch(m=>{console.log(m)})}return{showImage:S,centerDialogVisible:L,searchValue:s,loading:N,finished:k,limit:C,offset:g,listData:e,onClickLeft:v,onLoad:j,statusChange:x,dateFormat:(o,f)=>{let y,u=new Date(f);const m={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let R in m)y=new RegExp("("+R+")").exec(o),y&&(o=o.replace(y[1],y[1].length==1?m[R]:m[R].padStart(y[1].length,"0")));return o},onSearch:V,qualityCheckingRecordDetails:F,scanClick:w,seeImg:q}}},d=p=>($("data-v-efc0a69e"),p=p(),tt(),p),it={class:"header"},ct={style:{display:"flex","background-color":"#ffffff"}},rt={id:"content",class:"content"},dt={style:{padding:"0px 5px 5px 5px"}},ut=d(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),_t=d(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),ht={key:0,style:{"margin-left":"30px"}},ft={key:0},pt={key:1},gt={key:2},yt={style:{"overflow-y":"auto","overscroll-behavior-y":"contain",height:"calc(100vh - 180px)"}},mt=d(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),kt=d(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),vt=d(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),bt=d(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Dt=d(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),wt=d(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Ct={key:0},xt=d(()=>t("span",{style:{"font-weight":"bold"}},"是否最新：",-1)),It=d(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Lt={key:0,style:{"font-weight":"bold"}},St=d(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Nt=d(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Vt={key:0},jt=d(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),qt={key:1};function Ft(p,s,L,e,S,N){const k=G,C=Q,g=z,v=at,x=K,V=ot,j=Z,w=W,q=et,F=X,J=H;return n(),i(I,null,[t("div",it,[_(C,{title:"质检记录列表",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},{right:c(()=>[_(k,{onClick:e.scanClick,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])]),_:1},8,["onClickLeft"]),t("div",ct,[_(g,{style:{width:"100%"},modelValue:e.searchValue,"onUpdate:modelValue":s[0]||(s[0]=a=>e.searchValue=a),shape:"round",placeholder:"请输入编号搜索",onSearch:e.onSearch},null,8,["modelValue","onSearch"])])]),t("div",rt,[_(j,{loading:e.loading,"onUpdate:loading":s[1]||(s[1]=a=>e.loading=a),finished:e.finished,offset:"50","finished-text":"没有更多了",onLoad:e.onLoad},{default:c(()=>[t("div",dt,[(n(!0),i(I,null,Y(e.listData.qualityCheckingList,(a,B)=>(n(),D(V,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:o=>e.qualityCheckingRecordDetails(a)},{default:c(()=>[t("div",null,[t("p",null,[ut,t("span",null,l(a.batchnumber),1)]),t("p",null,[_t,t("span",null,l(parseFloat(a.suttle))+l(a.unit),1),a.exteriorName?(n(),i("span",ht,[a.exteriorName=="优等品"?(n(),i("span",ft,[_(v,null,{default:c(()=>[r(l(a.exteriorName),1)]),_:2},1024)])):h("",!0),a.exteriorName=="合格"?(n(),i("span",pt,[_(v,{type:"warning"},{default:c(()=>[r(l(a.exteriorName),1)]),_:2},1024)])):h("",!0),a.exteriorName=="不合格"?(n(),i("span",gt,[_(v,{type:"danger"},{default:c(()=>[r(l(a.exteriorName),1)]),_:2},1024)])):h("",!0)])):h("",!0)]),a.state=="0"?(n(),D(x,{key:0,type:"primary"},{default:c(()=>[r("未质检")]),_:1})):h("",!0),a.state=="1"?(n(),D(x,{key:1,type:"success"},{default:c(()=>[r("已质检")]),_:1})):h("",!0)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),_(J,{modelValue:e.centerDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=a=>e.centerDialogVisible=a),"destroy-on-close":!0,title:"质检记录详情",width:"96%","align-center":""},{default:c(()=>[t("div",yt,[t("div",null,[_(w,{"content-position":"left"},{default:c(()=>[r("基本信息")]),_:1}),t("p",null,[mt,t("span",null,l(e.listData.yjtJyInformationData.batchnumber),1)]),t("p",null,[kt,t("span",null,l(parseFloat(e.listData.yjtJyInformationData.suttle))+l(e.listData.yjtJyInformationData.unit),1)]),t("p",null,[vt,t("span",null,l(e.listData.yjtJyInformationData.standard),1)]),t("p",null,[bt,t("span",null,l(e.listData.yjtJyInformationData.suttleperson),1),r("     "),Dt,t("span",null,l(e.listData.yjtJyInformationData.scanUser),1)]),t("p",null,[wt,r(l(e.dateFormat("YYYY-mm-dd HH:MM:SS",e.listData.yjtJyInformationData.proDate)),1)])]),e.listData.yjtJyInformationData.state=="1"?(n(),i("div",Ct,[_(w,{"content-position":"left"},{default:c(()=>[r("质检信息")]),_:1}),(n(!0),i(I,null,Y(e.listData.yjtJyInformationDecideDataList,(a,B)=>(n(),i("div",null,[t("div",null,[t("p",null,[xt,a.details.isNew=="0"?(n(),D(v,{key:0,type:"success"},{default:c(()=>[r("是")]),_:1})):h("",!0),a.details.isNew=="1"?(n(),D(v,{key:1,type:"danger"},{default:c(()=>[r("否")]),_:1})):h("",!0)]),t("p",null,[It,t("span",null,l(a.details.exteriorName),1),r("     "),a.details.exterior!="0"?(n(),i("span",Lt,"类型：")):h("",!0),t("span",null,l(a.details.dictName),1)]),t("p",null,[St,r(l(e.dateFormat("YYYY-mm-dd HH:MM:SS",a.details.checkoutDate)),1)]),t("p",null,[Nt,t("span",null,l(a.details.checkoutUser),1)]),a.details.alterReason?(n(),i("p",Vt,[jt,t("span",null,l(a.details.alterReason),1)])):h("",!0),a.details.exterior!="0"?(n(),i("div",qt,[(n(!0),i(I,null,Y(a.fileList,(o,f)=>(n(),D(q,{style:{margin:"0 2%"},onClick:y=>e.seeImg(a.fileList),width:"45%",height:"8rem",fit:"cover",position:"left",src:o},null,8,["onClick","src"]))),256))])):h("",!0),_(w)])]))),256))])):h("",!0)]),_(F,{show:e.showImage,"onUpdate:show":s[2]||(s[2]=a=>e.showImage=a),images:e.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])]),_:1},8,["modelValue"])],64)}const Mt=P(st,[["render",Ft],["__scopeId","data-v-efc0a69e"]]);export{Mt as default};
