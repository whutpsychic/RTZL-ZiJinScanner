System.register(["./index-legacy-89a34e7c.js","./el-card-legacy-0c33fc6e.js","./index-legacy-2f76a666.js","./el-tag-legacy-9c5e3cae.js","./index-legacy-36e03f5c.js","./index-legacy-f3c1d55a.js","./index-legacy-a8b76193.js","./el-select-legacy-582e2892.js","./el-popper-legacy-70ffd702.js","./index-legacy-267aee5f.js","./index-legacy-043578f0.js","./gradeDetermination-legacy-158b5fd5.js","./index-legacy-11bfa915.js","./mount-component-legacy-2eb7189b.js","./index-legacy-d7add2f9.js","./use-id-legacy-a10b8f4a.js","./index-legacy-16ab7d77.js","./index-legacy-10513804.js","./request-legacy-e169870c.js"],(function(e,a){"use strict";var l,o,t,n,r,i,d,s,c,u,p,v,g,m,y,b,h,f,_,k,x,w,C,D,j,I,S,J,V,L,F,R,z,q,N,U,P,Y,H,M,A,E,B,O,T,Z,G;return{setters:[e=>{l=e.c,o=e.d,t=e.i,n=e.a3,r=e.a,i=e.n,d=e.a4,s=e.w,c=e.a5,u=e.h,p=e._,v=e.k,g=e.Y,m=e.p,y=e.Z,b=e.s,h=e.q,f=e.x,_=e.y,k=e.F,x=e.z,w=e.a2,C=e.N,D=e.G,j=e.H,I=e.a1,S=e.A,J=e.C,V=e.D,L=e.E},e=>{F=e.E,R=e.I,z=e.D},null,null,e=>{q=e.C},null,e=>{N=e.F},e=>{U=e.E,P=e.a},null,e=>{Y=e.c,H=e.s},e=>{M=e.N},e=>{A=e.d,E=e.g,B=e.b,O=e.e},e=>{T=e.s,Z=e.a,G=e.c},null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.header[data-v-7d8230da]{width:100%;height:58px;line-height:58px;position:absolute;z-index:5;top:0}.content[data-v-7d8230da]{width:100%;overflow:scroll;top:58px;position:absolute;z-index:10;bottom:5px}\n",document.head.appendChild(a);const[K,Q]=l("radio-group"),W={disabled:Boolean,iconSize:i,direction:String,modelValue:d,checkedColor:String},X=Symbol(K);var $=o({name:K,props:W,emits:["change","update:modelValue"],setup(e,{emit:a,slots:l}){const{linkChildren:o}=t.useChildren(X);return n((()=>e.modelValue),(e=>a("change",e))),o({props:e,updateValue:e=>a("update:modelValue",e)}),t.useCustomFieldValue((()=>e.modelValue)),()=>{var a;return r("div",{class:Q([e.direction]),role:"radiogroup"},[null==(a=l.default)?void 0:a.call(l)])}}});const ee=s($),[ae,le]=l("radio");var oe=o({name:ae,props:Y,emits:["update:modelValue"],setup(e,{emit:a,slots:l}){const{parent:o}=t.useParent(X),n=()=>{o?o.updateValue(e.name):a("update:modelValue",e.name)};return()=>r(H,u({bem:le,role:"radio",parent:o,checked:(o?o.props.modelValue:e.modelValue)===e.name,onToggle:n},e),c(l,["default","icon"]))}});const te=s(oe),ne={setup(){const e=v(),a=g(),l=m(""),o=m(""),t=m(""),n=m(""),r=m(""),i=m(""),d=m([]),s=m([]),c=m([]),u=m(!1),p=m(!1),f=m([]),_=y({yjtJyInformationData:{},typeCodeList:[],alterReasonList:[]}),k=m(!1);_.yjtJyInformationData=JSON.parse(decodeURIComponent(a.query.yjtJyInformation));const x=m(JSON.parse(decodeURIComponent(a.query.exterior))),w=m(JSON.parse(decodeURIComponent(a.query.tabIndex)));b.await("takePhoto",(e=>{if("null"!=e){let a={};a.index=d.value.length+1,a.base64Img=e,d.value.push(a),s.value.push(e);let l=new FormData,o="/cathodeCopper/"+_.yjtJyInformationData.batchgroup+"/"+_.yjtJyInformationData.batchnumber;l.append("file",function(e){let a=e.split(","),l=a[0].match(/:(.*?);/)[1],o=atob(a[1]),t=o.length,n=new Uint8Array(t);for(;t--;)n[t]=o.charCodeAt(t);let r=Math.random().toString(36).slice(-8),i=l.split("/")[1];return new File([n],r+"."+i,{type:l})}(e)),l.append("path",o),A(l).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=d.value.length,c.value.push(a)})).catch((e=>{console.log(e)}))}})),"1"==x.value?(l.value="qualified",o.value="合格品类型"):"2"==x.value&&(l.value="unqualified",o.value="不合格品类型"),h((()=>{b.register("goback",(()=>{e.push({path:"/gradeDetermination",query:{barcode:_.yjtJyInformationData.barcode,tabState:w.value}})})),C(l.value),D()}));const C=e=>{let a={};a.typeCode=e,E(a).then((e=>{200==e.data.code&&(_.typeCodeList=e.data.data,r.value=String(_.typeCodeList[0].id))})).catch((e=>{console.log(e)}))},D=()=>{let e={},a={},l={limit:9999,offset:1,blockId:"paramBlock",data:{}};a.paramBlock=l,e.blocks=a,B(e).then((e=>{_.alterReasonList=e.data.blocks.resultBlock.data})).catch((e=>{console.log(e)}))};return{imgList:f,showImage:u,showLabelImage:p,fileList:d,base64ImgList:s,imagePath:c,takePhotoState:i,alterReason:n,remarks:t,typeCode:l,typeCodeText:o,listData:_,exterior:x,tabIndex:w,typeCodeChecked:r,disabled:k,seeImg:()=>{f.value=s.value,u.value=!0},takePhotoZJ:()=>{b.takePhoto()},onClickLeft:()=>{e.push({path:"/gradeDetermination",query:{barcode:_.yjtJyInformationData.barcode,tabState:w.value}})},dateFormat:(e,a)=>{let l,o=new Date(a);const t={"Y+":o.getFullYear().toString(),"m+":(o.getMonth()+1).toString(),"d+":o.getDate().toString(),"H+":o.getHours().toString(),"M+":o.getMinutes().toString(),"S+":o.getSeconds().toString()};for(let n in t)l=new RegExp("("+n+")").exec(e),l&&(e=e.replace(l[1],1==l[1].length?t[n]:t[n].padStart(l[1].length,"0")));return e},beforeDelete:(e,a)=>{c.value=c.value.filter((a=>a.index!=e)),d.value=d.value.filter((a=>a.index!=e)),s.value=s.value.filter((e=>e!=a))},conservation:()=>{if(k.value=!0,0==c.value.length)return T({message:"请上传质检照片",type:"fail",overlay:!0,className:"particulars-detail-popup"}),k.value=!1,!1;if(1==w.value&&!n.value)return T({message:"请选择或者填写改判理由",type:"fail",overlay:!0,className:"particulars-detail-popup"}),k.value=!1,!1;Z({duration:0,forbidClick:!0,className:"particulars-detail-popup",overlay:!0,message:"正在质检..."});let a={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[],labelFileList:[]},l=[];l.push(_.yjtJyInformationData),a.data=l,a.typeCodeChecked=r.value,a.active=w.value,a.exterior=x.value,a.remarks=t.value,a.alterReason=n.value,a.fileList=c.value,O(a).then((a=>{G(),200==a.data.code&&(T({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),k.value=!1,e.push({path:"/gradeDetermination",query:{barcode:_.yjtJyInformationData.barcode,tabState:"1"}}))})).catch((e=>{console.log(e),k.value=!1,G()}))},getTypeCodeData:C,getAlterReasonQuery:D}}},re=e=>(V("data-v-7d8230da"),e=e(),L(),e),ie={class:"container"},de={class:"header"},se={class:"content"},ce=re((()=>k("span",{style:{"font-weight":"bold"}},"编号：",-1))),ue=re((()=>k("span",{style:{"font-weight":"bold"}},"重量：",-1))),pe=re((()=>k("span",{style:{"font-weight":"bold"}},"标准：",-1))),ve=re((()=>k("span",{style:{"font-weight":"bold"}},"计量员：",-1))),ge=re((()=>k("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),me=re((()=>k("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),ye=re((()=>k("span",{style:{color:"red"}},"*",-1))),be=re((()=>k("span",{style:{color:"red"}},"*",-1))),he={class:"van-uploader"},fe={class:"van-uploader__wrapper"},_e={class:"van-image van-uploader__preview-image"},ke=["src"],xe=["onClick"],we=[re((()=>k("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],Ce=[re((()=>k("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],De={key:0},je=re((()=>k("span",{style:{color:"red"}},"*",-1)));e("default",p(ne,[["render",function(e,a,l,o,t,n){const i=M,d=z,s=te,c=ee,u=U,p=P,v=N,g=q,m=F,y=w,b=R;return f(),_("main",null,[k("div",ie,[k("div",de,[r(i,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:o.onClickLeft},null,8,["onClickLeft"])]),k("div",se,[r(m,{class:"box-card",shadow:"always"},{default:x((()=>[r(d,{"content-position":"left"},{default:x((()=>[C("基本信息")])),_:1}),k("div",null,[k("p",null,[ce,k("span",null,D(o.listData.yjtJyInformationData.batchnumber),1)]),k("p",null,[ue,k("span",null,D(parseFloat(o.listData.yjtJyInformationData.suttle))+D(o.listData.yjtJyInformationData.unit),1)]),k("p",null,[pe,k("span",null,D(o.listData.yjtJyInformationData.standard),1)]),k("p",null,[ve,k("span",null,D(o.listData.yjtJyInformationData.suttleperson),1),C("      "),ge,k("span",null,D(o.listData.yjtJyInformationData.scanUser),1)]),k("p",null,[me,k("span",null,D(o.dateFormat("YYYY-mm-dd HH:MM:SS",o.listData.yjtJyInformationData.proDate)),1)])]),k("div",null,[r(d,{"content-position":"left"},{default:x((()=>[ye,C(D(o.typeCodeText),1)])),_:1}),r(c,{modelValue:o.typeCodeChecked,"onUpdate:modelValue":a[0]||(a[0]=e=>o.typeCodeChecked=e),direction:"horizontal"},{default:x((()=>[(f(!0),_(j,null,I(o.listData.typeCodeList,((e,a)=>(f(),S(s,{name:String(e.id)},{default:x((()=>[C(D(e.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),k("div",null,[r(d,{"content-position":"left"},{default:x((()=>[be,C(" 质检照片")])),_:1}),k("div",he,[k("div",fe,[(f(!0),_(j,null,I(o.fileList,((e,l)=>(f(),_("div",{class:"van-uploader__preview",key:e.index},[k("div",_e,[k("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[1]||(a[1]=(...e)=>o.seeImg&&o.seeImg(...e))},null,8,ke)]),k("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>o.beforeDelete(e.index,e.base64Img)},we,8,xe)])))),128)),k("div",{class:"van-uploader__upload",onClick:a[2]||(a[2]=(...e)=>o.takePhotoZJ&&o.takePhotoZJ(...e))},Ce)])])]),1==o.tabIndex?(f(),_("div",De,[r(d,{"content-position":"left"},{default:x((()=>[je,C("改判理由")])),_:1}),r(p,{modelValue:o.alterReason,"onUpdate:modelValue":a[3]||(a[3]=e=>o.alterReason=e),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:x((()=>[(f(!0),_(j,null,I(o.listData.alterReasonList,(e=>(f(),S(u,{key:e.alterReason,label:e.alterReason,value:e.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):J("",!0),k("div",null,[r(d,{"content-position":"left"},{default:x((()=>[C("备注")])),_:1}),r(g,{inset:""},{default:x((()=>[r(v,{modelValue:o.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>o.remarks=e),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),r(y,{type:"primary",size:"large",disabled:o.disabled,style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px","background-color":"#003363",color:"#FFFFFF"},onClick:o.conservation},{default:x((()=>[C("提交 ")])),_:1},8,["disabled","onClick"]),r(b,{show:o.showImage,"onUpdate:show":a[5]||(a[5]=e=>o.showImage=e),images:o.imgList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])])])])}],["__scopeId","data-v-7d8230da"]]))}}}));
