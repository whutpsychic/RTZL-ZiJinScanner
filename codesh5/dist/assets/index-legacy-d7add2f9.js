System.register(["./index-legacy-89a34e7c.js","./mount-component-legacy-2eb7189b.js"],(function(e,t){"use strict";var a,i,l,o,n,u,r,s,v,c,h,d,f,p,g,w,m,y,b,x,C,S,$,z,M;return{setters:[e=>{a=e.c,i=e.t,l=e.n,o=e.m,n=e.d,u=e.p,r=e.W,s=e.i,v=e.f,c=e.a3,h=e.al,d=e.am,f=e.q,p=e.ao,g=e.ai,w=e.ac,m=e.a,y=e.ak,b=e.ae,x=e.ay,C=e.aA,S=e.w},e=>{$=e.a,z=e.u,M=e.o}],execute:function(){const[t,R]=a("swipe"),T={loop:i,width:l,height:l,vertical:Boolean,autoplay:o(0),duration:o(500),touchable:i,lazyRender:Boolean,initialSwipe:o(0),indicatorColor:String,showIndicators:i,stopPropagation:i},P=Symbol(t);var k=n({name:t,props:T,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:a}){const i=u(),l=u(),o=r({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let n=!1;const S=$(),{children:T,linkChildren:k}=s.useChildren(P),E=v((()=>T.length)),I=v((()=>o[e.vertical?"height":"width"])),O=v((()=>e.vertical?S.deltaY.value:S.deltaX.value)),X=v((()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-I.value*E.value:0)),Y=v((()=>I.value?Math.ceil(Math.abs(X.value)/I.value):E.value)),D=v((()=>E.value*I.value)),j=v((()=>(o.active+E.value)%E.value)),A=v((()=>{const t=e.vertical?"vertical":"horizontal";return S.direction.value===t})),B=v((()=>{const t={transitionDuration:`${o.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${o.offset}px)`};if(I.value){const a=e.vertical?"height":"width",i=e.vertical?"width":"height";t[a]=`${D.value}px`,t[i]=e[i]?`${e[i]}px`:""}return t})),W=(t,a=0)=>{let i=t*I.value;e.loop||(i=Math.min(i,-X.value));let l=a-i;return e.loop||(l=C(l,X.value,0)),l},q=({pace:a=0,offset:i=0,emitChange:l})=>{if(E.value<=1)return;const{active:n}=o,u=(t=>{const{active:a}=o;return t?e.loop?C(a+t,-1,E.value):C(a+t,0,Y.value):a})(a),r=W(u,i);if(e.loop){if(T[0]&&r!==X.value){const e=r<X.value;T[0].setOffset(e?D.value:0)}if(T[E.value-1]&&0!==r){const e=r>0;T[E.value-1].setOffset(e?-D.value:0)}}o.active=u,o.offset=r,l&&u!==n&&t("change",j.value)},H=()=>{o.swiping=!0,o.active<=-1?q({pace:E.value}):o.active>=E.value&&q({pace:-E.value})},L=()=>{H(),S.reset(),s.doubleRaf((()=>{o.swiping=!1,q({pace:1,emitChange:!0})}))};let V;const F=()=>clearTimeout(V),G=()=>{F(),+e.autoplay>0&&E.value>1&&(V=setTimeout((()=>{L(),G()}),+e.autoplay))},J=(t=+e.initialSwipe)=>{if(!i.value)return;const a=()=>{var a,l;if(!y(i)){const t={width:i.value.offsetWidth,height:i.value.offsetHeight};o.rect=t,o.width=+(null!=(a=e.width)?a:t.width),o.height=+(null!=(l=e.height)?l:t.height)}E.value&&-1===(t=Math.min(E.value-1,t))&&(t=E.value-1),o.active=t,o.swiping=!0,o.offset=W(t),T.forEach((e=>{e.setOffset(0)})),G()};y(i)?b().then(a):a()},K=()=>J(o.active);let N;const Q=t=>{!e.touchable||t.touches.length>1||(S.start(t),n=!1,N=Date.now(),F(),H())},U=()=>{if(!e.touchable||!o.swiping)return;const a=Date.now()-N,i=O.value/a;if((Math.abs(i)>.25||Math.abs(O.value)>I.value/2)&&A.value){const t=e.vertical?S.offsetY.value:S.offsetX.value;let a=0;a=e.loop?t>0?O.value>0?-1:1:0:-Math[O.value>0?"ceil":"floor"](O.value/I.value),q({pace:a,emitChange:!0})}else O.value&&q({pace:0});n=!1,o.swiping=!1,t("dragEnd",{index:j.value}),G()},Z=(t,a)=>{const i=a===j.value,l=i?{backgroundColor:e.indicatorColor}:void 0;return m("i",{style:l,class:R("indicator",{active:i})},null)};return z({prev:()=>{H(),S.reset(),s.doubleRaf((()=>{o.swiping=!1,q({pace:-1,emitChange:!0})}))},next:L,state:o,resize:K,swipeTo:(t,a={})=>{H(),S.reset(),s.doubleRaf((()=>{let i;i=e.loop&&t===E.value?0===o.active?0:t:t%E.value,a.immediate?s.doubleRaf((()=>{o.swiping=!1})):o.swiping=!1,q({pace:i-o.active,emitChange:!0})}))}}),k({size:I,props:e,count:E,activeIndicator:j}),c((()=>e.initialSwipe),(e=>J(+e))),c(E,(()=>J(o.active))),c((()=>e.autoplay),G),c([h,d,()=>e.width,()=>e.height],K),c(s.usePageVisibility(),(e=>{"visible"===e?G():F()})),f(J),p((()=>J(o.active))),M((()=>J(o.active))),g(F),w(F),s.useEventListener("touchmove",(a=>{e.touchable&&o.swiping&&(S.move(a),A.value)&&(!e.loop&&(0===o.active&&O.value>0||o.active===E.value-1&&O.value<0)||(x(a,e.stopPropagation),q({offset:O.value}),n||(t("dragStart",{index:j.value}),n=!0)))}),{target:l}),()=>{var t;return m("div",{ref:i,class:R()},[m("div",{ref:l,style:B.value,class:R("track",{vertical:e.vertical}),onTouchstartPassive:Q,onTouchend:U,onTouchcancel:U},[null==(t=a.default)?void 0:t.call(a)]),a.indicator?a.indicator({active:j.value,total:E.value}):e.showIndicators&&E.value>1?m("div",{class:R("indicators",{vertical:e.vertical})},[Array(E.value).fill("").map(Z)]):void 0])}}});e("S",S(k));const[E,I]=a("swipe-item");var O=n({name:E,setup(e,{slots:t}){let a;const i=r({offset:0,inited:!1,mounted:!1}),{parent:l,index:o}=s.useParent(P);if(!l)return;const n=v((()=>{const e={},{vertical:t}=l.props;return l.size.value&&(e[t?"height":"width"]=`${l.size.value}px`),i.offset&&(e.transform=`translate${t?"Y":"X"}(${i.offset}px)`),e})),u=v((()=>{const{loop:e,lazyRender:t}=l.props;if(!t||a)return!0;if(!i.mounted)return!1;const n=l.activeIndicator.value,u=l.count.value-1,r=0===n&&e?u:n-1,s=n===u&&e?0:n+1;return a=o.value===n||o.value===r||o.value===s,a}));return f((()=>{b((()=>{i.mounted=!0}))})),z({setOffset:e=>{i.offset=e}}),()=>{var e;return m("div",{class:I(),style:n.value},[u.value?null==(e=t.default)?void 0:e.call(t):null])}}});e("a",S(O))}}}));
