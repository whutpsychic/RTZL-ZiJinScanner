import{ax as me,U as ne,cN as ve,aw as pe,cG as ye,gE as Ce,D as V,gF as Ee,at as X,r as S,ao as se,i as j,g as L,j as H,b as z,m as g,cM as ge,o as N,c as G,d as U,q as T,n as o,e as be,w as A,k as W,v as Te,x,am as le,as as Se,h as ke,z as we,K as De,y as Me,aD as he,L as Ae,G as Le,gB as Ie}from"./index-a24b99c2.js";import{ah as F,Q as Be,e as q,j as ae,W as J,Z as Oe,T as Ne,X as Re,b as Z,d as P,t as $e,aj as Ye,E as _e,_ as ue,U as re,O as ze,Y as He,ag as Q,ak as Ue,al as ee,ai as Ke,w as Xe}from"./index-70f61aa8.js";import{g as Ge,i as Ve,C as je,u as oe}from"./el-card-8c23972c.js";const We=(...e)=>t=>{e.forEach(n=>{me(n)?n(t):n.value=t})};var K=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(K||{});const xe=(e,t,n)=>{let s={offsetX:0,offsetY:0};const r=a=>{const d=a.clientX,v=a.clientY,{offsetX:f,offsetY:p}=s,l=e.value.getBoundingClientRect(),m=l.left,k=l.top,R=l.width,$=l.height,Y=document.documentElement.clientWidth,I=document.documentElement.clientHeight,_=-m+f,B=-k+p,w=Y-m-R+f,D=I-k-$+p,O=b=>{const u=Math.min(Math.max(f+b.clientX-d,_),w),E=Math.min(Math.max(p+b.clientY-v,B),D);s={offsetX:u,offsetY:E},e.value.style.transform=`translate(${F(u)}, ${F(E)})`},y=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",y)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};ne(()=>{ve(()=>{n.value?c():i()})}),pe(()=>{i()})},Fe=(e,t={})=>{ye(e)||Be("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||q("popup"),s=Ce(()=>n.bm("parent","hidden"));if(!ae||J(document.body,s.value))return;let r=0,c=!1,i="0";const a=()=>{setTimeout(()=>{Re(document==null?void 0:document.body,s.value),c&&document&&(document.body.style.width=i)},200)};V(e,d=>{if(!d){a();return}c=!J(document.body,s.value),c&&(i=document.body.style.width),r=Ge(n.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=Oe(document.body,"overflowY");r>0&&(v||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${r}px)`),Ne(document.body,s.value)}),Ee(()=>a())},ie=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Pe=Symbol(),te=S();function qe(e,t=void 0){const n=se()?j(Pe,te):te;return e?L(()=>{var s,r;return(r=(s=n.value)==null?void 0:s[e])!=null?r:t}):n}const Ze=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:P([String,Array,Object])},zIndex:{type:P([String,Number])}}),Je={click:e=>e instanceof MouseEvent},Qe="overlay";var eo=H({name:"ElOverlay",props:Ze,emits:Je,setup(e,{slots:t,emit:n}){const s=q(Qe),r=d=>{n("click",d)},{onClick:c,onMousedown:i,onMouseup:a}=ie(e.customMaskEvent?void 0:r);return()=>e.mask?z("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:a},[g(t,"default")],K.STYLE|K.CLASS|K.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(t,"default")])}});const oo=eo,de=Symbol("dialogInjectionKey"),ce=Z({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ve},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),to={close:()=>!0},no=["aria-label"],so=["id"],lo=H({name:"ElDialogContent"}),ao=H({...lo,props:ce,emits:to,setup(e){const t=e,{t:n}=$e(),{Close:s}=je,{dialogRef:r,headerRef:c,bodyId:i,ns:a,style:d}=j(de),{focusTrapRef:v}=j(Ye),f=We(v,r),p=L(()=>t.draggable);return xe(r,c,p),(l,m)=>(N(),G("div",{ref:o(f),class:T([o(a).b(),o(a).is("fullscreen",l.fullscreen),o(a).is("draggable",o(p)),o(a).is("align-center",l.alignCenter),{[o(a).m("center")]:l.center},l.customClass]),style:le(o(d)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:c,class:T(o(a).e("header"))},[g(l.$slots,"header",{},()=>[U("span",{role:"heading",class:T(o(a).e("title"))},be(l.title),3)]),l.showClose?(N(),G("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:T(o(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=k=>l.$emit("close"))},[z(o(_e),{class:T(o(a).e("close"))},{default:A(()=>[(N(),W(Te(l.closeIcon||o(s))))]),_:1},8,["class"])],10,no)):x("v-if",!0)],2),U("div",{id:o(i),class:T(o(a).e("body"))},[g(l.$slots,"default")],10,so),l.$slots.footer?(N(),G("footer",{key:0,class:T(o(a).e("footer"))},[g(l.$slots,"footer")],2)):x("v-if",!0)],6))}});var uo=ue(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ro=Z({...ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:P(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),io={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[re]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},co=(e,t)=>{const s=se().emit,{nextZIndex:r}=He();let c="";const i=Q(),a=Q(),d=S(!1),v=S(!1),f=S(!1),p=S(e.zIndex||r());let l,m;const k=qe("namespace",Ue),R=L(()=>{const C={},h=`--${k.value}-dialog`;return e.fullscreen||(e.top&&(C[`${h}-margin-top`]=e.top),e.width&&(C[`${h}-width`]=F(e.width))),C}),$=L(()=>e.alignCenter?{display:"flex"}:{});function Y(){s("opened")}function I(){s("closed"),s(re,!1),e.destroyOnClose&&(f.value=!1)}function _(){s("close")}function B(){m==null||m(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=ee(()=>y(),e.openDelay):y()}function w(){l==null||l(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>b(),e.closeDelay):b()}function D(){function C(h){h||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(C):w()}function O(){e.closeOnClickModal&&D()}function y(){ae&&(d.value=!0)}function b(){d.value=!1}function u(){s("openAutoFocus")}function E(){s("closeAutoFocus")}function M(C){var h;((h=C.detail)==null?void 0:h.focusReason)==="pointer"&&C.preventDefault()}e.lockScroll&&Fe(d);function fe(){e.closeOnPressEscape&&D()}return V(()=>e.modelValue,C=>{C?(v.value=!1,B(),f.value=!0,p.value=e.zIndex?p.value++:r(),Se(()=>{s("open"),t.value&&(t.value.scrollTop=0)})):d.value&&w()}),V(()=>e.fullscreen,C=>{t.value&&(C?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),ne(()=>{e.modelValue&&(d.value=!0,f.value=!0,B())}),{afterEnter:Y,afterLeave:I,beforeLeave:_,handleClose:D,onModalClick:O,close:w,doClose:b,onOpenAutoFocus:u,onCloseAutoFocus:E,onCloseRequested:fe,onFocusoutPrevented:M,titleId:i,bodyId:a,closed:v,style:R,overlayDialogStyle:$,rendered:f,visible:d,zIndex:p}},fo=["aria-label","aria-labelledby","aria-describedby"],mo=H({name:"ElDialog",inheritAttrs:!1}),vo=H({...mo,props:ro,emits:io,setup(e,{expose:t}){const n=e,s=ke();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!s.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},L(()=>!!n.customClass));const r=q("dialog"),c=S(),i=S(),a=S(),{visible:d,titleId:v,bodyId:f,style:p,overlayDialogStyle:l,rendered:m,zIndex:k,afterEnter:R,afterLeave:$,beforeLeave:Y,handleClose:I,onModalClick:_,onOpenAutoFocus:B,onCloseAutoFocus:w,onCloseRequested:D,onFocusoutPrevented:O}=co(n,c);we(de,{dialogRef:c,headerRef:i,bodyId:f,ns:r,rendered:m,style:p});const y=ie(_),b=L(()=>n.draggable&&!n.fullscreen);return t({visible:d,dialogContentRef:a}),(u,E)=>(N(),W(Ie,{to:"body",disabled:!u.appendToBody},[z(Le,{name:"dialog-fade",onAfterEnter:o(R),onAfterLeave:o($),onBeforeLeave:o(Y),persisted:""},{default:A(()=>[De(z(o(oo),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":o(k)},{default:A(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:o(v),"aria-describedby":o(f),class:T(`${o(r).namespace.value}-overlay-dialog`),style:le(o(l)),onClick:E[0]||(E[0]=(...M)=>o(y).onClick&&o(y).onClick(...M)),onMousedown:E[1]||(E[1]=(...M)=>o(y).onMousedown&&o(y).onMousedown(...M)),onMouseup:E[2]||(E[2]=(...M)=>o(y).onMouseup&&o(y).onMouseup(...M))},[z(o(Ke),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(B),onFocusAfterReleased:o(w),onFocusoutPrevented:o(O),onReleaseRequested:o(D)},{default:A(()=>[o(m)?(N(),W(uo,Me({key:0,ref_key:"dialogContentRef",ref:a},u.$attrs,{"custom-class":u.customClass,center:u.center,"align-center":u.alignCenter,"close-icon":u.closeIcon,draggable:o(b),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:o(I)}),he({header:A(()=>[u.$slots.title?g(u.$slots,"title",{key:1}):g(u.$slots,"header",{key:0,close:o(I),titleId:o(v),titleClass:o(r).e("title")})]),default:A(()=>[g(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:A(()=>[g(u.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,fo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ae,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var po=ue(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const go=Xe(po);export{go as E,qe as u};
