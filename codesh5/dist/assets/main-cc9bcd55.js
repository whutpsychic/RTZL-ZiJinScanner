import"./el-tag-bb37520c.js";import{E as q}from"./el-overlay-54218ca5.js";import{a5 as z,a6 as P,_ as X,u as Z,r as _,H as G,b as d,c as b,i as t,d as r,w as m,F as Y,J as O,N as K,a7 as W,a8 as $,O as Q,e as j,j as e,U as p,f as v,a9 as tt,aa as at,Y as ot,Z as et,a0 as lt,S as nt,$ as st,X as it,R as rt,p as dt,h as ct}from"./index-f6cc9116.js";/* empty css              */import{E as ut}from"./el-card-ab4e569d.js";/* empty css              *//* empty css              */import{a as mt,E as yt}from"./el-select-55a3a224.js";import"./el-popper-bc5dd8e2.js";/* empty css              */import{f as pt}from"./gradeDetermination-cb4559ff.js";import{s as ft}from"./function-call-60b671e7.js";import"./index-b8ca38d9.js";import"./use-global-config-d508bae4.js";import"./objects-61eeff04.js";function _t(h){return z({url:`${P.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:h})}function ht(h){return z({url:`${P.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:h})}const gt={setup(){const h=Z(),l=_(""),F=_(!1),a=_(""),H=_(""),T=_(!1),s=G({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[]}),x=_(!1),B=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=_(!1),I=_(!1),g=_("0"),L=_(10),w=_(0),N=()=>{h.push({path:"/home"})},M=i=>{w.value=1,s.auditorListData=[],I.value=!1,k({batchnumber:i,status:g.value})},U=i=>{w.value=1,s.auditorListData=[],I.value=!1,k({batchnumber:i,status:g.value})},J=()=>{w.value=w.value+1,k({batchnumber:l.value,status:g.value})},V=i=>{s.yjtJyInformationDetails=i,x.value=!0,s.yjtJyInformationDetails.exterior!="0"&&R(s.yjtJyInformationDetails.yjtJyInformationDetailsId)},E=()=>{F.value=!0},k=i=>{let y={},c={},u={};u.limit=L.value,u.offset=w.value,u.blockId="paramBlock",u.data=i,c.paramBlock=u,y.blocks=c,_t(y).then(f=>{s.auditorListData=[...s.auditorListData,...f.data.blocks.resultBlock.data],S.value=!1,s.auditorListData.length==f.data.blocks.resultBlock.total&&(I.value=!0);let D=document.body.scrollHeight-180;H.value="height:"+D+"px"}).catch(f=>{console.log(f)})},o=(i,y)=>{let c,u=new Date(y);const f={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let D in f)c=new RegExp("("+D+")").exec(i),c&&(i=i.replace(c[1],c[1].length==1?f[D]:f[D].padStart(c[1].length,"0")));return i},A=i=>{if(a.value=="")return O({message:"请填写审核内容",type:"fail",className:"particulars-detail-popup"}),!1;let y={},c={},u={},f={};y.id=s.yjtJyInformationDetails.id,y.yjtJyInformationId=s.yjtJyInformationDetails.yjtJyInformationId,y.yjtJyInformationDetailsId=s.yjtJyInformationDetails.yjtJyInformationDetailsId,y.auditorContent=a.value,y.status=i,f.data=y,u.paramBlock=f,c.blocks=u;let D="";i=="1"?D="驳回":D="通过",ft({title:"提示",width:"600",message:"是否"+D+"这条数据？"}).then(()=>{ht(c).then(C=>{C.data.status=="0"&&(O({message:C.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),s.auditorListData=[],x.value=!1,k({batchnumber:l.value,status:g.value}))}).catch(C=>{console.log(C)})}).catch(C=>{console.log(C)})},R=i=>{let y={};y.yjtJyInformationDetailsId=i,pt(y).then(c=>{s.yjtJyInformationFileList=c.data.data}).catch(c=>{console.log(c)})};return{elDialogHeight:H,state:T,listData:s,showImage:F,auditorContent:a,centerDialogVisible:x,searchValue:l,loading:S,finished:I,limit:L,offset:w,status:g,options:B,listData:s,onClickLeft:N,onLoad:J,getFileQuery:R,getAuditorDataQuery:k,statusChange:M,dateFormat:o,onSearch:U,auditingDetails:V,seeImg:E,cathodeCopperAuditorClick:A}}},n=h=>(dt("data-v-1a3e7e27"),h=h(),ct(),h),Dt={class:"header"},bt={style:{display:"flex","background-color":"#ffffff"}},vt={class:"content"},It={style:{padding:"0px 5px 5px 5px"}},wt=n(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),kt=n(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),jt=n(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Jt=n(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Ct={key:0,style:{"font-weight":"bold"}},xt={style:{color:"#bbbbbb"}},St={style:{float:"right",color:"#bbbbbb"}},Lt=n(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Vt=n(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Yt=n(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ft=n(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Ht=n(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Bt=n(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Nt=n(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Mt={key:0,style:{"font-weight":"bold"}},Ut=n(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Et=n(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),At=n(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Rt={key:0},Qt={key:2},Tt=n(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),Ot=n(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),zt=n(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),Pt=n(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),qt={key:0,style:{"margin-top":"30px"}};function Xt(h,l,F,a,H,T){const s=K,x=W,B=yt,S=mt,I=at,g=ot,L=ut,w=$,N=et,M=lt,U=nt,J=st,V=it,E=rt,k=q;return d(),b(Y,null,[t("div",Dt,[r(s,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",bt,[r(x,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":l[0]||(l[0]=o=>a.searchValue=o),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),r(S,{modelValue:a.status,"onUpdate:modelValue":l[1]||(l[1]=o=>a.status=o),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:m(()=>[(d(!0),b(Y,null,Q(a.options,o=>(d(),j(B,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",vt,[r(w,{loading:a.loading,"onUpdate:loading":l[2]||(l[2]=o=>a.loading=o),finished:a.finished,offset:"50","finished-text":"没有更多了",onLoad:a.onLoad},{default:m(()=>[t("div",It,[(d(!0),b(Y,null,Q(a.listData.auditorListData,(o,A)=>(d(),j(L,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:R=>a.auditingDetails(o)},{default:m(()=>[t("div",null,[t("p",null,[wt,t("span",null,e(o.batchnumber),1)]),t("p",null,[kt,t("span",null,e(parseFloat(o.suttle))+e(o.unit),1)]),t("p",null,[jt,t("span",null,e(o.standard),1)]),t("p",null,[Jt,t("span",null,e(o.exteriorName),1),p("    "),o.exterior!="0"?(d(),b("span",Ct,"类型：")):v("",!0),t("span",null,e(o.dictName),1)]),t("p",null,[o.status=="0"?(d(),j(I,{key:0,type:"primary"},{default:m(()=>[p("未审核")]),_:1})):v("",!0),o.status=="1"?(d(),j(I,{key:1,type:"danger"},{default:m(()=>[p("驳回")]),_:1})):v("",!0),o.status=="2"?(d(),j(I,{key:2,type:"success"},{default:m(()=>[p("审核通过")]),_:1})):v("",!0)]),r(g,{style:{color:"#c8c8c8"}}),t("span",xt,e(a.dateFormat("YYYY-mm-dd HH:MM:SS",o.checkoutDate)),1),t("span",St,e(o.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),r(k,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":l[7]||(l[7]=o=>a.centerDialogVisible=o),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:m(()=>[t("div",{style:tt([{"overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[r(g,{"content-position":"left"},{default:m(()=>[p("基本信息")]),_:1}),t("div",null,[t("p",null,[Lt,t("span",null,e(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Vt,t("span",null,e(parseFloat(a.listData.yjtJyInformationDetails.suttle))+e(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Yt,t("span",null,e(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Ft,t("span",null,e(a.listData.yjtJyInformationDetails.suttleperson),1),p("     "),Ht,t("span",null,e(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[Bt,t("span",null,e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),r(g,{"content-position":"left"},{default:m(()=>[p("质检信息")]),_:1}),t("div",null,[t("p",null,[Nt,t("span",null,e(a.listData.yjtJyInformationDetails.exteriorName),1),p("    "),a.listData.yjtJyInformationDetails.exterior!="0"?(d(),b("span",Mt,"类型：")):v("",!0),t("span",null,e(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Ut,t("span",null,e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Et,t("span",null,e(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[At,t("span",null,e(a.listData.yjtJyInformationDetails.alterReason),1)])]),a.listData.yjtJyInformationDetails.exterior!="0"?(d(),b("div",Rt,[(d(!0),b(Y,null,Q(a.listData.yjtJyInformationFileList,(o,A)=>(d(),j(N,{style:{margin:"0 2%"},onClick:a.seeImg,width:"45%",height:"8rem",fit:"cover",position:"left",src:o},null,8,["onClick","src"]))),256))])):v("",!0),a.listData.yjtJyInformationDetails.status=="0"?(d(),j(M,{key:1,modelValue:a.auditorContent,"onUpdate:modelValue":l[3]||(l[3]=o=>a.auditorContent=o),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):v("",!0),a.listData.yjtJyInformationDetails.status!="0"?(d(),b("div",Qt,[r(g,{"content-position":"left"},{default:m(()=>[p("审核信息")]),_:1}),t("p",null,[Tt,t("span",null,e(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),p("     "),Ot,t("span",null,e(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[zt,t("span",null,e(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[Pt,t("span",null,e(a.listData.yjtJyInformationDetails.auditorContent),1)])])):v("",!0)]),r(U,{show:a.showImage,"onUpdate:show":l[4]||(l[4]=o=>a.showImage=o),images:a.listData.yjtJyInformationFileList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(d(),b("div",qt,[r(E,null,{default:m(()=>[r(J,{span:"2"}),r(J,{span:"10"},{default:m(()=>[r(V,{icon:"close",type:"danger",style:{width:"90%"},onClick:l[5]||(l[5]=o=>a.cathodeCopperAuditorClick("1"))},{default:m(()=>[p("驳回 ")]),_:1})]),_:1}),r(J,{span:"10"},{default:m(()=>[r(V,{icon:"passed",type:"success",style:{width:"90%"},onClick:l[6]||(l[6]=o=>a.cathodeCopperAuditorClick("2"))},{default:m(()=>[p("通过 ")]),_:1})]),_:1}),r(J,{span:"2"})]),_:1})])):v("",!0)],4)]),_:1},8,["modelValue"])],64)}const ca=X(gt,[["render",Xt],["__scopeId","data-v-1a3e7e27"]]);export{ca as default};
