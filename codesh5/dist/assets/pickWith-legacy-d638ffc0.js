System.register(["./el-tag-legacy-e961511b.js","./el-overlay-legacy-7e8eb645.js","./index-legacy-48e23aa3.js","./index-legacy-5039dca1.js","./el-select-legacy-69048b65.js","./el-popper-legacy-95cfe048.js","./el-table-column-legacy-7608815e.js","./index-legacy-eda59a38.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-654201ea.js","./btn_shoudong-legacy-5e849329.js","./function-call-legacy-9ae3bc9a.js","./index-legacy-776ca772.js","./use-global-config-legacy-f7ffa327.js","./objects-legacy-4fa803bc.js"],(function(e,a){"use strict";var l,t,n,i,o,s,c,d,u,r,g,v,b,h,p,m,A,F,y,w,f,x,D,j,C,B,R,U,k,E,G,S,N,I,M,V,T,H,L,Z,z,Y;return{setters:[null,e=>{l=e.E},e=>{t=e._,n=e.f,i=e.t,o=e.u,s=e.I,c=e.r,d=e.a,u=e.J,r=e.o,g=e.b,v=e.c,b=e.d,h=e.w,p=e.j,m=e.e,A=e.k,F=e.F,y=e.s,w=e.N,f=e.U,x=e.O,D=e.p,j=e.i,C=e.V,B=e.a0,R=e.a1,U=e.X,k=e.$,E=e.R,G=e.a2},null,e=>{S=e.E,N=e.a},null,e=>{I=e.E,M=e.a},null,e=>{V=e.B},e=>{T=e.c,H=e.b},e=>{L=e._,Z=e.a},e=>{z=e.s,Y=e.a},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-3e0a847e]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-3e0a847e]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-3e0a847e]{background-color:#3c5d85;color:#fff}.container[data-v-3e0a847e]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-3e0a847e]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-3e0a847e]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-3e0a847e]{width:45px}.btn-area>div[data-v-3e0a847e]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-3e0a847e]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-3e0a847e]:nth-child(3){background-color:var(--btn-color1)}[data-v-3e0a847e] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-3e0a847e] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const Q={setup(){n.await("scanner",(a=>{if("null"!=a){let l=a;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(l)&&25===l.length){let a={};a.fBarcode=l,T(a).then((a=>{if(a.data.data)return j(l).then((a=>{let l={date:a.shengchanriqi,number:a.kunxuhao,barcode:a.barcode,weight:a.kunjingzhong};C(i(e.value),l)}));z({title:"提示",width:"600",message:a.data.message}).then((()=>{}))}))}else z({title:"提示",width:"600",message:"对不起，此条码不符合规范"}).then((()=>{}))}else z({title:"提示",width:"600",message:"数据获取失败"}).then((()=>{}))})),o(),s();const e=c([]),a=d(),l=c(""),t=c(""),g=c("0"),v=c(""),b=c("0"),h=c("0"),p=c("0"),m=c(!1),A=c(""),F=c(""),w=c(""),f=u({barCodeSelectList:[]});let x="";r((()=>{let l=i(a.state.chukudanListInfo);i(a.state.carInfo.pizhong)&&(b.value=i(a.state.carInfo.pizhong).toFixed(4)),t.value=new V(l.F_PLANSUTTLE).minus(l.F_SUTTLE).toFixed(4),e.value=i(a.state.scandList);let n=i(a.state.scandCalculateData);0==Object.getOwnPropertyNames(n).length?(v.value=new V(l.F_PLANSUTTLE).minus(l.F_SUTTLE).toFixed(4),p.value=new V(b.value).plus(g.value).toFixed(4)):(g.value=n.yij1,v.value=n.ques,p.value=n.pz,h.value=n.yij2)}));const D=n=>{if(n.length>0)for(let a=0;a<n.length;a++){let i=n[a];g.value=new V(g.value).plus(new V(i.weight).dividedBy(1e3)).toFixed(4),v.value=new V(t.value).minus(g.value).toFixed(4),p.value=new V(b.value).plus(g.value).toFixed(4),e.value=n,h.value=n.length,l.value=Math.random()}else g.value="0",v.value=t.value,h.value="0",p.value=new V(b.value).plus(g.value).toFixed(4);let i={};i.yij1=g.value,i.ques=v.value,i.pz=p.value,i.yij2=h.value,a.commit("setScandCalculateData",i),a.commit("setScandList",e.value),v.value<0&&z({title:"提示",width:"600",message:"缺少数值已为负数"}).then((()=>{}))},j=e=>{let a=e.split("");const l=a.slice(0,3).join(""),t=a.slice(3,5).join(""),n=a.slice(5,7).join(""),i=a.slice(7,13).join(""),o=a.slice(13,17).join(""),s=a.slice(17,20).join(""),c=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,d)=>{a({barcode:e,qiyedaima:l,chanpinleibie:t,chanpindengji:n,shengchanriqi:i,chanpinpihao:o,kunxuhao:s,kunjingzhong:c})}))},C=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))z({title:"提示",width:"600",message:"该批次已经选择，请勿重复选择"}).then((()=>{}));else{let l=[];e.unshift(a),l=e,D(l)}};return{barCodeSelect:A,F_BATCHGROUP:F,F_BATCHNUMBER:w,listData:f,itemKey:l,yingj:t,yij1:g,ques:v,pizhong:b,yij2:h,pz:p,tableData:e,centerDialogVisibleTXM:m,passedTXMClick:()=>""==A.value?(z({title:"提示",width:"600",message:"请选择条形码"}).then((()=>{})),!1):(m.value=!1,j(A.value).then((a=>{let l={date:a.shengchanriqi,number:a.kunxuhao,barcode:a.barcode,weight:a.kunjingzhong};C(i(e.value),l)}))),onSubmit:e=>{A.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;H({strBatchno:a}).then((e=>{f.barCodeSelectList=e.data.data,f.barCodeSelectList.length>0?y({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):z({title:"提示",width:"600",message:"没有查询到对应的条码数据"}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{m.value=!1},checkIfExist:C,decode:j,scanCode:()=>{n.scan()},onClickLeft:()=>history.back(),onHandle:()=>{m.value=!0},onConfirm:()=>{if(0==e.value.length)return z({title:"提示",width:"600",message:"没有要处理的数据"}).then((()=>{})),!1;let l=i(a.state.chukudanListInfo),t=i(a.state.carInfo),n={};n.F_DELIVERYNO=l.F_DELIVERYNO,n.strSuttle=g.value,n.strTruckNo=t.chehao,n.weighthousename=t.chengfang,n.id=t.danjuhao,n.strDataId=t.DataId;let o=i(e.value).map((e=>e.barcode+",")).join("");n.strBarcodes=o.substring(0,o.length-1),console.log(t),console.log(n)},selectRow:(e,a,l)=>{x=i(e)},onDelete:()=>{x?Y({title:"提示",width:"600",message:"是否要剔除当前所选数据？"}).then((()=>{let l=e.value.filter((e=>e.barcode!=x.barcode));e.value=l,a.commit("setScandList",e.value),x="",D(l)})).catch((e=>{console.log(e)})):z({title:"提示",width:"600",message:"请选择要剔除的的数据"}).then((()=>{}))}}}},W=e=>(D("data-v-3e0a847e"),e=e(),j(),e),J={class:"container"},P={class:"info-container"},X=W((()=>p("span",{class:"title"},"应拣",-1))),O=W((()=>p("span",{class:"title"},"已拣",-1))),q=W((()=>p("span",{class:"title"},"缺少",-1))),_=W((()=>p("span",{class:"title"},"皮重",-1))),K=W((()=>p("span",{class:"title"},"捆数",-1))),$=W((()=>p("span",{class:"title"},"合计",-1))),ee={class:"btn-area"},ae=[W((()=>p("img",{src:L,alt:""},null,-1))),W((()=>p("div",null,"确认",-1)))],le=[W((()=>p("img",{src:Z,alt:"",type:"primary"},null,-1))),W((()=>p("div",null,"手动",-1)))],te=[W((()=>p("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA8CAYAAADRy2JxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUNBM0RGNDAwNUU5MTFFQUJGRUFBQzhBMDZENDBERDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUNBM0RGNDEwNUU5MTFFQUJGRUFBQzhBMDZENDBERDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFQ0EzREYzRTA1RTkxMUVBQkZFQUFDOEEwNkQ0MERENCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFQ0EzREYzRjA1RTkxMUVBQkZFQUFDOEEwNkQ0MERENCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsgzfqwAAAYkSURBVHja7Jv5b5RF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",alt:"",type:"primary"},null,-1))),W((()=>p("div",null,"剔除",-1)))],ne={style:{margin:"16px"}},ie={style:{"margin-top":"10px"}},oe=W((()=>p("p",null,"条形码",-1)));e("default",t(Q,[["render",function(e,a,t,n,i,o){const s=C,c=w,d=M,u=I,r=B,y=R,D=U,j=S,V=N,T=k,H=E,L=G,Z=l;return g(),v(F,null,[b(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:h((()=>[b(s,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),p("div",J,[(g(),m(u,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:h((()=>[b(d,{fixed:"",prop:"date",label:"日期"}),b(d,{prop:"number",label:"包号"}),b(d,{prop:"weight",label:"重量"}),b(d,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),p("div",P,[X,O,q,p("span",null,A(n.yingj),1),p("span",null,A(n.yij1),1),p("span",null,A(n.ques),1),_,K,$,p("span",null,A(n.pizhong),1),p("span",null,A(n.yij2),1),p("span",null,A(n.pz),1)]),p("div",ee,[p("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},ae),p("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},le),p("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},te)])]),b(Z,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:h((()=>[b(L,{onSubmit:n.onSubmit},{default:h((()=>[b(y,{inset:""},{default:h((()=>[b(r,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),b(r,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),p("div",ne,[b(D,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:h((()=>[f(" 查询 ")])),_:1}),p("div",ie,[oe,b(V,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:h((()=>[(g(!0),v(F,null,x(n.listData.barCodeSelectList,(e=>(g(),m(j,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),b(H,{style:{"margin-top":"15px"}},{default:h((()=>[b(T,{span:"2"}),b(T,{span:"10"},{default:h((()=>[b(D,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:h((()=>[f("确定 ")])),_:1},8,["onClick"])])),_:1}),b(T,{span:"10",style:{"text-align":"center"}},{default:h((()=>[b(D,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:h((()=>[f("退出 ")])),_:1},8,["onClick"])])),_:1}),b(T,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-3e0a847e"]]))}}}));
