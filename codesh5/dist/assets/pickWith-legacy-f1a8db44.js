System.register(["./el-tag-legacy-38e8d59c.js","./el-overlay-legacy-238ce5bc.js","./index-legacy-f518dbe5.js","./index-legacy-5039dca1.js","./el-select-legacy-4b271e54.js","./el-popper-legacy-4f465adc.js","./el-table-column-legacy-1a2737e3.js","./index-legacy-eda59a38.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-07e6d2bd.js","./btn_queren-legacy-7f409558.js","./btn_shoudong-legacy-bfef57fe.js","./btn_tichu-legacy-29a262ad.js","./function-call-legacy-1cf1052b.js","./index-legacy-71659244.js","./use-global-config-legacy-d8e84f88.js","./objects-legacy-c6b9ae50.js"],(function(e,a){"use strict";var t,l,n,i,o,s,c,d,r,u,h,g,p,m,b,v,f,y,w,C,F,k,x,j,_,B,T,E,R,D,L,S,U,V,N,z,A,I,H,M,O,q,P,X,G,W;return{setters:[null,e=>{t=e.E},e=>{l=e._,n=e.u,i=e.E,o=e.r,s=e.a,c=e.H,d=e.I,r=e.t,u=e.o,h=e.b,g=e.c,p=e.d,m=e.w,b=e.i,v=e.e,f=e.j,y=e.F,w=e.J,C=e.f$,F=e.g0,k=e.N,x=e.U,j=e.O,_=e.p,B=e.h,T=e.V,E=e.a0,R=e.a1,D=e.X,L=e.$,S=e.R,U=e.a2},null,e=>{V=e.E,N=e.a},null,e=>{z=e.E,A=e.a},null,e=>{I=e.B},e=>{H=e.c,M=e.b,O=e.s},e=>{q=e._},e=>{P=e._},e=>{X=e._},e=>{G=e.a,W=e.s},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-ae884a4e]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-ae884a4e]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-ae884a4e]{background-color:#3c5d85;color:#fff}.container[data-v-ae884a4e]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-ae884a4e]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-ae884a4e]{border-radius:25px;font-size:20px;width:30%;min-height:50px}.btn-area img[data-v-ae884a4e]{width:45px}.btn-area>div[data-v-ae884a4e]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-ae884a4e]:nth-child(1){background-color:var(--btn-color1)}.btn-area>div[data-v-ae884a4e]:nth-child(3){background-color:var(--btn-color1)}[data-v-ae884a4e] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-ae884a4e] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const $={setup(){const e=n();i();const a=o([]),t=s(),l=o(""),h=o(""),g=o("0"),p=o(""),m=o("0"),b=o("0"),v=o("0"),f=o(!1),y=o(""),k=o(""),x=o(""),j=o(""),_=c({barCodeSelectList:[]});console.log(e.currentRoute.value.path),d.await("scanner",(t=>{if("/pickWith"==e.currentRoute.value.path)if("null"!=t){let e=t;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,H(t).then((t=>{if(t.data.data)return E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};R(r(a.value),t)}));G({title:"提示",width:"600",message:t.data.message}).then((()=>{}))}))}else G({title:"提示",width:"600",message:"对不起，此条码不符合规范"}).then((()=>{}))}else G({title:"提示",width:"600",message:"数据获取失败"}).then((()=>{}))}));let B="";u((()=>{let e=r(t.state.chukudanListInfo);r(t.state.carInfo.pizhong)&&(m.value=r(t.state.carInfo.pizhong).toFixed(4)),h.value=new I(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),a.value=r(t.state.scandList);let l=r(t.state.scandCalculateData);0==Object.getOwnPropertyNames(l).length?(p.value=new I(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),v.value=new I(m.value).plus(g.value).toFixed(4)):(g.value=l.yij1,p.value=l.ques,v.value=l.pz,b.value=l.yij2)}));const T=(e,n)=>{"add"==y.value?g.value=new I(g.value).plus(new I(n.weight).dividedBy(1e3).toNumber()).toFixed(4):g.value=new I(g.value).minus(new I(n.weight).dividedBy(1e3).toNumber()).toFixed(4),p.value=new I(h.value).minus(g.value).toFixed(4),v.value=new I(m.value).plus(g.value).toFixed(4),b.value=e.length,a.value=e,l.value=Math.random();let i={};i.yij1=g.value,i.ques=p.value,i.pz=v.value,i.yij2=b.value,t.commit("setScandCalculateData",i),t.commit("setScandList",a.value),p.value<0&&G({title:"提示",width:"600",message:"缺少数值已为负数"}).then((()=>{}))},E=e=>{let a=e.split("");const t=a.slice(0,3).join(""),l=a.slice(3,5).join(""),n=a.slice(5,7).join(""),i=a.slice(7,13).join(""),o=a.slice(13,17).join(""),s=a.slice(17,20).join(""),c=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,d)=>{a({barcode:e,qiyedaima:t,chanpinleibie:l,chanpindengji:n,shengchanriqi:i,chanpinpihao:o,kunxuhao:s,kunjingzhong:c})}))},R=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))G({title:"提示",width:"600",message:"该批次已经选择，请勿重复选择"}).then((()=>{}));else{let t=[];e.unshift(a),t=e,y.value="add",T(t,a)}};return{typeName:y,barCodeSelect:k,F_BATCHGROUP:x,F_BATCHNUMBER:j,listData:_,itemKey:l,yingj:h,yij1:g,ques:p,pizhong:m,yij2:b,pz:v,tableData:a,centerDialogVisibleTXM:f,passedTXMClick:()=>{if(""==k.value)return G({title:"提示",width:"600",message:"请选择条形码"}).then((()=>{})),!1;f.value=!1;let e=k.value;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let t={};t.fBarcode=e,H(t).then((t=>{if(t.data.data)return E(e).then((e=>{let t={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};R(r(a.value),t)}));G({title:"提示",width:"600",message:t.data.message}).then((()=>{}))}))}else G({title:"提示",width:"600",message:"对不起，此条码不符合规范"}).then((()=>{}))},onSubmit:e=>{k.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;M({strBatchno:a}).then((e=>{_.barCodeSelectList=e.data.data,_.barCodeSelectList.length>0?w({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):G({title:"提示",width:"600",message:"没有查询到对应的条码数据"}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{f.value=!1},checkIfExist:R,decode:E,scanCode:()=>{d.scan()},onClickLeft:()=>{e.push({path:"/pickWithQueryInfoData"})},onHandle:()=>{f.value=!0},onConfirm:()=>{if(0==a.value.length)return G({title:"提示",width:"600",message:"没有要处理的数据"}).then((()=>{})),!1;W({title:"提示",width:"600",message:"是否已完成扫描？"}).then((()=>{C({duration:0,forbidClick:!0,message:"拣配中..."});let l=r(t.state.chukudanListInfo),n=r(t.state.carInfo),i={};i.F_DELIVERYNO=l.F_DELIVERYNO,i.strSuttle=g.value,i.strTruckNo=n.chehao,i.weighthousename=n.chengfang,i.id=n.danjuhao,i.strDataId=n.DataId;let o=r(a.value).map((e=>e.barcode+",")).join("");i.strBarcodes=o.substring(0,o.length-1),O(i).then((l=>{F(),"200"==l.data.code?(a.value=[],G({title:"提示",width:"600",message:l.data.message}).then((()=>{t.commit("setPickWithScroll",0),t.commit("setChukudanListInfo",{}),t.commit("setCarInfo",{}),t.commit("setScandList",[]),t.commit("setScandCalculateData",{}),e.push({path:"/pickWithQueryListData"})}))):G({title:"提示",width:"600",message:l.data.message}).then((()=>{}))}))})).catch((e=>{F(),console.log(e)}))},selectRow:(e,a,t)=>{B=r(e)},onDelete:()=>{B?W({title:"提示",width:"600",message:"是否要剔除当前所选数据？"}).then((()=>{let e=a.value.filter((e=>e.barcode!=B.barcode));a.value=e,y.value="edit",T(e,B),B=""})).catch((e=>{console.log(e)})):G({title:"提示",width:"600",message:"请选择要剔除的的数据"}).then((()=>{}))}}}},K=e=>(_("data-v-ae884a4e"),e=e(),B(),e),Q={class:"container"},Y={class:"info-container"},J=K((()=>b("span",{class:"title"},"应拣",-1))),Z=K((()=>b("span",{class:"title"},"已拣",-1))),ee=K((()=>b("span",{class:"title"},"缺少",-1))),ae=K((()=>b("span",{class:"title"},"皮重",-1))),te=K((()=>b("span",{class:"title"},"捆数",-1))),le=K((()=>b("span",{class:"title"},"合计",-1))),ne={class:"btn-area"},ie=[K((()=>b("img",{src:q,alt:""},null,-1))),K((()=>b("div",null,"确认",-1)))],oe=[K((()=>b("img",{src:P,alt:"",type:"primary"},null,-1))),K((()=>b("div",null,"手动",-1)))],se=[K((()=>b("img",{src:X,alt:"",type:"primary"},null,-1))),K((()=>b("div",null,"剔除",-1)))],ce={style:{margin:"16px"}},de={style:{"margin-top":"10px"}},re=K((()=>b("p",null,"条形码",-1)));e("default",l($,[["render",function(e,a,l,n,i,o){const s=T,c=k,d=A,r=z,u=E,w=R,C=D,F=V,_=N,B=L,I=S,H=U,M=t;return h(),g(y,null,[p(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:m((()=>[p(s,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),b("div",Q,[(h(),v(r,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:m((()=>[p(d,{fixed:"",prop:"date",label:"日期"}),p(d,{prop:"number",label:"包号"}),p(d,{prop:"weight",label:"重量"}),p(d,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),b("div",Y,[J,Z,ee,b("span",null,f(n.yingj),1),b("span",null,f(n.yij1),1),b("span",null,f(n.ques),1),ae,te,le,b("span",null,f(n.pizhong),1),b("span",null,f(n.yij2),1),b("span",null,f(n.pz),1)]),b("div",ne,[b("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},ie),b("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},oe),b("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},se)])]),p(M,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:m((()=>[p(H,{onSubmit:n.onSubmit},{default:m((()=>[p(w,{inset:""},{default:m((()=>[p(u,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),p(u,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),b("div",ce,[p(C,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:m((()=>[x(" 查询 ")])),_:1}),b("div",de,[re,p(_,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:m((()=>[(h(!0),g(y,null,j(n.listData.barCodeSelectList,(e=>(h(),v(F,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),p(I,{style:{"margin-top":"15px"}},{default:m((()=>[p(B,{span:"2"}),p(B,{span:"10"},{default:m((()=>[p(C,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:m((()=>[x("确定 ")])),_:1},8,["onClick"])])),_:1}),p(B,{span:"10",style:{"text-align":"center"}},{default:m((()=>[p(C,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:m((()=>[x("退出 ")])),_:1},8,["onClick"])])),_:1}),p(B,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-ae884a4e"]]))}}}));
