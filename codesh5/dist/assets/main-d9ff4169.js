import"./index-772ef1c3.js";import{E as H}from"./el-overlay-cdd952cd.js";import{a9 as E,aa as M,_ as P,f as U,s as T,u as A,r as v,S as O,b as o,c as r,j as t,d as f,w as h,F as I,N as Q,ab as Z,ac as z,Z as F,O as c,k as l,g as _,a1 as G,Y as K,e as D,p as W,i as X,ae as $,a3 as tt}from"./index-501e2f65.js";import{a as et,E as at}from"./el-card-54b6599e.js";/* empty css              *//* empty css              */function ot(g){return E({url:`${M.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecord`,method:"post",data:g})}function nt(g){return E({url:`${M.api_base_url}/mobileTerminalApi.do?method=qualityCheckingRecordDecide`,method:"get",params:g})}const lt=""+new URL("../image/saoma.png",import.meta.url).href;const st={setup(){U.await("scanner",n=>{n!="null"?(e.qualityCheckingList=[],i.value=1,k.value=!0,b({batchnumber:"",barcode:n})):T({message:"数据获取失败",type:"fail",className:"particulars-detail-popup"})});const g=A(),s=v(""),L=v(!1),e=O({qualityCheckingList:[],yjtJyInformationData:{},yjtJyInformationDecideDataList:[],filePathList:[]}),S=v(!1),N=v(!1),k=v(!1),x=v(10),i=v(0),C=()=>{g.push({path:"/home"})},j=()=>{i.value=1,e.qualityCheckingList=[],k.value=!1,b({batchnumber:s.value,barcode:""})},V=()=>{i.value=1,e.qualityCheckingList=[],k.value=!1,b({batchnumber:s.value,barcode:""})},w=()=>{i.value=i.value+1,b({batchnumber:s.value,barcode:""})},q=()=>{U.scan()},J=n=>{e.filePathList=[],e.filePathList=n,S.value=!0},R=n=>{if(e.yjtJyInformationData=n,n.state=="1"){let p={yjtJyInformationId:n.id,status:"2"};a(p)}L.value=!0};function a(n){nt(n).then(p=>{e.yjtJyInformationDecideDataList=p.data.data}).catch(p=>{console.log(p)})}function b(n){let p={},y={},u={};u.limit=x.value,u.offset=i.value,u.blockId="paramBlock",u.data=n,y.paramBlock=u,p.blocks=y,ot(p).then(m=>{e.qualityCheckingList=[...e.qualityCheckingList,...m.data.blocks.resultBlock.data],N.value=!1,e.qualityCheckingList.length==m.data.blocks.resultBlock.total&&(k.value=!0)}).catch(m=>{console.log(m)})}return{showImage:S,centerDialogVisible:L,searchValue:s,loading:N,finished:k,limit:x,offset:i,listData:e,onClickLeft:C,onLoad:w,statusChange:j,dateFormat:(n,p)=>{let y,u=new Date(p);const m={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let B in m)y=new RegExp("("+B+")").exec(n),y&&(n=n.replace(y[1],y[1].length==1?m[B]:m[B].padStart(y[1].length,"0")));return n},onSearch:V,qualityCheckingRecordDetails:R,scanClick:q,seeImg:J}}},d=g=>(W("data-v-f65edcd1"),g=g(),X(),g),it={class:"header"},rt={style:{display:"flex","background-color":"#ffffff"}},ct={id:"content",class:"content"},dt={style:{padding:"0px 5px 5px 5px"}},ut=d(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),ht=d(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),_t={key:0,style:{"margin-left":"30px"}},pt={key:0},ft={key:1},gt={key:2},yt={style:{"overflow-y":"auto","overscroll-behavior-y":"contain",height:"calc(100vh - 180px)"}},mt=d(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),kt=d(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),vt=d(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),bt=d(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Dt=d(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),wt=d(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),xt={key:0},Ct=d(()=>t("span",{style:{"font-weight":"bold"}},"是否最新：",-1)),It=d(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Lt={key:0,style:{"font-weight":"bold"}},St=d(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Nt=d(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),jt={key:0},Vt=d(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),qt={key:1};function Jt(g,s,L,e,S,N){const k=Q,x=Z,i=et,C=$,j=at,V=z,w=G,q=tt,J=K,R=H;return o(),r(I,null,[t("div",it,[f(k,{title:"质检记录列表",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),t("div",rt,[f(x,{style:{width:"80%"},modelValue:e.searchValue,"onUpdate:modelValue":s[0]||(s[0]=a=>e.searchValue=a),shape:"round",placeholder:"请输入编号搜索",onSearch:e.onSearch},null,8,["modelValue","onSearch"]),t("img",{style:{width:"55px",height:"55px"},src:lt,onClick:s[1]||(s[1]=(...a)=>e.scanClick&&e.scanClick(...a))})])]),t("div",ct,[f(V,{loading:e.loading,"onUpdate:loading":s[2]||(s[2]=a=>e.loading=a),finished:e.finished,offset:"50","finished-text":"没有更多了",onLoad:e.onLoad},{default:h(()=>[t("div",dt,[(o(!0),r(I,null,F(e.listData.qualityCheckingList,(a,b)=>(o(),D(j,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:Y=>e.qualityCheckingRecordDetails(a)},{default:h(()=>[t("div",null,[t("p",null,[ut,t("span",null,l(a.batchnumber),1)]),t("p",null,[ht,t("span",null,l(parseFloat(a.suttle))+l(a.unit),1),a.exteriorName?(o(),r("span",_t,[a.exteriorName=="优等品"?(o(),r("span",pt,[f(i,null,{default:h(()=>[c(l(a.exteriorName),1)]),_:2},1024)])):_("",!0),a.exteriorName=="合格"?(o(),r("span",ft,[f(i,{type:"warning"},{default:h(()=>[c(l(a.exteriorName),1)]),_:2},1024)])):_("",!0),a.exteriorName=="不合格"?(o(),r("span",gt,[f(i,{type:"danger"},{default:h(()=>[c(l(a.exteriorName),1)]),_:2},1024)])):_("",!0)])):_("",!0)]),a.state=="0"?(o(),D(C,{key:0,type:"primary"},{default:h(()=>[c("未质检")]),_:1})):_("",!0),a.state=="1"?(o(),D(C,{key:1,type:"success"},{default:h(()=>[c("已质检")]),_:1})):_("",!0)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),f(R,{modelValue:e.centerDialogVisible,"onUpdate:modelValue":s[4]||(s[4]=a=>e.centerDialogVisible=a),"destroy-on-close":!0,title:"质检记录详情",width:"96%","align-center":""},{default:h(()=>[t("div",yt,[t("div",null,[f(w,{"content-position":"left"},{default:h(()=>[c("基本信息")]),_:1}),t("p",null,[mt,t("span",null,l(e.listData.yjtJyInformationData.batchnumber),1)]),t("p",null,[kt,t("span",null,l(parseFloat(e.listData.yjtJyInformationData.suttle))+l(e.listData.yjtJyInformationData.unit),1)]),t("p",null,[vt,t("span",null,l(e.listData.yjtJyInformationData.standard),1)]),t("p",null,[bt,t("span",null,l(e.listData.yjtJyInformationData.suttleperson),1),c("     "),Dt,t("span",null,l(e.listData.yjtJyInformationData.scanUser),1)]),t("p",null,[wt,c(l(e.dateFormat("YYYY-mm-dd HH:MM:SS",e.listData.yjtJyInformationData.proDate)),1)])]),e.listData.yjtJyInformationData.state=="1"?(o(),r("div",xt,[f(w,{"content-position":"left"},{default:h(()=>[c("质检信息")]),_:1}),(o(!0),r(I,null,F(e.listData.yjtJyInformationDecideDataList,(a,b)=>(o(),r("div",null,[t("div",null,[t("p",null,[Ct,a.details.isNew=="0"?(o(),D(i,{key:0,type:"success"},{default:h(()=>[c("是")]),_:1})):_("",!0),a.details.isNew=="1"?(o(),D(i,{key:1,type:"danger"},{default:h(()=>[c("否")]),_:1})):_("",!0)]),t("p",null,[It,t("span",null,l(a.details.exteriorName),1),c("     "),a.details.exterior!="0"?(o(),r("span",Lt,"类型：")):_("",!0),t("span",null,l(a.details.dictName),1)]),t("p",null,[St,c(l(e.dateFormat("YYYY-mm-dd HH:MM:SS",a.details.checkoutDate)),1)]),t("p",null,[Nt,t("span",null,l(a.details.checkoutUser),1)]),a.details.alterReason?(o(),r("p",jt,[Vt,t("span",null,l(a.details.alterReason),1)])):_("",!0),a.details.exterior!="0"?(o(),r("div",qt,[(o(!0),r(I,null,F(a.fileList,(Y,n)=>(o(),D(q,{style:{margin:"0 2%"},onClick:p=>e.seeImg(a.fileList),width:"45%",height:"8rem",fit:"cover",position:"left",src:Y},null,8,["onClick","src"]))),256))])):_("",!0),f(w)])]))),256))])):_("",!0)]),f(J,{show:e.showImage,"onUpdate:show":s[3]||(s[3]=a=>e.showImage=a),images:e.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])]),_:1},8,["modelValue"])],64)}const Mt=P(st,[["render",Jt],["__scopeId","data-v-f65edcd1"]]);export{Mt as default};
