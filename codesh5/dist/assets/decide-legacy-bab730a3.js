System.register(["./index-legacy-e566b6ee.js","./el-card-legacy-9c546c23.js","./index-legacy-2f76a666.js","./el-tag-legacy-3631ff16.js","./el-select-legacy-8a405756.js","./el-popper-legacy-d4c995b5.js","./index-legacy-d1883c5a.js","./index-legacy-eda59a38.js","./gradeDetermination-legacy-357968b5.js","./index-legacy-c47127f6.js"],(function(e,a){"use strict";var o,l,t,n,r,i,d,s,c,u,v,p,g,m,b,h,y,f,_,k,w,x,C,I,D,j,J,L,S,R,F,z,U,N,V,P,q,M;return{setters:[e=>{o=e._,l=e.u,t=e.E,n=e.r,r=e.H,i=e.I,d=e.o,s=e.b,c=e.c,u=e.i,v=e.d,p=e.w,g=e.J,m=e.P,b=e.Q,h=e.N,y=e.Z,f=e.V,_=e.W,k=e.j,w=e.F,x=e.O,C=e.e,I=e.f,D=e.$,j=e.a5,J=e.a6,L=e.a2,S=e.a3,R=e.p,F=e.h},e=>{z=e.E},null,null,e=>{U=e.E,N=e.a},null,null,null,e=>{V=e.d,P=e.g,q=e.b,M=e.e},null],execute:function(){var a=document.createElement("style");a.textContent=".van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.header[data-v-9499c72e]{width:100%;height:46px;line-height:46px;position:absolute;z-index:5;top:0}.content[data-v-9499c72e]{width:100%;overflow:scroll;top:46px;position:absolute;z-index:10;bottom:5px}\n",document.head.appendChild(a);const Y={setup(){const e=l(),a=t(),o=n(""),s=n(""),c=n(""),u=n(""),v=n(""),p=n(""),h=n([]),y=n([]),f=n([]),_=n(!1),k=n(!1),w=n([]),x=r({yjtJyInformationData:{},typeCodeList:[],alterReasonList:[]}),C=n(!1);x.yjtJyInformationData=JSON.parse(decodeURIComponent(a.query.yjtJyInformation));const I=n(JSON.parse(decodeURIComponent(a.query.exterior))),D=n(JSON.parse(decodeURIComponent(a.query.tabIndex)));i.await("takePhoto",(e=>{if("null"!=e){let a={};a.index=h.value.length+1,a.base64Img=e,h.value.push(a),y.value.push(e);let o=new FormData,l="/cathodeCopper/"+x.yjtJyInformationData.batchgroup+"/"+x.yjtJyInformationData.batchnumber;o.append("file",function(e){let a=e.split(","),o=a[0].match(/:(.*?);/)[1],l=atob(a[1]),t=l.length,n=new Uint8Array(t);for(;t--;)n[t]=l.charCodeAt(t);let r=Math.random().toString(36).slice(-8),i=o.split("/")[1];return new File([n],r+"."+i,{type:o})}(e)),o.append("path",l),V(o).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=h.value.length,f.value.push(a)})).catch((e=>{console.log(e)}))}})),"1"==I.value?(o.value="qualified",s.value="合格品类型"):"2"==I.value&&(o.value="unqualified",s.value="不合格品类型"),d((()=>{j(o.value),J()}));const j=e=>{let a={};a.typeCode=e,P(a).then((e=>{200==e.data.code&&(x.typeCodeList=e.data.data,v.value=String(x.typeCodeList[0].id))})).catch((e=>{console.log(e)}))},J=()=>{let e={},a={},o={limit:9999,offset:1,blockId:"paramBlock",data:{}};a.paramBlock=o,e.blocks=a,q(e).then((e=>{x.alterReasonList=e.data.blocks.resultBlock.data})).catch((e=>{console.log(e)}))};return{imgList:w,showImage:_,showLabelImage:k,fileList:h,base64ImgList:y,imagePath:f,takePhotoState:p,alterReason:u,remarks:c,typeCode:o,typeCodeText:s,listData:x,exterior:I,tabIndex:D,typeCodeChecked:v,disabled:C,seeImg:()=>{w.value=y.value,_.value=!0},takePhotoZJ:()=>{i.takePhoto()},onClickLeft:()=>{e.back()},dateFormat:(e,a)=>{let o,l=new Date(a);const t={"Y+":l.getFullYear().toString(),"m+":(l.getMonth()+1).toString(),"d+":l.getDate().toString(),"H+":l.getHours().toString(),"M+":l.getMinutes().toString(),"S+":l.getSeconds().toString()};for(let n in t)o=new RegExp("("+n+")").exec(e),o&&(e=e.replace(o[1],1==o[1].length?t[n]:t[n].padStart(o[1].length,"0")));return e},beforeDelete:(e,a)=>{f.value=f.value.filter((a=>a.index!=e)),h.value=h.value.filter((a=>a.index!=e)),y.value=y.value.filter((e=>e!=a))},conservation:()=>{if(C.value=!0,0==f.value.length)return g({message:"请上传质检照片",type:"fail",className:"particulars-detail-popup"}),C.value=!1,!1;if(1==D.value&&!u.value)return g({message:"请选择或者填写改判理由",type:"fail",className:"particulars-detail-popup"}),C.value=!1,!1;m({duration:0,forbidClick:!0,className:"particulars-detail-popup",message:"正在质检..."});let a={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[],labelFileList:[]},o=[];o.push(x.yjtJyInformationData),a.data=o,a.typeCodeChecked=v.value,a.active=D.value,a.exterior=I.value,a.remarks=c.value,a.alterReason=u.value,a.fileList=f.value,M(a).then((a=>{b(),200==a.data.code&&(g({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),C.value=!1,e.push({path:"/gradeDetermination",query:{barcode:x.yjtJyInformationData.barcode,tabState:"1"}}))})).catch((e=>{console.log(e),C.value=!1,b()}))},getTypeCodeData:j,getAlterReasonQuery:J}}},E=e=>(R("data-v-9499c72e"),e=e(),F(),e),H={class:"container"},O={class:"header"},Z={class:"content"},A=E((()=>u("span",{style:{"font-weight":"bold"}},"编号：",-1))),B=E((()=>u("span",{style:{"font-weight":"bold"}},"重量：",-1))),T=E((()=>u("span",{style:{"font-weight":"bold"}},"标准：",-1))),Q=E((()=>u("span",{style:{"font-weight":"bold"}},"计量员：",-1))),W=E((()=>u("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),$=E((()=>u("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),G=E((()=>u("span",{style:{color:"red"}},"*",-1))),K=E((()=>u("span",{style:{color:"red"}},"*",-1))),X={class:"van-uploader"},ee={class:"van-uploader__wrapper"},ae={class:"van-image van-uploader__preview-image"},oe=["src"],le=["onClick"],te=[E((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],ne=[E((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],re={key:0},ie=E((()=>u("span",{style:{color:"red"}},"*",-1)));e("default",o(Y,[["render",function(e,a,o,l,t,n){const r=h,i=D,d=j,g=J,m=U,b=N,R=L,F=S,V=z,P=y,q=f;return s(),c("div",H,[u("div",O,[v(r,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:l.onClickLeft},null,8,["onClickLeft"])]),u("div",Z,[v(V,{class:"box-card",shadow:"always"},{default:p((()=>[v(i,{"content-position":"left"},{default:p((()=>[_("基本信息")])),_:1}),u("div",null,[u("p",null,[A,u("span",null,k(l.listData.yjtJyInformationData.batchnumber),1)]),u("p",null,[B,u("span",null,k(parseFloat(l.listData.yjtJyInformationData.suttle))+k(l.listData.yjtJyInformationData.unit),1)]),u("p",null,[T,u("span",null,k(l.listData.yjtJyInformationData.standard),1)]),u("p",null,[Q,u("span",null,k(l.listData.yjtJyInformationData.suttleperson),1),_("      "),W,u("span",null,k(l.listData.yjtJyInformationData.scanUser),1)]),u("p",null,[$,u("span",null,k(l.dateFormat("YYYY-mm-dd HH:MM:SS",l.listData.yjtJyInformationData.proDate)),1)])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[G,_(k(l.typeCodeText),1)])),_:1}),v(g,{modelValue:l.typeCodeChecked,"onUpdate:modelValue":a[0]||(a[0]=e=>l.typeCodeChecked=e),direction:"horizontal"},{default:p((()=>[(s(!0),c(w,null,x(l.listData.typeCodeList,((e,a)=>(s(),C(d,{name:String(e.id)},{default:p((()=>[_(k(e.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[K,_(" 质检照片")])),_:1}),u("div",X,[u("div",ee,[(s(!0),c(w,null,x(l.fileList,((e,o)=>(s(),c("div",{class:"van-uploader__preview",key:e.index},[u("div",ae,[u("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[1]||(a[1]=(...e)=>l.seeImg&&l.seeImg(...e))},null,8,oe)]),u("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>l.beforeDelete(e.index,e.base64Img)},te,8,le)])))),128)),u("div",{class:"van-uploader__upload",onClick:a[2]||(a[2]=(...e)=>l.takePhotoZJ&&l.takePhotoZJ(...e))},ne)])])]),1==l.tabIndex?(s(),c("div",re,[v(i,{"content-position":"left"},{default:p((()=>[ie,_("改判理由")])),_:1}),v(b,{modelValue:l.alterReason,"onUpdate:modelValue":a[3]||(a[3]=e=>l.alterReason=e),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:p((()=>[(s(!0),c(w,null,x(l.listData.alterReasonList,(e=>(s(),C(m,{key:e.alterReason,label:e.alterReason,value:e.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):I("",!0),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[_("备注")])),_:1}),v(F,{inset:""},{default:p((()=>[v(R,{modelValue:l.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>l.remarks=e),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),v(P,{type:"primary",size:"large",disabled:l.disabled,style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px","background-color":"#003363",color:"#FFFFFF"},onClick:l.conservation},{default:p((()=>[_("提交 ")])),_:1},8,["disabled","onClick"]),v(q,{show:l.showImage,"onUpdate:show":a[5]||(a[5]=e=>l.showImage=e),images:l.imgList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])])])}],["__scopeId","data-v-9499c72e"]]))}}}));
