!function(){function a(a,e,o,n,r,t,l){try{var i=a[t](l),d=i.value}catch(s){return void o(s)}i.done?e(d):Promise.resolve(d).then(n,r)}function e(e){return function(){var o=this,n=arguments;return new Promise((function(r,t){var l=e.apply(o,n);function i(e){a(l,r,t,i,d,"next",e)}function d(e){a(l,r,t,i,d,"throw",e)}i(void 0)}))}}System.register(["./index-legacy-5f540a7a.js","./index-legacy-ddf179a4.js","./el-card-legacy-d48b2f56.js","./el-select-legacy-117f20bd.js","./el-popper-legacy-f20be80c.js","./index-legacy-d1883c5a.js"],(function(a,o){"use strict";var n,r,t,l,i,d,s,c,v,p,u,g,f,m,h,b,y,x,_,k,w,z,C,D,I,j,R,S,L,F,J,U,N,V,P;return{setters:[a=>{n=a._,r=a.a,t=a.R,l=a.r,i=a.S,d=a.U,s=a.ab,c=a.X,v=a.o,p=a.c,u=a.d,g=a.b,f=a.w,m=a.Q,h=a.Z,b=a.ac,y=a.N,x=a.a7,_=a.J,k=a.e,w=a.F,z=a.a5,C=a.x,D=a.a8,I=a.ad,j=a.ae,R=a.af,S=a.ag,L=a.k,F=a.p,J=a.f,U=a.ah},null,a=>{N=a.E},a=>{V=a.E,P=a.a},null,null],execute:function(){var o=document.createElement("style");o.textContent=":root{--van-uploader-size: 80px;--van-uploader-icon-size: 24px;--van-uploader-icon-color: var(--van-gray-4);--van-uploader-text-color: var(--van-text-color-2);--van-uploader-text-font-size: var(--van-font-size-sm);--van-uploader-upload-background: var(--van-gray-1);--van-uploader-upload-active-color: var(--van-active-color);--van-uploader-delete-color: var(--van-white);--van-uploader-delete-icon-size: 14px;--van-uploader-delete-background: rgba(0, 0, 0, .7);--van-uploader-file-background: var(--van-background);--van-uploader-file-icon-size: 20px;--van-uploader-file-icon-color: var(--van-gray-7);--van-uploader-file-name-padding: 0 var(--van-padding-base);--van-uploader-file-name-margin-top: var(--van-padding-xs);--van-uploader-file-name-font-size: var(--van-font-size-sm);--van-uploader-file-name-text-color: var(--van-gray-7);--van-uploader-mask-text-color: var(--van-white);--van-uploader-mask-background: rgba(50, 50, 51, .88);--van-uploader-mask-icon-size: 22px;--van-uploader-mask-message-font-size: var(--van-font-size-sm);--van-uploader-mask-message-line-height: var(--van-line-height-xs);--van-uploader-loading-icon-size: 22px;--van-uploader-loading-icon-color: var(--van-white);--van-uploader-disabled-opacity: var(--van-disabled-opacity)}.van-uploader{position:relative;display:inline-block}.van-uploader__wrapper{display:flex;flex-wrap:wrap}.van-uploader__wrapper--disabled{opacity:var(--van-uploader-disabled-opacity)}.van-uploader__input{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;opacity:0}.van-uploader__input-wrapper{position:relative}.van-uploader__input:disabled{cursor:not-allowed}.van-uploader__upload{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;width:var(--van-uploader-size);height:var(--van-uploader-size);margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;background:var(--van-uploader-upload-background)}.van-uploader__upload:active{background-color:var(--van-uploader-upload-active-color)}.van-uploader__upload--readonly:active{background-color:var(--van-uploader-upload-background)}.van-uploader__upload-icon{color:var(--van-uploader-icon-color);font-size:var(--van-uploader-icon-size)}.van-uploader__upload-text{margin-top:var(--van-padding-xs);color:var(--van-uploader-text-color);font-size:var(--van-uploader-text-font-size)}.van-uploader__preview{position:relative;margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;cursor:pointer}.van-uploader__preview-image{display:block;width:var(--van-uploader-size);height:var(--van-uploader-size);overflow:hidden}.van-uploader__preview-delete{position:absolute;top:0;right:0}.van-uploader__preview-delete--shadow{width:var(--van-uploader-delete-icon-size);height:var(--van-uploader-delete-icon-size);background:var(--van-uploader-delete-background);border-radius:0 0 0 12px}.van-uploader__preview-delete-icon{position:absolute;top:0;right:0;color:var(--van-uploader-delete-color);font-size:var(--van-uploader-delete-icon-size);transform:scale(.7) translate(10%,-10%)}.van-uploader__preview-cover{position:absolute;top:0;right:0;bottom:0;left:0}.van-uploader__mask{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-uploader-mask-text-color);background:var(--van-uploader-mask-background)}.van-uploader__mask-icon{font-size:var(--van-uploader-mask-icon-size)}.van-uploader__mask-message{margin-top:6px;padding:0 var(--van-padding-base);font-size:var(--van-uploader-mask-message-font-size);line-height:var(--van-uploader-mask-message-line-height)}.van-uploader__loading{width:var(--van-uploader-loading-icon-size);height:var(--van-uploader-loading-icon-size);color:var(--van-uploader-loading-icon-color)}.van-uploader__file{display:flex;flex-direction:column;align-items:center;justify-content:center;width:var(--van-uploader-size);height:var(--van-uploader-size);background:var(--van-uploader-file-background)}.van-uploader__file-icon{color:var(--van-uploader-file-icon-color);font-size:var(--van-uploader-file-icon-size)}.van-uploader__file-name{box-sizing:border-box;width:100%;margin-top:var(--van-uploader-file-name-margin-top);padding:var(--van-uploader-file-name-padding);color:var(--van-uploader-file-name-text-color);font-size:var(--van-uploader-file-name-font-size);text-align:center}.van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.container[data-v-c97ad868]{position:relative;height:100%;overflow:scroll;background-repeat:no-repeat;background-size:100%}.header[data-v-c97ad868]{position:sticky;top:0;z-index:999;overflow:hidden}\n",document.head.appendChild(o);const M={setup(){const a=r(),o=t(),n=l(""),v=l(""),p=l(""),u=l(""),g=l(""),f=i({yjtJyInformationData:{},typeCodeList:[],fileList:[],imagePath:[],alterReasonList:[]});f.yjtJyInformationData=JSON.parse(decodeURIComponent(o.query.yjtJyInformation));const y=l(JSON.parse(decodeURIComponent(o.query.exterior))),x=l(JSON.parse(decodeURIComponent(o.query.tabIndex)));"1"==y.value?(n.value="qualified",v.value="合格品类型"):"2"==y.value&&(n.value="unqualified",v.value="不合格品类型"),d((()=>{!function(a){let e={};e.typeCode=a,s(e).then((a=>{200==a.data.code&&(f.typeCodeList=a.data.data,g.value=String(f.typeCodeList[0].id))})).catch((a=>{console.log(a)}))}(n.value),function(){let a={},e={},o={limit:9999,offset:1,blockId:"paramBlock",data:{}};e.paramBlock=o,a.blocks=e,c(a).then((a=>{f.alterReasonList=a.data.blocks.resultBlock.data,console.log(f.alterReasonList)})).catch((a=>{console.log(a)}))}()}));return{alterReason:u,remarks:p,typeCode:n,typeCodeText:v,listData:f,exterior:y,tabIndex:x,typeCodeChecked:g,onClickLeft:()=>{a.back()},dateFormat:(a,e)=>{let o,n=new Date(e);const r={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()};for(let t in r)o=new RegExp("("+t+")").exec(a),o&&(a=a.replace(o[1],1==o[1].length?r[t]:r[t].padStart(o[1].length,"0")));return a},onRead:a=>{(function(a,o){var n=.52;return parseInt((a.size/1024).toFixed(2))<1024&&(n=.85),5120<parseInt((a.size/1024).toFixed(2))&&(n=.92),o&&(n=o),a[0]?Promise.all(Array.from(a).map((a=>this.compressImg(a,n)))):new Promise((o=>{if((a.size/1024).toFixed(2)<300)o({file:a});else{const r=new FileReader;r.onload=({target:{result:r}})=>{const t=new Image;t.onload=e((function*(){const e=document.createElement("canvas"),l=e.getContext("2d");var i=t.width,d=t.height,s=t.width,c=t.height;if(1024<=parseInt((a.size/1024).toFixed(2))&&parseInt((a.size/1024).toFixed(2))<=10240){var v=1600,p=1600;i=s,d=c,(s>v||c>p)&&(s/c>v/p?(i=v,d=Math.round(v*(c/s))):(d=p,i=Math.round(p*(s/c))))}10240<=parseInt((a.size/1024).toFixed(2))&&parseInt((a.size/1024).toFixed(2))<=20480&&(p=1400,i=s,d=c,(s>(v=1400)||c>p)&&(s/c>v/p?(i=v,d=Math.round(v*(c/s))):(d=p,i=Math.round(p*(s/c))))),e.width=i,e.height=d,l.clearRect(0,0,i,d),l.drawImage(t,0,0,i,d);const u=e.toDataURL("image/jpeg",n),g=atob(u.split(",")[1]);let f=g.length;const m=new Uint8Array(new ArrayBuffer(f));for(;f--;)m[f]=g.charCodeAt(f);const h=new File([m],a.name,{type:"image/jpeg"});o({file:h,origin:a,beforeSrc:r,afterSrc:u,beforeKB:Number((a.size/1024).toFixed(2)),afterKB:Number((h.size/1024).toFixed(2))})})),t.src=r},r.readAsDataURL(a)}}))})(a.file,"0.9").then((a=>{let e=new FormData,o="/cathodeCopper/"+f.yjtJyInformationData.batchgroup+"/"+f.yjtJyInformationData.batchnumber;e.append("file",a.file),e.append("path",o);let n={};b(e).then((a=>{n.fileName=a.data.fileName,n.fileUrl=a.data.fileUrl,f.imagePath.push(n)})).catch((a=>{console.log(a)}))}))},beforeDelete:a=>(f.imagePath=f.imagePath.filter((e=>e.fileName!=a.file.name)),!0),conservation:()=>{if(0==f.imagePath.length)return m({message:"请上传照片",type:"fail",className:"particulars-detail-popup"}),!1;if(1==x.value&&!u.value)return m({message:"请选择或者输入改判理由",type:"fail",className:"particulars-detail-popup"}),!1;let e={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[]},o=[];o.push(f.yjtJyInformationData),e.data=o,e.typeCodeChecked=g.value,e.active=x.value,e.exterior=y.value,e.remarks=p.value,e.alterReason=u.value,e.fileList=f.imagePath,h(e).then((e=>{200==e.data.code&&(m({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),a.back())})).catch((a=>{console.log(a)}))}}}},B=a=>(F("data-v-c97ad868"),a=a(),J(),a),Y={class:"container"},q={class:"header"},A=B((()=>u("span",{style:{"font-weight":"bold"}},"编号：",-1))),E=B((()=>u("span",{style:{"font-weight":"bold"}},"重量：",-1))),H=B((()=>u("span",{style:{"font-weight":"bold"}},"标准：",-1))),O=B((()=>u("span",{style:{"font-weight":"bold"}},"计量员：",-1))),K=B((()=>u("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),T=B((()=>u("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),Q=B((()=>u("span",{style:{color:"red"}},"*",-1))),X=B((()=>u("span",{style:{color:"red"}},"*",-1))),Z={key:0},G=B((()=>u("span",{style:{color:"red"}},"*",-1)));a("default",n(M,[["render",function(a,e,o,n,r,t){const l=y,i=D,d=U,s=I,c=j,m=P,h=V,b=R,F=S,J=N,M=x;return v(),p("div",Y,[u("div",q,[g(l,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"])]),g(J,{class:"box-card",shadow:"always",style:{"margin-top":"5px"}},{default:f((()=>[g(i,{"content-position":"left"},{default:f((()=>[_("基本信息")])),_:1}),u("div",null,[u("p",null,[A,u("span",null,k(n.listData.yjtJyInformationData.batchnumber),1)]),u("p",null,[E,u("span",null,k(parseFloat(n.listData.yjtJyInformationData.suttle))+k(n.listData.yjtJyInformationData.unit),1)]),u("p",null,[H,u("span",null,k(n.listData.yjtJyInformationData.standard),1)]),u("p",null,[O,u("span",null,k(n.listData.yjtJyInformationData.suttleperson),1),_("     "),K,u("span",null,k(n.listData.yjtJyInformationData.scanUser),1)]),u("p",null,[T,_(k(n.dateFormat("YYYY-mm-dd HH:MM:SS",n.listData.yjtJyInformationData.proDate)),1)])]),u("div",null,[g(i,{"content-position":"left"},{default:f((()=>[Q,_(k(n.typeCodeText),1)])),_:1}),g(s,{modelValue:n.typeCodeChecked,"onUpdate:modelValue":e[0]||(e[0]=a=>n.typeCodeChecked=a),direction:"horizontal"},{default:f((()=>[(v(!0),p(w,null,z(n.listData.typeCodeList,((a,e)=>(v(),L(d,{name:String(a.id)},{default:f((()=>[_(k(a.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),u("div",null,[g(i,{"content-position":"left"},{default:f((()=>[X,_(" 上传照片")])),_:1}),g(c,{modelValue:n.listData.fileList,"onUpdate:modelValue":e[1]||(e[1]=a=>n.listData.fileList=a),"after-read":n.onRead,"before-delete":n.beforeDelete},null,8,["modelValue","after-read","before-delete"])]),1==n.tabIndex?(v(),p("div",Z,[g(i,{"content-position":"left"},{default:f((()=>[G,_("改判理由")])),_:1}),g(h,{modelValue:n.alterReason,"onUpdate:modelValue":e[2]||(e[2]=a=>n.alterReason=a),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:f((()=>[(v(!0),p(w,null,z(n.listData.alterReasonList,(a=>(v(),L(m,{key:a.alterReason,label:a.alterReason,value:a.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):C("",!0),u("div",null,[g(i,{"content-position":"left"},{default:f((()=>[_("备注")])),_:1}),g(F,{inset:""},{default:f((()=>[g(b,{modelValue:n.remarks,"onUpdate:modelValue":e[3]||(e[3]=a=>n.remarks=a),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),g(M,{type:"primary",size:"large",style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px"},onClick:n.conservation},{default:f((()=>[_("提交 ")])),_:1},8,["onClick"])])}],["__scopeId","data-v-c97ad868"]]))}}}))}();
