import"./el-tag-acf0ed7e.js";import{v as E}from"./el-loading-0b61243c.js";import{_ as L,r as s,a as V,u as W,o as j,b as F,c as q,d as l,i as n,w as g,K as U,e as G,aa as K,F as P,t as A,N as J,a2 as O,a3 as X,j as Z,C as $,fY as ee,a1 as te,p as oe,h as ae}from"./index-703aaad1.js";import{E as ne,a as le}from"./el-table-column-b4960c42.js";import"./el-popper-8f138f0c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as se}from"./pickWith-4c609bcf.js";import{_ as re}from"./btn_chaxun1-d052ddc6.js";import{_ as ie,a as de}from"./btn_shoudong-07961c15.js";import{a as H}from"./function-call-60d2426a.js";import"./use-global-config-3a66211f.js";import"./objects-1d7d6bfe.js";let T=new Date,ce=parseInt(T.getFullYear()-1),me=parseInt(T.getMonth()),ue=parseInt(T.getDate()),z="";const fe={mounted(){z=this.$refs.formRef},setup(){const r=s(""),t=s(""),d=s(""),e=s(""),D=V(),C=s(!1),_=W(),v=s([]),w=s(""),c=s(!0),b=s(null);j(()=>{t.value=h("YYYY-mm-dd",new Date(new Date().getTime()-24*60*60*1e3)),d.value=h("YYYY-mm-dd",new Date);let o=document.body.scrollHeight-275;w.value="height:"+o+"px",r.value=t.value+"至"+d.value,setTimeout(()=>{x()},0)});const m=(o,p)=>A(o).pizhong.toFixed(4),S=o=>{const[p,i]=o;C.value=!1,t.value=h("YYYY-mm-dd",p),d.value=h("YYYY-mm-dd",i),r.value=`${t.value}至${d.value}`},y=()=>{_.push({path:"/pickWithQueryInfoData"})},Y=()=>{z.submit()};let a={};const N=()=>{x()};let k="";const M=(o,p,i)=>{e.value=o.chehao,k=o},Q=()=>{k?(D.commit("setCarInfo",k),_.push({name:"pickWithQueryInfoData"})):H({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择车号</span>'}).then(()=>{})},B=()=>{if(e.value){let o={chehao:e.value,danjuhao:"",chengfang:"",pizhong:0,DataId:""};D.commit("setCarInfo",o),_.push({name:"pickWithQueryInfoData"})}else H({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请手工录入车号</span>'}).then(()=>{})},x=()=>{c.value=!0,e.value="",b.value.setScrollTop(0),a.startDate=t.value+" 00:00:00",a.endDate=d.value+" 23:59:59",se(a).then(o=>{v.value=o.data.data,c.value=!1})},h=(o,p)=>{let i,u=new Date(p);const I={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()};for(let R in I)i=new RegExp("("+R+")").exec(o),i&&(o=o.replace(i[1],i[1].length==1?I[R]:I[R].padStart(i[1].length,"0")));return o};return{deDate:[new Date(new Date().getTime()-24*60*60*1e3),new Date],minDate:new Date(ce,me,ue),show:C,dataText:r,startDate:t,endDate:d,tableData:v,tableRef:b,loading:c,tableHeight:w,chehao:e,formatter:m,onClickLeft:y,onConfirm:S,onSubmit:N,onQuery:Y,queryData:x,selectRow:M,confirmSelect:Q,dateFormat:h,handleConfirmSelect:B}}},f=r=>(oe("data-v-b77fa986"),r=r(),ae(),r),_e={style:{"font-weight":"bolder","font-size":"16px"}},he={class:"btn-area"},pe=f(()=>n("img",{src:re},null,-1)),ge=f(()=>n("div",null,"查询",-1)),ve=[pe,ge],we=f(()=>n("img",{src:ie},null,-1)),be=f(()=>n("div",null,"确认",-1)),De=[we,be],Ce=f(()=>n("img",{src:de},null,-1)),Se=f(()=>n("div",null,"手动确认",-1)),ye=[Ce,Se];function Ye(r,t,d,e,D,C){const _=J,v=$,w=ee,c=O,b=X,m=le,S=ne,y=te,Y=E;return F(),q(P,null,[l(_,{title:"选择车号",class:"page-nav-bar","left-arrow":"",onClickLeft:e.onClickLeft},null,8,["onClickLeft"]),n("div",null,[l(b,{onSubmit:e.onSubmit,id:"form-area",ref:"formRef"},{default:g(()=>[l(c,{inset:""},{default:g(()=>[l(v,{title:"选择日期：","title-style":"max-width: 25%",value:e.dataText,onClick:t[0]||(t[0]=a=>e.show=!0)},null,8,["value"]),l(w,{show:e.show,"onUpdate:show":t[1]||(t[1]=a=>e.show=a),"min-date":e.minDate,"default-date":e.deDate,type:"range","allow-same-day":"",onConfirm:e.onConfirm},null,8,["show","min-date","default-date","onConfirm"])]),_:1})]),_:1},8,["onSubmit"]),U((F(),G(S,{ref:"tableRef",data:e.tableData,id:"data-area",style:K(e.tableHeight),"element-loading-text":"数据加载中...","element-loading-background":"rgba(122, 122, 122, 0.8)",onRowClick:e.selectRow},{default:g(()=>[l(m,{fixed:"",prop:"chehao",label:"车号",width:"110px"},{default:g(a=>[n("span",_e,Z(a.row.chehao),1)]),_:1}),l(m,{prop:"danjuhao",label:"单据号",width:"130px"}),l(m,{prop:"chengfang",label:"秤房"}),l(m,{prop:"pizhong",label:"皮重",formatter:e.formatter},null,8,["formatter"])]),_:1},8,["data","style","onRowClick"])),[[Y,e.loading]]),n("div",null,[l(c,{inset:""},{default:g(()=>[l(y,{class:"chehao",modelValue:e.chehao,"onUpdate:modelValue":t[2]||(t[2]=a=>e.chehao=a),label:"车牌号",placeholder:""},null,8,["modelValue"])]),_:1}),n("div",he,[n("div",{onClick:t[3]||(t[3]=(...a)=>e.onQuery&&e.onQuery(...a))},ve),n("div",{onClick:t[4]||(t[4]=(...a)=>e.confirmSelect&&e.confirmSelect(...a))},De),n("div",{onClick:t[5]||(t[5]=(...a)=>e.handleConfirmSelect&&e.handleConfirmSelect(...a))},ye)])])])],64)}const We=L(fe,[["render",Ye],["__scopeId","data-v-b77fa986"]]);export{We as default};
