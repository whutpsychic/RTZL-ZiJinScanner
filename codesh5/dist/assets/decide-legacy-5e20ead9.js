System.register(["./index-legacy-1e91cb58.js","./el-card-legacy-b54939ff.js","./index-legacy-2f76a666.js","./el-tag-legacy-0e2112c8.js","./el-select-legacy-3afbbc93.js","./el-popper-legacy-dee72c24.js","./index-legacy-d1883c5a.js","./index-legacy-eda59a38.js","./gradeDetermination-legacy-b4b34643.js","./index-legacy-18abbe53.js"],(function(e,a){"use strict";var o,t,l,n,r,i,d,s,c,u,v,p,g,m,b,h,y,f,_,k,w,x,C,I,D,j,J,L,S,R,F,z,U,N,V,P;return{setters:[e=>{o=e._,t=e.u,l=e.E,n=e.r,r=e.H,i=e.I,d=e.o,s=e.b,c=e.c,u=e.i,v=e.d,p=e.w,g=e.J,m=e.N,b=e.X,h=e.S,y=e.U,f=e.j,_=e.F,k=e.O,w=e.e,x=e.f,C=e.Y,I=e.a3,D=e.a4,j=e.a0,J=e.a1,L=e.p,S=e.h},e=>{R=e.E},null,null,e=>{F=e.E,z=e.a},null,null,null,e=>{U=e.d,N=e.g,V=e.b,P=e.e},null],execute:function(){var a=document.createElement("style");a.textContent=".van-radio-group--horizontal{display:flex;flex-wrap:wrap}:root{--van-radio-size: 20px;--van-radio-border-color: var(--van-gray-5);--van-radio-duration: var(--van-duration-fast);--van-radio-label-margin: var(--van-padding-xs);--van-radio-label-color: var(--van-text-color);--van-radio-checked-icon-color: var(--van-primary-color);--van-radio-disabled-icon-color: var(--van-gray-5);--van-radio-disabled-label-color: var(--van-text-color-3);--van-radio-disabled-background: var(--van-border-color)}.van-radio{display:flex;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}.van-radio--disabled{cursor:not-allowed}.van-radio--label-disabled{cursor:default}.van-radio--horizontal{margin-right:var(--van-padding-sm)}.van-radio__icon{flex:none;height:1em;font-size:var(--van-radio-size);line-height:1em;cursor:pointer}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:1.25;text-align:center;border:1px solid var(--van-radio-border-color);transition-duration:var(--van-radio-duration);transition-property:color,border-color,background-color}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:var(--van-white);background-color:var(--van-radio-checked-icon-color);border-color:var(--van-radio-checked-icon-color)}.van-radio__icon--disabled{cursor:not-allowed}.van-radio__icon--disabled .van-icon{background-color:var(--van-radio-disabled-background);border-color:var(--van-radio-disabled-icon-color)}.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:var(--van-radio-disabled-icon-color)}.van-radio__label{margin-left:var(--van-radio-label-margin);color:var(--van-radio-label-color);line-height:var(--van-radio-size)}.van-radio__label--left{margin:0 var(--van-radio-label-margin) 0 0}.van-radio__label--disabled{color:var(--van-radio-disabled-label-color)}.header[data-v-bc0183aa]{width:100%;height:46px;line-height:46px;position:absolute;z-index:5;top:0}.content[data-v-bc0183aa]{width:100%;overflow:scroll;top:46px;position:absolute;z-index:10;bottom:5px}\n",document.head.appendChild(a);const Y={setup(){const e=t(),a=l(),o=n(""),s=n(""),c=n(""),u=n(""),v=n(""),p=n(""),m=n([]),b=n([]),h=n([]),y=n(!1),f=n(!1),_=n([]),k=r({yjtJyInformationData:{},typeCodeList:[],alterReasonList:[]});k.yjtJyInformationData=JSON.parse(decodeURIComponent(a.query.yjtJyInformation));const w=n(JSON.parse(decodeURIComponent(a.query.exterior))),x=n(JSON.parse(decodeURIComponent(a.query.tabIndex)));i.await("takePhoto",(e=>{if("null"!=e){let a={};a.index=m.value.length+1,a.base64Img=e,m.value.push(a),b.value.push(e);let o=new FormData,t="/cathodeCopper/"+k.yjtJyInformationData.batchgroup+"/"+k.yjtJyInformationData.batchnumber;o.append("file",function(e){let a=e.split(","),o=a[0].match(/:(.*?);/)[1],t=atob(a[1]),l=t.length,n=new Uint8Array(l);for(;l--;)n[l]=t.charCodeAt(l);let r=Math.random().toString(36).slice(-8),i=o.split("/")[1];return new File([n],r+"."+i,{type:o})}(e)),o.append("path",t),U(o).then((e=>{let a={};a.fileName=e.data.fileName,a.fileUrl=e.data.fileUrl,a.index=m.value.length,h.value.push(a)})).catch((e=>{console.log(e)}))}})),"1"==w.value?(o.value="qualified",s.value="合格品类型"):"2"==w.value&&(o.value="unqualified",s.value="不合格品类型"),d((()=>{C(o.value),I()}));const C=e=>{let a={};a.typeCode=e,N(a).then((e=>{200==e.data.code&&(k.typeCodeList=e.data.data,v.value=String(k.typeCodeList[0].id))})).catch((e=>{console.log(e)}))},I=()=>{let e={},a={},o={limit:9999,offset:1,blockId:"paramBlock",data:{}};a.paramBlock=o,e.blocks=a,V(e).then((e=>{k.alterReasonList=e.data.blocks.resultBlock.data})).catch((e=>{console.log(e)}))};return{imgList:_,showImage:y,showLabelImage:f,fileList:m,base64ImgList:b,imagePath:h,takePhotoState:p,alterReason:u,remarks:c,typeCode:o,typeCodeText:s,listData:k,exterior:w,tabIndex:x,typeCodeChecked:v,seeImg:()=>{_.value=b.value,y.value=!0},takePhotoZJ:()=>{i.takePhoto()},onClickLeft:()=>{e.back()},dateFormat:(e,a)=>{let o,t=new Date(a);const l={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(let n in l)o=new RegExp("("+n+")").exec(e),o&&(e=e.replace(o[1],1==o[1].length?l[n]:l[n].padStart(o[1].length,"0")));return e},beforeDelete:(e,a)=>{h.value=h.value.filter((a=>a.index!=e)),m.value=m.value.filter((a=>a.index!=e)),b.value=b.value.filter((e=>e!=a))},conservation:()=>{if(0==h.value.length)return g({message:"请上传质检照片",type:"fail",className:"particulars-detail-popup"}),!1;if(1==x.value&&!u.value)return g({message:"请选择或者填写改判理由",type:"fail",className:"particulars-detail-popup"}),!1;let a={data:[],active:"",exterior:"",remarks:"",alterReason:"",typeCodeChecked:"",fileList:[],labelFileList:[]},o=[];o.push(k.yjtJyInformationData),a.data=o,a.typeCodeChecked=v.value,a.active=x.value,a.exterior=w.value,a.remarks=c.value,a.alterReason=u.value,a.fileList=h.value,P(a).then((a=>{200==a.data.code&&(g({message:"质检成功",type:"success",className:"particulars-detail-popup",overlay:!0}),e.back())})).catch((e=>{console.log(e)}))},getTypeCodeData:C,getAlterReasonQuery:I}}},M=e=>(L("data-v-bc0183aa"),e=e(),S(),e),q={class:"container"},E={class:"header"},H={class:"content"},O=M((()=>u("span",{style:{"font-weight":"bold"}},"编号：",-1))),A=M((()=>u("span",{style:{"font-weight":"bold"}},"重量：",-1))),B=M((()=>u("span",{style:{"font-weight":"bold"}},"标准：",-1))),T=M((()=>u("span",{style:{"font-weight":"bold"}},"计量员：",-1))),Z=M((()=>u("span",{style:{"font-weight":"bold"}},"扫描人：",-1))),Q=M((()=>u("span",{style:{"font-weight":"bold"}},"生产日期：",-1))),X=M((()=>u("span",{style:{color:"red"}},"*",-1))),G=M((()=>u("span",{style:{color:"red"}},"*",-1))),K={class:"van-uploader"},W={class:"van-uploader__wrapper"},$={class:"van-image van-uploader__preview-image"},ee=["src"],ae=["onClick"],oe=[M((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)))],te=[M((()=>u("i",{class:"van-badge__wrapper van-icon van-icon-photograph van-uploader__upload-icon"},null,-1)))],le={key:0},ne=M((()=>u("span",{style:{color:"red"}},"*",-1)));e("default",o(Y,[["render",function(e,a,o,t,l,n){const r=m,i=C,d=I,g=D,L=F,S=z,U=j,N=J,V=R,P=b,Y=h;return s(),c("div",q,[u("div",E,[v(r,{title:"品级质检",class:"page-nav-bar","left-arrow":"",onClickLeft:t.onClickLeft},null,8,["onClickLeft"])]),u("div",H,[v(V,{class:"box-card",shadow:"always"},{default:p((()=>[v(i,{"content-position":"left"},{default:p((()=>[y("基本信息")])),_:1}),u("div",null,[u("p",null,[O,u("span",null,f(t.listData.yjtJyInformationData.batchnumber),1)]),u("p",null,[A,u("span",null,f(parseFloat(t.listData.yjtJyInformationData.suttle))+f(t.listData.yjtJyInformationData.unit),1)]),u("p",null,[B,u("span",null,f(t.listData.yjtJyInformationData.standard),1)]),u("p",null,[T,u("span",null,f(t.listData.yjtJyInformationData.suttleperson),1),y("      "),Z,u("span",null,f(t.listData.yjtJyInformationData.scanUser),1)]),u("p",null,[Q,u("span",null,f(t.dateFormat("YYYY-mm-dd HH:MM:SS",t.listData.yjtJyInformationData.proDate)),1)])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[X,y(f(t.typeCodeText),1)])),_:1}),v(g,{modelValue:t.typeCodeChecked,"onUpdate:modelValue":a[0]||(a[0]=e=>t.typeCodeChecked=e),direction:"horizontal"},{default:p((()=>[(s(!0),c(_,null,k(t.listData.typeCodeList,((e,a)=>(s(),w(d,{name:String(e.id)},{default:p((()=>[y(f(e.name),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])]),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[G,y(" 质检照片")])),_:1}),u("div",K,[u("div",W,[(s(!0),c(_,null,k(t.fileList,((e,o)=>(s(),c("div",{class:"van-uploader__preview",key:e.index},[u("div",$,[u("img",{class:"van-image__img",src:e.base64Img,style:{"object-fit":"cover"},onClick:a[1]||(a[1]=(...e)=>t.seeImg&&t.seeImg(...e))},null,8,ee)]),u("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:a=>t.beforeDelete(e.index,e.base64Img)},oe,8,ae)])))),128)),u("div",{class:"van-uploader__upload",onClick:a[2]||(a[2]=(...e)=>t.takePhotoZJ&&t.takePhotoZJ(...e))},te)])])]),1==t.tabIndex?(s(),c("div",le,[v(i,{"content-position":"left"},{default:p((()=>[ne,y("改判理由")])),_:1}),v(S,{modelValue:t.alterReason,"onUpdate:modelValue":a[3]||(a[3]=e=>t.alterReason=e),filterable:"",clearable:"","allow-create":"",placeholder:"改判理由",style:{width:"100%"}},{default:p((()=>[(s(!0),c(_,null,k(t.listData.alterReasonList,(e=>(s(),w(L,{key:e.alterReason,label:e.alterReason,value:e.alterReason},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):x("",!0),u("div",null,[v(i,{"content-position":"left"},{default:p((()=>[y("备注")])),_:1}),v(N,{inset:""},{default:p((()=>[v(U,{modelValue:t.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>t.remarks=e),rows:"1",autosize:"",label:"备注",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])])),_:1}),v(P,{type:"primary",size:"large",style:{width:"80%",position:"absolute",left:"10%","margin-top":"15px","background-color":"#003363",color:"#FFFFFF"},onClick:t.conservation},{default:p((()=>[y("提交 ")])),_:1},8,["onClick"]),v(Y,{show:t.showImage,"onUpdate:show":a[5]||(a[5]=e=>t.showImage=e),images:t.imgList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"])])])}],["__scopeId","data-v-bc0183aa"]]))}}}));
