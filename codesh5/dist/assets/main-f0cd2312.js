import"./el-tag-acf0ed7e.js";import{E as O}from"./el-overlay-d38babd4.js";import{a6 as T,a7 as q,_ as Z,u as G,r as I,E as K,o as W,b as o,c as h,i as t,d as p,w as c,F as Y,I as Q,N as X,a8 as $,a9 as tt,M,e as D,j as l,V as m,f as y,aa as at,ab as et,Z as ot,$ as lt,a1 as nt,U as it,a0 as st,Y as rt,R as dt,p as ct,h as yt}from"./index-703aaad1.js";/* empty css              */import{E as ut}from"./el-card-601eac3e.js";/* empty css              */import{q as mt}from"./qualityCheckingRecord-5eaa745f.js";import{a as ft,E as pt}from"./el-select-e167463c.js";import"./el-popper-8f138f0c.js";/* empty css              */import{f as ht}from"./gradeDetermination-7b5d8aec.js";import{s as _t}from"./function-call-60d2426a.js";import"./index-5f02ee64.js";import"./use-global-config-3a66211f.js";import"./objects-1d7d6bfe.js";import"./index-8e66d421.js";function Dt(v){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:v})}function gt(v){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:v})}const bt={setup(){const v=G(),n=I(""),B=I(!1),a=I(""),U=I(""),P=I(!1),r=K({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[],yjtJyInformationDecideData:{},filePathList:[]}),C=I(!1),z=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=I(!1),_=I(!1),g=I("0"),N=I(10),j=I(0);W(()=>{j.value=1,w({batchnumber:n.value,status:g.value})});const F=()=>{v.push({path:"/home"})},E=()=>{j.value=j.value+1,w({batchnumber:n.value,status:g.value})},R=s=>{r.auditorListData=[],j.value=1,_.value=!1,w({batchnumber:s,status:g.value})},J=s=>{r.auditorListData=[],j.value=1,_.value=!1,w({batchnumber:s,status:g.value})},H=s=>{let d={yjtJyInformationId:s.yjtJyInformationId,status:"2"};V(d),r.yjtJyInformationDetails=s,r.yjtJyInformationDetails.exterior!="0"&&L(r.yjtJyInformationDetails.yjtJyInformationDetailsId)},A=s=>{r.filePathList=[],r.filePathList=s,B.value=!0},w=s=>{S.value=!0;let d={},u={},f={};f.limit=N.value,f.offset=j.value,f.blockId="paramBlock",f.data=s,u.paramBlock=f,d.blocks=u,Dt(d).then(b=>{r.auditorListData=[...r.auditorListData,...b.data.blocks.resultBlock.data],S.value=!1,r.auditorListData.length==b.data.blocks.resultBlock.total&&(_.value=!0);let k=document.body.scrollHeight-180;U.value="height:"+k+"px"}).catch(b=>{console.log(b)})},e=s=>{if(a.value=="")return Q({message:"请填写审核内容",type:"fail",overlay:!0,className:"particulars-detail-popup"}),!1;let d={},u={},f={},b={};d.id=r.yjtJyInformationDetails.id,d.yjtJyInformationId=r.yjtJyInformationDetails.yjtJyInformationId,d.yjtJyInformationDetailsId=r.yjtJyInformationDetails.yjtJyInformationDetailsId,d.auditorContent=a.value,d.status=s,b.data=d,f.paramBlock=b,u.blocks=f;let k="";s=="1"?k="驳回":k="通过",_t({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否'+k+"这条数据？</span>"}).then(()=>{gt(u).then(x=>{x.data.status=="0"&&(Q({message:x.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),r.auditorListData=[],C.value=!1,w({batchnumber:n.value,status:g.value}))}).catch(x=>{console.log(x)})}).catch(x=>{console.log(x)})},L=s=>{let d={};d.yjtJyInformationDetailsId=s,ht(d).then(u=>{r.yjtJyInformationFileList=u.data.data}).catch(u=>{console.log(u)})},V=s=>{mt(s).then(d=>{let u={},f=r.yjtJyInformationDetails.status;f=="0"||f=="1"?u=d.data.data[0]:u=d.data.data[1],r.yjtJyInformationDecideData=u,C.value=!0}).catch(d=>{console.log(d)})};return{elDialogHeight:U,state:P,listData:r,showImage:B,auditorContent:a,centerDialogVisible:C,searchValue:n,loading:S,finished:_,limit:N,offset:j,status:g,options:z,listData:r,onClickLeft:F,onLoad:E,getFileQuery:L,getAuditorDataQuery:w,statusChange:R,dateFormat:(s,d)=>{let u,f=new Date(d);const b={"Y+":f.getFullYear().toString(),"m+":(f.getMonth()+1).toString(),"d+":f.getDate().toString(),"H+":f.getHours().toString(),"M+":f.getMinutes().toString(),"S+":f.getSeconds().toString()};for(let k in b)u=new RegExp("("+k+")").exec(s),u&&(s=s.replace(u[1],u[1].length==1?b[k]:b[k].padStart(u[1].length,"0")));return s},onSearch:J,auditingDetails:H,seeImg:A,cathodeCopperAuditorClick:e,getQualityCheckingRecordDecide:V}}},i=v=>(ct("data-v-6b614760"),v=v(),yt(),v),It={class:"header"},vt={style:{display:"flex","background-color":"#ffffff"}},jt={class:"content"},kt={style:{padding:"0px 5px 5px 5px"}},wt=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Jt=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),xt=i(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ct=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),St={key:0,style:{"font-weight":"bold"}},Lt={style:{color:"#bbbbbb"}},Vt={style:{float:"right",color:"#bbbbbb"}},Yt=i(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Nt=i(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ft=i(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Ht=i(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Mt=i(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),Bt=i(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Ut=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),zt={key:3,style:{"font-weight":"bold"}},Et=i(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Rt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),At={key:0},Pt=i(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Qt={key:1},Tt=i(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),qt={key:2},Ot=i(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Zt={key:3,style:{"font-weight":"bold"}},Gt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Kt=i(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Wt=i(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Xt={key:0},$t=i(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),ta={key:0,style:{"margin-top":"15px"}},aa=i(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),ea=i(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),oa=i(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),la=i(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),na={key:1},ia={key:0,style:{"margin-top":"30px"}};function sa(v,n,B,a,U,P){const r=X,C=$,z=pt,S=ft,_=et,g=ot,N=ut,j=tt,F=lt,E=nt,R=it,J=st,H=rt,A=dt,w=O;return o(),h(Y,null,[t("div",It,[p(r,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",vt,[p(C,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":n[0]||(n[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),p(S,{modelValue:a.status,"onUpdate:modelValue":n[1]||(n[1]=e=>a.status=e),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:c(()=>[(o(!0),h(Y,null,M(a.options,e=>(o(),D(z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",jt,[p(j,{loading:a.loading,"onUpdate:loading":n[2]||(n[2]=e=>a.loading=e),"immediate-check":!1,finished:a.finished,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",kt,[(o(!0),h(Y,null,M(a.listData.auditorListData,(e,L)=>(o(),D(N,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:V=>a.auditingDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[wt,t("span",null,l(e.batchnumber),1)]),t("p",null,[Jt,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1)]),t("p",null,[xt,t("span",null,l(e.standard),1)]),t("p",null,[Ct,t("span",null,l(e.exteriorName),1),m("    "),e.exterior!="0"?(o(),h("span",St,"类型：")):y("",!0),t("span",null,l(e.dictName),1)]),t("p",null,[e.status=="0"?(o(),D(_,{key:0,type:"primary",size:"large"},{default:c(()=>[m("未审核")]),_:1})):y("",!0),e.status=="1"?(o(),D(_,{key:1,type:"danger",size:"large"},{default:c(()=>[m("驳回")]),_:1})):y("",!0),e.status=="2"?(o(),D(_,{key:2,type:"success",size:"large"},{default:c(()=>[m("审核通过")]),_:1})):y("",!0)]),p(g,{style:{color:"#c8c8c8"}}),t("span",Lt,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.checkoutDate)),1),t("span",Vt,l(e.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),p(w,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":n[9]||(n[9]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:c(()=>[t("div",{style:at([{padding:"15px","overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[t("div",null,[p(g,{"content-position":"left"},{default:c(()=>[m("基本信息")]),_:1}),t("p",null,[Yt,t("span",null,l(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Nt,t("span",null,l(parseFloat(a.listData.yjtJyInformationDetails.suttle))+l(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Ft,t("span",null,l(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Ht,t("span",null,l(a.listData.yjtJyInformationDetails.suttleperson),1),m("     "),Mt,t("span",null,l(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[Bt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),t("div",null,[p(g,{"content-position":"left"},{default:c(()=>[m("历史质检信息")]),_:1}),t("div",null,[t("p",null,[Ut,a.listData.yjtJyInformationDecideData.details.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("      "),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("span",zt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDecideData.details.dictName),1)]),t("p",null,[Et,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDecideData.details.checkoutDate)),1)]),t("p",null,[Rt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.checkoutUser),1)]),a.listData.yjtJyInformationDecideData.details.alterReason?(o(),h("p",At,[Pt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.alterReason),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.remarks?(o(),h("p",Qt,[Tt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.remarks),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("div",qt,[(o(!0),h(Y,null,M(a.listData.yjtJyInformationDecideData.fileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[3]||(n[3]=V=>a.seeImg(a.listData.yjtJyInformationDecideData.fileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0)])]),t("div",null,[p(g,{"content-position":"left"},{default:c(()=>[m("审核的质检信息")]),_:1}),t("p",null,[Ot,a.listData.yjtJyInformationDetails.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("    "),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("span",Zt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Gt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Kt,t("span",null,l(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[Wt,t("span",null,l(a.listData.yjtJyInformationDetails.alterReason),1)]),a.listData.yjtJyInformationDetails.remarks?(o(),h("p",Xt,[$t,t("span",null,l(a.listData.yjtJyInformationDetails.remarks),1)])):y("",!0)]),a.listData.yjtJyInformationDetails.status!="0"?(o(),h("div",ta,[t("p",null,[aa,t("span",null,l(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),m("     "),ea,t("span",null,l(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[oa,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[la,t("span",null,l(a.listData.yjtJyInformationDetails.auditorContent),1)])])):y("",!0),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("div",na,[(o(!0),h(Y,null,M(a.listData.yjtJyInformationFileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[4]||(n[4]=V=>a.seeImg(a.listData.yjtJyInformationFileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0),a.listData.yjtJyInformationDetails.status=="0"?(o(),D(E,{key:2,modelValue:a.auditorContent,"onUpdate:modelValue":n[5]||(n[5]=e=>a.auditorContent=e),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):y("",!0)]),p(R,{show:a.showImage,"onUpdate:show":n[6]||(n[6]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(o(),h("div",ia,[p(A,null,{default:c(()=>[p(J,{span:"2"}),p(J,{span:"10"},{default:c(()=>[p(H,{icon:"close",type:"danger",style:{width:"90%"},onClick:n[7]||(n[7]=e=>a.cathodeCopperAuditorClick("1"))},{default:c(()=>[m("驳回 ")]),_:1})]),_:1}),p(J,{span:"10"},{default:c(()=>[p(H,{icon:"passed",type:"success",style:{width:"90%"},onClick:n[8]||(n[8]=e=>a.cathodeCopperAuditorClick("2"))},{default:c(()=>[m("通过 ")]),_:1})]),_:1}),p(J,{span:"2"})]),_:1})])):y("",!0)],4)]),_:1},8,["modelValue"])],64)}const wa=Z(bt,[["render",sa],["__scopeId","data-v-6b614760"]]);export{wa as default};
