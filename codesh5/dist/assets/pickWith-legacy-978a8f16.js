System.register(["./el-tag-legacy-cf3cc70f.js","./el-overlay-legacy-83951446.js","./index-legacy-f9152eff.js","./index-legacy-5039dca1.js","./el-select-legacy-248d8db7.js","./el-popper-legacy-d80e9ed8.js","./el-table-column-legacy-82630112.js","./index-legacy-eda59a38.js","./bignumber-legacy-cceacf5c.js","./pickWith-legacy-4dc06f4b.js","./btn_shoudong-legacy-5e849329.js","./btn_tichu-legacy-29a262ad.js","./function-call-legacy-a2965dab.js","./index-legacy-c3f1f91b.js","./use-global-config-legacy-03ba079a.js","./objects-legacy-af642898.js","./index-legacy-fcd4d1d3.js"],(function(e,a){"use strict";var l,t,n,s,i,o,c,d,r,u,p,h,g,m,b,f,v,y,w,x,F,k,C,_,j,z,H,T,B,E,R,D,L,I,S,U,V,A,N,M,O,P,q,X,G,W;return{setters:[null,e=>{l=e.E},e=>{t=e._,n=e.u,s=e.D,i=e.r,o=e.a,c=e.E,d=e.H,r=e.t,u=e.o,p=e.b,h=e.c,g=e.d,m=e.w,b=e.i,f=e.e,v=e.j,y=e.F,w=e.I,x=e.O,F=e.P,k=e.N,C=e.V,_=e.M,j=e.p,z=e.h,H=e.W,T=e.a1,B=e.a2,E=e.Y,R=e.a0,D=e.R,L=e.a3},null,e=>{I=e.E,S=e.a},null,e=>{U=e.E,V=e.a},null,e=>{A=e.B},e=>{N=e.c,M=e.b,O=e.s},e=>{P=e._,q=e.a},e=>{X=e._},e=>{G=e.a,W=e.s},null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".info-container[data-v-66a4c50c]{margin:8px;background-color:#b6ceeb;display:flex;flex-wrap:wrap;border-radius:6px;overflow:hidden}.info-container span[data-v-66a4c50c]{display:block;font-size:18px;font-weight:700;flex-basis:33.33%;color:#000;text-align:center;min-height:40px;line-height:40px;border:solid 1px #4971a0;border-collapse:collapse}.info-container span.title[data-v-66a4c50c]{background-color:#3c5d85;color:#fff}.container[data-v-66a4c50c]{width:100%;overflow:auto;top:50px;position:absolute;z-index:10;bottom:5px}.container>#data-area1[data-v-66a4c50c]{margin-bottom:5%;flex-grow:1}.btn-area div[data-v-66a4c50c]{border-radius:25px;font-size:20px;width:28%;min-height:45px}.btn-area img[data-v-66a4c50c]{width:45px}.btn-area>div[data-v-66a4c50c]:nth-child(2){background-color:var(--btn-color2)}.btn-area>div[data-v-66a4c50c]:nth-child(1){background-color:var(--btn-color1);margin-left:10px}.btn-area>div[data-v-66a4c50c]:nth-child(3){background-color:var(--btn-color1);margin-right:10px}[data-v-66a4c50c] #data-area2 .el-table__cell{background-color:var(--table-body-back-color2)}[data-v-66a4c50c] #data-area2 .el-table__cell{border:1px solid var(--table-body-border-color2)}\n",document.head.appendChild(a);const Y={setup(){const e=n();s();const a=i([]),l=o(),t=i(""),p=i(""),h=i("0"),g=i(""),m=i("0"),b=i("0"),f=i("0"),v=i(!1),y=i(""),k=i(""),C=i(""),_=i(""),j=c({barCodeSelectList:[]});d.await("scanner",(l=>{if("/pickWith"==e.currentRoute.value.path)if("null"!=l){let e=l;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let l={};l.fBarcode=e,N(l).then((l=>{if(l.data.data)return T(e).then((e=>{let l={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};B(r(a.value),l)}));{let e="";e="1"==l.data.distinguish?'<span style="font-size: 18px;color: red">'+l.data.message+"</span>":"2"==l.data.distinguish?'<span style="font-size: 18px;color: #0e80d2">'+l.data.message+"</span>":'<span style="font-size: 18px">'+l.data.message+"</span>",G({title:"提示",width:"600",allowHtml:!0,message:e}).then((()=>{}))}}))}else G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))}else G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">数据获取失败</span>'}).then((()=>{}))}));let z="";u((()=>{let e=r(l.state.chukudanListInfo);r(l.state.carInfo.pizhong)&&(m.value=r(l.state.carInfo.pizhong).toFixed(4)),p.value=new A(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),g.value=new A(e.F_PLANSUTTLE).minus(e.F_SUTTLE).toFixed(4),f.value=new A(m.value).plus(h.value).toFixed(4)}));const H=(e,l)=>{"add"==y.value?h.value=new A(h.value).plus(new A(l.weight).dividedBy(1e3).toNumber()).toFixed(4):h.value=new A(h.value).minus(new A(l.weight).dividedBy(1e3).toNumber()).toFixed(4),g.value=new A(p.value).minus(h.value).toFixed(4),f.value=new A(m.value).plus(h.value).toFixed(4),b.value=e.length,a.value=e,t.value=Math.random(),g.value<0&&G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">缺少数值已为负数</span>'}).then((()=>{}))},T=e=>{let a=e.split("");const l=a.slice(0,3).join(""),t=a.slice(3,5).join(""),n=a.slice(5,7).join(""),s=a.slice(7,13).join(""),i=a.slice(13,17).join(""),o=a.slice(17,20).join(""),c=a.slice(20,24).join("")+"."+a[24];return new Promise(((a,d)=>{a({barcode:e,qiyedaima:l,chanpinleibie:t,chanpindengji:n,shengchanriqi:s,chanpinpihao:i,kunxuhao:o,kunjingzhong:c})}))},B=(e,a)=>{if(e.find((e=>e.barcode===a.barcode)))G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">该批次已经选择，请勿重复选择</span>'}).then((()=>{}));else{let l=[];e.unshift(a),l=e,y.value="add",H(l,a)}};return{typeName:y,barCodeSelect:k,F_BATCHGROUP:C,F_BATCHNUMBER:_,listData:j,itemKey:t,yingj:p,yij1:h,ques:g,pizhong:m,yij2:b,pz:f,tableData:a,centerDialogVisibleTXM:v,passedTXMClick:()=>{if(""==k.value)return G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择条形码</span>'}).then((()=>{})),!1;v.value=!1;let e=k.value;if(new RegExp(/^124010[1-9][0-9]{2}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|30|31)[0-9]{12}$/).test(e)&&25===e.length){let l={};l.fBarcode=e,N(l).then((l=>{if(l.data.data)return T(e).then((e=>{let l={date:e.shengchanriqi,number:e.kunxuhao,barcode:e.barcode,weight:e.kunjingzhong};B(r(a.value),l)}));{let e="";e="1"==l.data.distinguish?'<span style="font-size: 18px;color: red">'+l.data.message+"</span>":"2"==l.data.distinguish?'<span style="font-size: 18px;color: #0e80d2">'+l.data.message+"</span>":'<span style="font-size: 18px">'+l.data.message+"</span>",G({title:"提示",width:"600",allowHtml:!0,message:e}).then((()=>{}))}}))}else G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">对不起，此条码不符合规范</span>'}).then((()=>{}))},onSubmit:e=>{k.value="";let a=e.F_BATCHNUMBER+"-"+e.F_BATCHGROUP;M({strBatchno:a}).then((e=>{j.barCodeSelectList=e.data.data,j.barCodeSelectList.length>0?w({message:"数据查询成功",type:"success",className:"particulars-detail-popup",overlay:!0}):G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有查询到对应的条码数据</span>'}).then((()=>{}))})).catch((e=>{console.log(e)}))},closeTXMClick:()=>{v.value=!1},checkIfExist:B,decode:T,scanCode:()=>{d.scan()},onClickLeft:()=>{e.push({path:"/pickWithQueryInfoData"})},onHandle:()=>{v.value=!0},onConfirm:()=>{if(0==a.value.length)return G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">没有要处理的数据</span>'}).then((()=>{})),!1;W({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否已完成扫描？</span>'}).then((()=>{x({duration:0,forbidClick:!0,overlay:!0,className:"particulars-detail-popup",message:"拣配中..."});let t=r(l.state.chukudanListInfo),n=r(l.state.carInfo),s={};s.F_DELIVERYNO=t.F_DELIVERYNO,s.strSuttle=h.value,s.strTruckNo=n.chehao,s.weighthousename=n.chengfang,s.id=n.danjuhao,n.DataId?s.strDataId=n.DataId:s.strDataId="";let i=r(a.value).map((e=>e.barcode+",")).join("");s.strBarcodes=i.substring(0,i.length-1),O(s).then((t=>{F(),"200"==t.data.code?(a.value=[],G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>{l.commit("setPickWithScroll",0),l.commit("setChukudanListInfo",{}),l.commit("setCarInfo",{}),e.push({path:"/pickWithQueryListData"})}))):G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">'+t.data.message+"</span>"}).then((()=>{}))}))})).catch((e=>{console.log(e),F()}))},selectRow:(e,a,l)=>{z=r(e)},onDelete:()=>{z?W({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否要剔除当前所选数据？</span>'}).then((()=>{let e=a.value.filter((e=>e.barcode!=z.barcode));a.value=e,y.value="edit",H(e,z),z=""})).catch((e=>{console.log(e)})):G({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">请选择要剔除的的数据</span>'}).then((()=>{}))}}}},K=e=>(j("data-v-66a4c50c"),e=e(),z(),e),Q={class:"container"},$={class:"info-container"},J=K((()=>b("span",{class:"title"},"应拣",-1))),Z=K((()=>b("span",{class:"title"},"已拣",-1))),ee=K((()=>b("span",{class:"title"},"缺少",-1))),ae=K((()=>b("span",{class:"title"},"皮重",-1))),le=K((()=>b("span",{class:"title"},"捆数",-1))),te=K((()=>b("span",{class:"title"},"合计",-1))),ne={class:"btn-area"},se=[K((()=>b("img",{src:P},null,-1))),K((()=>b("div",null,"确认",-1)))],ie=[K((()=>b("img",{src:q},null,-1))),K((()=>b("div",null,"手动",-1)))],oe=[K((()=>b("img",{src:X},null,-1))),K((()=>b("div",null,"剔除",-1)))],ce={style:{margin:"16px"}},de={style:{"margin-top":"10px"}},re=K((()=>b("p",null,"条形码",-1)));e("default",t(Y,[["render",function(e,a,t,n,s,i){const o=H,c=k,d=V,r=U,u=T,w=B,x=E,F=I,j=S,z=R,A=D,N=L,M=l;return p(),h(y,null,[g(c,{title:"拣配",class:"page-nav-bar","left-arrow":"",onClickLeft:n.onClickLeft},{right:m((()=>[g(o,{onClick:n.scanCode,style:{color:"#FFFFFF"},name:"scan",size:"40"},null,8,["onClick"])])),_:1},8,["onClickLeft"]),b("div",Q,[(p(),f(r,{data:n.tableData,style:{height:"260px"},id:"data-area1",key:n.itemKey,"highlight-current-row":"",onRowClick:n.selectRow},{default:m((()=>[g(d,{fixed:"",prop:"date",label:"日期"}),g(d,{prop:"number",label:"包号"}),g(d,{prop:"weight",label:"重量"}),g(d,{prop:"barcode",label:"条码",width:"250"})])),_:1},8,["data","onRowClick"])),b("div",$,[J,Z,ee,b("span",null,v(n.yingj),1),b("span",null,v(n.yij1),1),b("span",null,v(n.ques),1),ae,le,te,b("span",null,v(n.pizhong),1),b("span",null,v(n.yij2),1),b("span",null,v(n.pz),1)]),b("div",ne,[b("div",{onClick:a[0]||(a[0]=(...e)=>n.onConfirm&&n.onConfirm(...e))},se),b("div",{onClick:a[1]||(a[1]=(...e)=>n.onHandle&&n.onHandle(...e))},ie),b("div",{onClick:a[2]||(a[2]=(...e)=>n.onDelete&&n.onDelete(...e))},oe)])]),g(M,{modelValue:n.centerDialogVisibleTXM,"onUpdate:modelValue":a[6]||(a[6]=e=>n.centerDialogVisibleTXM=e),title:"手动不合格条码",width:"96%","align-center":""},{default:m((()=>[g(N,{onSubmit:n.onSubmit},{default:m((()=>[g(w,{inset:""},{default:m((()=>[g(u,{modelValue:n.F_BATCHGROUP,"onUpdate:modelValue":a[3]||(a[3]=e=>n.F_BATCHGROUP=e),name:"F_BATCHGROUP",label:"批次号",placeholder:"批次号(四位)",rules:[{required:!0,message:"请填写批次号"}]},null,8,["modelValue"]),g(u,{modelValue:n.F_BATCHNUMBER,"onUpdate:modelValue":a[4]||(a[4]=e=>n.F_BATCHNUMBER=e),name:"F_BATCHNUMBER",label:"编号",placeholder:"编号(三位)",rules:[{required:!0,message:"请填写编号"}]},null,8,["modelValue"])])),_:1}),b("div",ce,[g(x,{square:"",icon:"search",block:"",type:"primary","native-type":"submit",style:{"background-color":"#003363",color:"#FFFFFF"}},{default:m((()=>[C(" 查询 ")])),_:1}),b("div",de,[re,g(j,{modelValue:n.barCodeSelect,"onUpdate:modelValue":a[5]||(a[5]=e=>n.barCodeSelect=e),placeholder:"条形码",style:{width:"100%"}},{default:m((()=>[(p(!0),h(y,null,_(n.listData.barCodeSelectList,(e=>(p(),f(F,{key:e.F_BARCODE,label:e.F_BARCODE,value:e.F_BARCODE},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),g(A,{style:{"margin-top":"15px"}},{default:m((()=>[g(z,{span:"2"}),g(z,{span:"10"},{default:m((()=>[g(x,{icon:"passed",style:{"background-color":"#003363",color:"#FFFFFF"},onClick:n.passedTXMClick},{default:m((()=>[C("确定 ")])),_:1},8,["onClick"])])),_:1}),g(z,{span:"10",style:{"text-align":"center"}},{default:m((()=>[g(x,{icon:"close",style:{"background-color":"red",color:"#FFFFFF"},onClick:n.closeTXMClick},{default:m((()=>[C("退出 ")])),_:1},8,["onClick"])])),_:1}),g(z,{span:"2"})])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-66a4c50c"]]))}}}));
