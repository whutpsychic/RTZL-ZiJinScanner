import"./el-tag-f8ec1a70.js";import{E as O}from"./el-overlay-1f30441e.js";import{a7 as T,a8 as q,_ as W,u as Z,r as v,I as G,o as K,f as X,c as o,d as h,k as t,e as p,w as c,F as Y,J as Q,N as $,a9 as tt,aa as at,O as M,g as D,l,W as m,h as y,ab as et,ac as ot,$ as lt,a0 as nt,a2 as st,V as it,a1 as rt,Z as dt,S as ct,p as yt,j as ut}from"./index-ecb86d45.js";/* empty css              */import{E as mt}from"./el-card-c7aba386.js";/* empty css              */import{q as ft}from"./qualityCheckingRecord-95914072.js";import{a as pt,E as ht}from"./el-select-b7f3ea5a.js";import"./el-popper-81f3a1c7.js";/* empty css              */import{f as _t}from"./gradeDetermination-1f495461.js";import{s as Dt}from"./function-call-509584aa.js";import"./index-95c1965a.js";import"./use-global-config-a7f40fa2.js";import"./objects-aa909a4b.js";import"./index-dd289210.js";function gt(g){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=auditorDataQuery`,method:"post",data:g})}function bt(g){return T({url:`${q.api_base_url}/mobileTerminalApi.do?method=cathodeCopperAuditor`,method:"post",data:g})}const It={setup(){const g=Z(),n=v(""),B=v(!1),a=v(""),z=v(""),P=v(!1),r=G({auditorListData:[],yjtJyInformationDetails:{},yjtJyInformationFileList:[],yjtJyInformationDecideData:{},filePathList:[]}),w=v(!1),U=[{value:"0",label:"未审核"},{value:"1",label:"驳回"},{value:"2",label:"审核通过"}],S=v(!1),_=v(!1),b=v("0"),N=v(10),k=v(0);K(()=>{X.register("goback",()=>{w.value?w.value=!1:g.push({path:"/home"})}),k.value=1,J({batchnumber:n.value,status:b.value})});const F=()=>{g.back()},E=()=>{k.value=k.value+1,J({batchnumber:n.value,status:b.value})},R=i=>{r.auditorListData=[],k.value=1,_.value=!1,J({batchnumber:i,status:b.value})},x=i=>{r.auditorListData=[],k.value=1,_.value=!1,J({batchnumber:i,status:b.value})},H=i=>{let d={yjtJyInformationId:i.yjtJyInformationId,status:"2"};V(d),r.yjtJyInformationDetails=i,r.yjtJyInformationDetails.exterior!="0"&&L(r.yjtJyInformationDetails.yjtJyInformationDetailsId)},A=i=>{r.filePathList=[],r.filePathList=i,B.value=!0},J=i=>{S.value=!0;let d={},u={},f={};f.limit=N.value,f.offset=k.value,f.blockId="paramBlock",f.data=i,u.paramBlock=f,d.blocks=u,gt(d).then(I=>{r.auditorListData=[...r.auditorListData,...I.data.blocks.resultBlock.data],S.value=!1,r.auditorListData.length==I.data.blocks.resultBlock.total&&(_.value=!0);let j=document.body.scrollHeight-180;z.value="height:"+j+"px"}).catch(I=>{console.log(I)})},e=i=>{if(a.value=="")return Q({message:"请填写审核内容",type:"fail",overlay:!0,className:"particulars-detail-popup"}),!1;let d={},u={},f={},I={};d.id=r.yjtJyInformationDetails.id,d.yjtJyInformationId=r.yjtJyInformationDetails.yjtJyInformationId,d.yjtJyInformationDetailsId=r.yjtJyInformationDetails.yjtJyInformationDetailsId,d.auditorContent=a.value,d.status=i,I.data=d,f.paramBlock=I,u.blocks=f;let j="";i=="1"?j="驳回":j="通过",Dt({title:"提示",width:"600",allowHtml:!0,message:'<span style="font-size: 18px">是否'+j+"这条数据？</span>"}).then(()=>{bt(u).then(C=>{C.data.status=="0"&&(Q({message:C.data.returnMsg,type:"success",className:"particulars-detail-popup",overlay:!0}),r.auditorListData=[],w.value=!1,J({batchnumber:n.value,status:b.value}))}).catch(C=>{console.log(C)})}).catch(C=>{console.log(C)})},L=i=>{let d={};d.yjtJyInformationDetailsId=i,_t(d).then(u=>{r.yjtJyInformationFileList=u.data.data}).catch(u=>{console.log(u)})},V=i=>{ft(i).then(d=>{let u={},f=r.yjtJyInformationDetails.status;f=="0"||f=="1"?u=d.data.data[0]:u=d.data.data[1],r.yjtJyInformationDecideData=u,w.value=!0}).catch(d=>{console.log(d)})};return{elDialogHeight:z,state:P,listData:r,showImage:B,auditorContent:a,centerDialogVisible:w,searchValue:n,loading:S,finished:_,limit:N,offset:k,status:b,options:U,listData:r,onClickLeft:F,onLoad:E,getFileQuery:L,getAuditorDataQuery:J,statusChange:R,dateFormat:(i,d)=>{let u,f=new Date(d);const I={"Y+":f.getFullYear().toString(),"m+":(f.getMonth()+1).toString(),"d+":f.getDate().toString(),"H+":f.getHours().toString(),"M+":f.getMinutes().toString(),"S+":f.getSeconds().toString()};for(let j in I)u=new RegExp("("+j+")").exec(i),u&&(i=i.replace(u[1],u[1].length==1?I[j]:I[j].padStart(u[1].length,"0")));return i},onSearch:x,auditingDetails:H,seeImg:A,cathodeCopperAuditorClick:e,getQualityCheckingRecordDecide:V}}},s=g=>(yt("data-v-9d9bddc6"),g=g(),ut(),g),vt={class:"header"},kt={style:{display:"flex","background-color":"#ffffff"}},jt={class:"content"},Jt={style:{padding:"0px 5px 5px 5px"}},wt=s(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),xt=s(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ct=s(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),St=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Lt={key:0,style:{"font-weight":"bold"}},Vt={style:{color:"#bbbbbb"}},Yt={style:{float:"right",color:"#bbbbbb"}},Nt=s(()=>t("span",{style:{"font-weight":"bold"}},"编号：",-1)),Ft=s(()=>t("span",{style:{"font-weight":"bold"}},"重量：",-1)),Ht=s(()=>t("span",{style:{"font-weight":"bold"}},"标准：",-1)),Mt=s(()=>t("span",{style:{"font-weight":"bold"}},"计量员：",-1)),Bt=s(()=>t("span",{style:{"font-weight":"bold"}},"扫描人：",-1)),zt=s(()=>t("span",{style:{"font-weight":"bold"}},"生产日期：",-1)),Ut=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Et={key:3,style:{"font-weight":"bold"}},Rt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),At=s(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Pt={key:0},Qt=s(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),Tt={key:1},qt=s(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),Ot={key:2},Wt=s(()=>t("span",{style:{"font-weight":"bold"}},"品级分类：",-1)),Zt={key:3,style:{"font-weight":"bold"}},Gt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检时间：",-1)),Kt=s(()=>t("span",{style:{"font-weight":"bold"}},"质检人：",-1)),Xt=s(()=>t("span",{style:{"font-weight":"bold"}},"改判理由：",-1)),$t={key:0},ta=s(()=>t("span",{style:{"font-weight":"bold"}},"备注：",-1)),aa={key:0,style:{"margin-top":"15px"}},ea=s(()=>t("span",{style:{"font-weight":"bold"}},"状态：",-1)),oa=s(()=>t("span",{style:{"font-weight":"bold"}},"审核人：",-1)),la=s(()=>t("span",{style:{"font-weight":"bold"}},"审核时间：",-1)),na=s(()=>t("span",{style:{"font-weight":"bold"}},"审核内容：",-1)),sa={key:1},ia={key:0,style:{"margin-top":"30px"}};function ra(g,n,B,a,z,P){const r=$,w=tt,U=ht,S=pt,_=ot,b=lt,N=mt,k=at,F=nt,E=st,R=it,x=rt,H=dt,A=ct,J=O;return o(),h(Y,null,[t("div",vt,[p(r,{title:"审核列表",class:"page-nav-bar","left-arrow":"",onClickLeft:a.onClickLeft},null,8,["onClickLeft"]),t("div",kt,[p(w,{style:{width:"68%"},modelValue:a.searchValue,"onUpdate:modelValue":n[0]||(n[0]=e=>a.searchValue=e),shape:"round",placeholder:"请输入编号搜索",onSearch:a.onSearch},null,8,["modelValue","onSearch"]),p(S,{modelValue:a.status,"onUpdate:modelValue":n[1]||(n[1]=e=>a.status=e),clearable:"",placeholder:"状态",style:{width:"31%",float:"right","margin-top":"0.8rem"},onChange:a.statusChange},{default:c(()=>[(o(!0),h(Y,null,M(a.options,e=>(o(),D(U,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),t("div",jt,[p(k,{loading:a.loading,"onUpdate:loading":n[2]||(n[2]=e=>a.loading=e),"immediate-check":!1,finished:a.finished,"finished-text":"没有更多了",onLoad:a.onLoad},{default:c(()=>[t("div",Jt,[(o(!0),h(Y,null,M(a.listData.auditorListData,(e,L)=>(o(),D(N,{class:"box-card",shadow:"always",style:{"margin-top":"5px"},onClick:V=>a.auditingDetails(e)},{default:c(()=>[t("div",null,[t("p",null,[wt,t("span",null,l(e.batchnumber),1)]),t("p",null,[xt,t("span",null,l(parseFloat(e.suttle))+l(e.unit),1)]),t("p",null,[Ct,t("span",null,l(e.standard),1)]),t("p",null,[St,t("span",null,l(e.exteriorName),1),m("    "),e.exterior!="0"?(o(),h("span",Lt,"类型：")):y("",!0),t("span",null,l(e.dictName),1)]),t("p",null,[e.status=="0"?(o(),D(_,{key:0,type:"primary",size:"large"},{default:c(()=>[m("未审核")]),_:1})):y("",!0),e.status=="1"?(o(),D(_,{key:1,type:"danger",size:"large"},{default:c(()=>[m("驳回")]),_:1})):y("",!0),e.status=="2"?(o(),D(_,{key:2,type:"success",size:"large"},{default:c(()=>[m("审核通过")]),_:1})):y("",!0)]),p(b,{style:{color:"#c8c8c8"}}),t("span",Vt,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",e.checkoutDate)),1),t("span",Yt,l(e.checkoutUser),1)])]),_:2},1032,["onClick"]))),256))])]),_:1},8,["loading","finished","onLoad"])]),p(J,{modelValue:a.centerDialogVisible,"onUpdate:modelValue":n[9]||(n[9]=e=>a.centerDialogVisible=e),"destroy-on-close":!0,title:"审核详情",width:"96%","align-center":""},{default:c(()=>[t("div",{style:et([{padding:"15px","overflow-y":"auto","overscroll-behavior-y":"contain"},a.elDialogHeight])},[t("div",null,[t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[m("基本信息")]),_:1}),t("p",null,[Nt,t("span",null,l(a.listData.yjtJyInformationDetails.batchnumber),1)]),t("p",null,[Ft,t("span",null,l(parseFloat(a.listData.yjtJyInformationDetails.suttle))+l(a.listData.yjtJyInformationDetails.unit),1)]),t("p",null,[Ht,t("span",null,l(a.listData.yjtJyInformationDetails.standard),1)]),t("p",null,[Mt,t("span",null,l(a.listData.yjtJyInformationDetails.suttleperson),1),m("     "),Bt,t("span",null,l(a.listData.yjtJyInformationDetails.scanUser),1)]),t("p",null,[zt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.proDate)),1)])]),t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[m("历史质检信息")]),_:1}),t("div",null,[t("p",null,[Ut,a.listData.yjtJyInformationDecideData.details.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDecideData.details.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("      "),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("span",Et,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDecideData.details.dictName),1)]),t("p",null,[Rt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDecideData.details.checkoutDate)),1)]),t("p",null,[At,t("span",null,l(a.listData.yjtJyInformationDecideData.details.checkoutUser),1)]),a.listData.yjtJyInformationDecideData.details.alterReason?(o(),h("p",Pt,[Qt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.alterReason),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.remarks?(o(),h("p",Tt,[qt,t("span",null,l(a.listData.yjtJyInformationDecideData.details.remarks),1)])):y("",!0),a.listData.yjtJyInformationDecideData.details.exterior!="0"?(o(),h("div",Ot,[(o(!0),h(Y,null,M(a.listData.yjtJyInformationDecideData.fileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[3]||(n[3]=V=>a.seeImg(a.listData.yjtJyInformationDecideData.fileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0)])]),t("div",null,[p(b,{"content-position":"left"},{default:c(()=>[m("审核的质检信息")]),_:1}),t("p",null,[Wt,a.listData.yjtJyInformationDetails.exteriorName=="优等品"?(o(),D(_,{key:0,type:"primary",size:"medium"},{default:c(()=>[m("优等品 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="合格"?(o(),D(_,{key:1,type:"warning",size:"medium"},{default:c(()=>[m("合格 ")]),_:1})):y("",!0),a.listData.yjtJyInformationDetails.exteriorName=="不合格"?(o(),D(_,{key:2,type:"danger",size:"medium"},{default:c(()=>[m("不合格 ")]),_:1})):y("",!0),m("    "),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("span",Zt,"类型：")):y("",!0),t("span",null,l(a.listData.yjtJyInformationDetails.dictName),1)]),t("p",null,[Gt,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.checkoutDate)),1)]),t("p",null,[Kt,t("span",null,l(a.listData.yjtJyInformationDetails.checkoutUser),1)]),t("p",null,[Xt,t("span",null,l(a.listData.yjtJyInformationDetails.alterReason),1)]),a.listData.yjtJyInformationDetails.remarks?(o(),h("p",$t,[ta,t("span",null,l(a.listData.yjtJyInformationDetails.remarks),1)])):y("",!0)]),a.listData.yjtJyInformationDetails.status!="0"?(o(),h("div",aa,[t("p",null,[ea,t("span",null,l(a.listData.yjtJyInformationDetails.status==="0"?"未审核":a.listData.yjtJyInformationDetails.status==="1"?"驳回":"通过"),1),m("     "),oa,t("span",null,l(a.listData.yjtJyInformationDetails.auditorUserName),1)]),t("p",null,[la,t("span",null,l(a.dateFormat("YYYY-mm-dd HH:MM:SS",a.listData.yjtJyInformationDetails.auditorDate)),1)]),t("p",null,[na,t("span",null,l(a.listData.yjtJyInformationDetails.auditorContent),1)])])):y("",!0),a.listData.yjtJyInformationDetails.exterior!="0"?(o(),h("div",sa,[(o(!0),h(Y,null,M(a.listData.yjtJyInformationFileList,(e,L)=>(o(),D(F,{style:{margin:"0 2%"},onClick:n[4]||(n[4]=V=>a.seeImg(a.listData.yjtJyInformationFileList)),width:"45%",height:"8rem",fit:"cover",position:"left",src:e},null,8,["src"]))),256))])):y("",!0),a.listData.yjtJyInformationDetails.status=="0"?(o(),D(E,{key:2,modelValue:a.auditorContent,"onUpdate:modelValue":n[5]||(n[5]=e=>a.auditorContent=e),rows:"5",autosize:"",label:"审核内容",type:"textarea",maxlength:"50",placeholder:"请输入审核内容","show-word-limit":""},null,8,["modelValue"])):y("",!0)]),p(R,{show:a.showImage,"onUpdate:show":n[6]||(n[6]=e=>a.showImage=e),images:a.listData.filePathList,closeable:!0,loop:!1,closeOnPopstate:!0},null,8,["show","images"]),a.listData.yjtJyInformationDetails.status=="0"?(o(),h("div",ia,[p(A,null,{default:c(()=>[p(x,{span:"2"}),p(x,{span:"10"},{default:c(()=>[p(H,{icon:"close",type:"danger",style:{width:"90%"},onClick:n[7]||(n[7]=e=>a.cathodeCopperAuditorClick("1"))},{default:c(()=>[m("驳回 ")]),_:1})]),_:1}),p(x,{span:"10"},{default:c(()=>[p(H,{icon:"passed",type:"success",style:{width:"90%"},onClick:n[8]||(n[8]=e=>a.cathodeCopperAuditorClick("2"))},{default:c(()=>[m("通过 ")]),_:1})]),_:1}),p(x,{span:"2"})]),_:1})])):y("",!0)],4)]),_:1},8,["modelValue"])],64)}const wa=W(It,[["render",ra],["__scopeId","data-v-9d9bddc6"]]);export{wa as default};
